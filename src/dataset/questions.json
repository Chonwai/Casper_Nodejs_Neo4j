{"items":[{"tags":["neo4j"],"comments":[{"owner":{"reputation":1,"user_id":12949097,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/cfce2299c1b5d569e1e742287f5e4e45?s=128&d=identicon&r=PG&f=1","display_name":"user12949097","link":"https://stackoverflow.com/users/12949097/user12949097"},"edited":false,"score":0,"creation_date":1582795618,"post_id":60429947,"comment_id":106902812,"link":"https://stackoverflow.com/questions/60429947/error-occurs-when-creating-a-new-database-under-neo4j-4-0#comment106902812_60429947"}],"owner":{"reputation":1,"user_id":12949097,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/cfce2299c1b5d569e1e742287f5e4e45?s=128&d=identicon&r=PG&f=1","display_name":"user12949097","link":"https://stackoverflow.com/users/12949097/user12949097"},"last_editor":{"reputation":1,"user_id":12949097,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/cfce2299c1b5d569e1e742287f5e4e45?s=128&d=identicon&r=PG&f=1","display_name":"user12949097","link":"https://stackoverflow.com/users/12949097/user12949097"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1582799330,"creation_date":1582795500,"last_edit_date":1582799330,"question_id":60429947,"share_link":"https://stackoverflow.com/q/60429947","body_markdown":"I&#39;m using Debian 9.9 and the version of Neo4j is 4.0. I&#39;m having problems creating a new database using the neo4j browser. The instruction I followed is [this][1].\r\n\r\nI have tried the following Cypher command:\r\n\r\n    create database myNewDatabase\r\n\r\nHowever, an error pops up like this:\r\n\r\n    Neo.ClientError.Statement.NotSystemDatabaseError\r\n    Unsupported administration command: create database myNewDatabase\r\n\r\nPlease let me know what the error message means and how I can solve it. Thx in advance:-)\r\n\r\n\r\n  [1]: https://neo4j.com/developer/manage-multiple-databases/","link":"https://stackoverflow.com/questions/60429947/error-occurs-when-creating-a-new-database-under-neo4j-4-0","title":"Error occurs when creating a new database under Neo4j 4.0"},{"tags":["neo4j"],"answers":[{"comments":[{"owner":{"reputation":933,"user_id":2079445,"user_type":"registered","accept_rate":45,"profile_image":"https://www.gravatar.com/avatar/b3054d111aa00407c8d8000957ad9958?s=128&d=identicon&r=PG","display_name":"ling","link":"https://stackoverflow.com/users/2079445/ling"},"edited":false,"score":0,"creation_date":1582741164,"post_id":60419850,"comment_id":106885084,"link":"https://stackoverflow.com/questions/60419356/do-i-need-to-set-up-neo4j-import-environment-variable/60419850#comment106885084_60419850"},{"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1582747043,"post_id":60419850,"comment_id":106887764,"link":"https://stackoverflow.com/questions/60419356/do-i-need-to-set-up-neo4j-import-environment-variable/60419850#comment106887764_60419850"},{"owner":{"reputation":933,"user_id":2079445,"user_type":"registered","accept_rate":45,"profile_image":"https://www.gravatar.com/avatar/b3054d111aa00407c8d8000957ad9958?s=128&d=identicon&r=PG","display_name":"ling","link":"https://stackoverflow.com/users/2079445/ling"},"edited":false,"score":0,"creation_date":1582755215,"post_id":60419850,"comment_id":106890975,"link":"https://stackoverflow.com/questions/60419356/do-i-need-to-set-up-neo4j-import-environment-variable/60419850#comment106890975_60419850"}],"tags":[],"owner":{"reputation":86,"user_id":6771840,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-HPdvp8Jp4gE/AAAAAAAAAAI/AAAAAAAAAQ0/1vI4OLS5HAk/photo.jpg?sz=128","display_name":"sharmag","link":"https://stackoverflow.com/users/6771840/sharmag"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582740006,"creation_date":1582740006,"answer_id":60419850,"question_id":60419356,"share_link":"https://stackoverflow.com/a/60419850","body_markdown":"NEO4J_IMPORT need not be in env.\r\n\r\nProbably neo4j instance is down or running or running on non standard port. Try this one.\r\nIn neo4j home path and make sure file has sufficient permission.\r\n\r\n    cat query.cypher | bin/cypher-shell -u neo4j -p neo4j -a localhost:7687 --format plain\r\n\r\nhttps://neo4j.com/docs/operations-manual/3.5/tools/cypher-shell/#cypher-shell-syntax\r\n","link":"https://stackoverflow.com/questions/60419356/do-i-need-to-set-up-neo4j-import-environment-variable/60419850#60419850","title":"Do I need to set up NEO4J_IMPORT environment variable?"}],"owner":{"reputation":933,"user_id":2079445,"user_type":"registered","accept_rate":45,"profile_image":"https://www.gravatar.com/avatar/b3054d111aa00407c8d8000957ad9958?s=128&d=identicon&r=PG","display_name":"ling","link":"https://stackoverflow.com/users/2079445/ling"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1582740006,"creation_date":1582738049,"question_id":60419356,"share_link":"https://stackoverflow.com/q/60419356","body_markdown":"    cp -f data/*.csv ${NEO4J_IMPORT}/\r\n    cd &quot;${NEO4J_HOME}&quot;\r\n    time bin/cypher-shell &lt; $tmp_dir/create_graph.cypher\r\n\r\nI am seeing a script to create a neo4j database, but running into a problem:\r\n\r\n    cp: /person.csv: Read-only file system\r\n    Connection refused\r\n\r\nI am on Mac and can echo the NEO4J_HOME variable, but no NEO4J_IMPORT. Should I set my own NEO4J_IMPORT environment variable when using cypher-shell to create a graph? Where to set the NEO4J_IMPORT environment variable, if it is a must? \r\n","link":"https://stackoverflow.com/questions/60419356/do-i-need-to-set-up-neo4j-import-environment-variable","title":"Do I need to set up NEO4J_IMPORT environment variable?"},{"tags":["neo4j","cypher"],"answers":[{"comments":[{"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1582745030,"post_id":60414426,"comment_id":106886892,"link":"https://stackoverflow.com/questions/60411310/how-to-creating-neo4j-cypher-labels-dynamically-with-variable/60414426#comment106886892_60414426"}],"tags":[],"owner":{"reputation":308,"user_id":12251717,"user_type":"registered","profile_image":"https://i.stack.imgur.com/2ImiE.jpg?s=128&g=1","display_name":"TheTeacher","link":"https://stackoverflow.com/users/12251717/theteacher"},"last_editor":{"reputation":308,"user_id":12251717,"user_type":"registered","profile_image":"https://i.stack.imgur.com/2ImiE.jpg?s=128&g=1","display_name":"TheTeacher","link":"https://stackoverflow.com/users/12251717/theteacher"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582747185,"last_edit_date":1582747185,"creation_date":1582721555,"answer_id":60414426,"question_id":60411310,"share_link":"https://stackoverflow.com/a/60414426","body_markdown":"you can use the apoc fucntions to do this\r\n```\r\nCALL apoc.merge.node([&#39;Label&#39;], identProps:{key:value, …​}, onCreateProps:{key:value,…​}, onMatchProps:{key:value,…​}})\r\n```\r\n\r\nthe following query will dynamically read label names and merge nodes with respective label\r\n```\r\nCALL apoc.load.jdbc(&#39;jdbc:mysql://localhost/mysql?user=root&amp;password=root&amp;useUnicode=true&amp;characterEncoding=utf8&#39;,&#39;select * from db&#39;)YIELD row \r\nCALL apoc.merge.node([row.label], identProps:{name:row.keyword}, onCreateProps:{}, onMatchProps:{}}) YIELD node \r\nRETURN node \r\n```","link":"https://stackoverflow.com/questions/60411310/how-to-creating-neo4j-cypher-labels-dynamically-with-variable/60414426#60414426","title":"How to creating Neo4j/Cypher labels dynamically with variable?"}],"owner":{"reputation":1,"user_id":6867785,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/ee5117b555d5b8d49d829eeba2338a3c?s=128&d=identicon&r=PG&f=1","display_name":"骏捷徐","link":"https://stackoverflow.com/users/6867785/%e9%aa%8f%e6%8d%b7%e5%be%90"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1582747185,"creation_date":1582711362,"question_id":60411310,"share_link":"https://stackoverflow.com/q/60411310","body_markdown":"When I try:\r\n```\r\nCALL apoc.load.jdbc(&#39;jdbc:mysql://localhost/mysql?user=root&amp;password=root&amp;useUnicode=true&amp;characterEncoding=utf8&#39;,&#39;select * from db&#39;)YIELD row\r\nWHERE row.label = &#39;dis&#39; MERGE (n:dis {name: row.keyword})\r\nWHERE row.label = &#39;part&#39; MERGE (n:part {name: row.keyword})\r\n```\r\nand there is an error\r\n```\r\nNeo.ClientError.Statement.SyntaxError: Invalid input &#39;H&#39;: expected &#39;i/I&#39;\r\n```","link":"https://stackoverflow.com/questions/60411310/how-to-creating-neo4j-cypher-labels-dynamically-with-variable","title":"How to creating Neo4j/Cypher labels dynamically with variable?"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":17552,"user_id":232671,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/9fafab68e922fdf068c5c36f823687fe?s=128&d=identicon&r=PG","display_name":"Luanne","link":"https://stackoverflow.com/users/232671/luanne"},"edited":false,"score":5,"creation_date":1582709322,"post_id":60410509,"comment_id":106867162,"link":"https://stackoverflow.com/questions/60410509/neo4j-cypher-queries#comment106867162_60410509"},{"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":2,"creation_date":1582755560,"post_id":60410509,"comment_id":106891098,"link":"https://stackoverflow.com/questions/60410509/neo4j-cypher-queries#comment106891098_60410509"},{"owner":{"reputation":195,"user_id":8248070,"user_type":"registered","profile_image":"https://i.stack.imgur.com/zroUK.jpg?s=128&g=1","display_name":"Susampath","link":"https://stackoverflow.com/users/8248070/susampath"},"reply_to_user":{"reputation":17552,"user_id":232671,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/9fafab68e922fdf068c5c36f823687fe?s=128&d=identicon&r=PG","display_name":"Luanne","link":"https://stackoverflow.com/users/232671/luanne"},"edited":false,"score":0,"creation_date":1582792998,"post_id":60410509,"comment_id":106901403,"link":"https://stackoverflow.com/questions/60410509/neo4j-cypher-queries#comment106901403_60410509"},{"owner":{"reputation":195,"user_id":8248070,"user_type":"registered","profile_image":"https://i.stack.imgur.com/zroUK.jpg?s=128&g=1","display_name":"Susampath","link":"https://stackoverflow.com/users/8248070/susampath"},"reply_to_user":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1582793068,"post_id":60410509,"comment_id":106901443,"link":"https://stackoverflow.com/questions/60410509/neo4j-cypher-queries#comment106901443_60410509"}],"answers":[{"comments":[{"owner":{"reputation":195,"user_id":8248070,"user_type":"registered","profile_image":"https://i.stack.imgur.com/zroUK.jpg?s=128&g=1","display_name":"Susampath","link":"https://stackoverflow.com/users/8248070/susampath"},"edited":false,"score":0,"creation_date":1582737765,"post_id":60415226,"comment_id":106883587,"link":"https://stackoverflow.com/questions/60410509/neo4j-cypher-queries/60415226#comment106883587_60415226"},{"owner":{"reputation":308,"user_id":12251717,"user_type":"registered","profile_image":"https://i.stack.imgur.com/2ImiE.jpg?s=128&g=1","display_name":"TheTeacher","link":"https://stackoverflow.com/users/12251717/theteacher"},"reply_to_user":{"reputation":195,"user_id":8248070,"user_type":"registered","profile_image":"https://i.stack.imgur.com/zroUK.jpg?s=128&g=1","display_name":"Susampath","link":"https://stackoverflow.com/users/8248070/susampath"},"edited":false,"score":1,"creation_date":1582747093,"post_id":60415226,"comment_id":106887788,"link":"https://stackoverflow.com/questions/60410509/neo4j-cypher-queries/60415226#comment106887788_60415226"},{"owner":{"reputation":195,"user_id":8248070,"user_type":"registered","profile_image":"https://i.stack.imgur.com/zroUK.jpg?s=128&g=1","display_name":"Susampath","link":"https://stackoverflow.com/users/8248070/susampath"},"edited":false,"score":0,"creation_date":1582776774,"post_id":60415226,"comment_id":106896099,"link":"https://stackoverflow.com/questions/60410509/neo4j-cypher-queries/60415226#comment106896099_60415226"}],"tags":[],"owner":{"reputation":308,"user_id":12251717,"user_type":"registered","profile_image":"https://i.stack.imgur.com/2ImiE.jpg?s=128&g=1","display_name":"TheTeacher","link":"https://stackoverflow.com/users/12251717/theteacher"},"last_editor":{"reputation":308,"user_id":12251717,"user_type":"registered","profile_image":"https://i.stack.imgur.com/2ImiE.jpg?s=128&g=1","display_name":"TheTeacher","link":"https://stackoverflow.com/users/12251717/theteacher"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1582747065,"last_edit_date":1582747065,"creation_date":1582724302,"answer_id":60415226,"question_id":60410509,"share_link":"https://stackoverflow.com/a/60415226","body_markdown":"```\r\nMATCH (a)-[:friends]-(f)-[:friends]-(fof) WHERE a.name = &#39;A&#39; AND NOT (a)-[:friends]-(fof)\r\nWITH DISTINCT fof\nMATCH ( fof)-[:friends]-(l) \nRETURN fof.name , COUNT (DISTINCT l)\r\n```","link":"https://stackoverflow.com/questions/60410509/neo4j-cypher-queries/60415226#60415226","title":"Neo4j Cypher Queries"},{"tags":[],"owner":{"reputation":195,"user_id":8248070,"user_type":"registered","profile_image":"https://i.stack.imgur.com/zroUK.jpg?s=128&g=1","display_name":"Susampath","link":"https://stackoverflow.com/users/8248070/susampath"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582738091,"creation_date":1582738091,"answer_id":60419370,"question_id":60410509,"share_link":"https://stackoverflow.com/a/60419370","body_markdown":"I found a solution when referring to Neo4j documentation.\r\n\r\n    match (a:users {userId:&#39;1234&#39;})-[e:friends]-(b:users)\r\n    with collect(b) as excluded\r\n    match (b:users)-[r:friends]-(fof:users)\r\n    with collect(fof) as fofCollect,excluded,fof,count(r) as relationCount\r\n    where none (fof in fofCollect where fof in excluded)\r\n    return fof.FIRST_NAME,fof.userId,relationCount\r\n    order by relationCount desc ","link":"https://stackoverflow.com/questions/60410509/neo4j-cypher-queries/60419370#60419370","title":"Neo4j Cypher Queries"}],"owner":{"reputation":195,"user_id":8248070,"user_type":"registered","profile_image":"https://i.stack.imgur.com/zroUK.jpg?s=128&g=1","display_name":"Susampath","link":"https://stackoverflow.com/users/8248070/susampath"},"last_editor":{"reputation":13,"user_id":6583437,"user_type":"registered","profile_image":"https://i.stack.imgur.com/qSRK9.jpg?s=128&g=1","display_name":"Gurpreet Singh","link":"https://stackoverflow.com/users/6583437/gurpreet-singh"},"comment_count":4,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1582747065,"creation_date":1582708931,"last_edit_date":1582737931,"question_id":60410509,"share_link":"https://stackoverflow.com/q/60410509","body_markdown":"I am new to neo4j and I have a following relationship like this\r\n\r\n    A is a friend of B\r\n    A is a friend of E\r\n    B is a friend of C\r\n    C is a friend of D\r\n    C is a friend of F\r\n    E is a friend of G\r\n    G is a friend of H\r\n\r\nI want a result of A&#39;s friends&#39; friends where A is not currently a friend by ordering the numbers of friends by DESC.The expecting result is \r\n\r\n    C ---&gt; 2\r\n    D ---&gt; 1\r\n    F ---&gt; 1\r\n    G ---&gt; 1\r\n    H ---&gt; 1\r\n\r\nA,B,C,D,E,F,G,H are nodes and they are connected with a relationship of [:friends]. It would be much grateful if anyone can give a solution for this.\r\n\r\n ","link":"https://stackoverflow.com/questions/60410509/neo4j-cypher-queries","title":"Neo4j Cypher Queries"},{"tags":["neo4j","cypher","graph-databases","neo4j-apoc"],"answers":[{"comments":[{"owner":{"reputation":5,"user_id":12851984,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c4c1b6e1b40b4df581f76942299a12af?s=128&d=identicon&r=PG&f=1","display_name":"ghosh506","link":"https://stackoverflow.com/users/12851984/ghosh506"},"edited":false,"score":0,"creation_date":1582669755,"post_id":60403858,"comment_id":106855905,"link":"https://stackoverflow.com/questions/60401270/how-to-optimize-the-following-neo4j-cypher-query/60403858#comment106855905_60403858"},{"owner":{"reputation":5,"user_id":12851984,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c4c1b6e1b40b4df581f76942299a12af?s=128&d=identicon&r=PG&f=1","display_name":"ghosh506","link":"https://stackoverflow.com/users/12851984/ghosh506"},"edited":false,"score":0,"creation_date":1582669816,"post_id":60403858,"comment_id":106855934,"link":"https://stackoverflow.com/questions/60401270/how-to-optimize-the-following-neo4j-cypher-query/60403858#comment106855934_60403858"},{"owner":{"reputation":5,"user_id":12851984,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c4c1b6e1b40b4df581f76942299a12af?s=128&d=identicon&r=PG&f=1","display_name":"ghosh506","link":"https://stackoverflow.com/users/12851984/ghosh506"},"edited":false,"score":0,"creation_date":1582669820,"post_id":60403858,"comment_id":106855936,"link":"https://stackoverflow.com/questions/60401270/how-to-optimize-the-following-neo4j-cypher-query/60403858#comment106855936_60403858"},{"owner":{"reputation":5,"user_id":12851984,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c4c1b6e1b40b4df581f76942299a12af?s=128&d=identicon&r=PG&f=1","display_name":"ghosh506","link":"https://stackoverflow.com/users/12851984/ghosh506"},"edited":false,"score":0,"creation_date":1582670629,"post_id":60403858,"comment_id":106856206,"link":"https://stackoverflow.com/questions/60401270/how-to-optimize-the-following-neo4j-cypher-query/60403858#comment106856206_60403858"},{"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":5,"user_id":12851984,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c4c1b6e1b40b4df581f76942299a12af?s=128&d=identicon&r=PG&f=1","display_name":"ghosh506","link":"https://stackoverflow.com/users/12851984/ghosh506"},"edited":false,"score":0,"creation_date":1582671188,"post_id":60403858,"comment_id":106856377,"link":"https://stackoverflow.com/questions/60401270/how-to-optimize-the-following-neo4j-cypher-query/60403858#comment106856377_60403858"},{"owner":{"reputation":5,"user_id":12851984,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c4c1b6e1b40b4df581f76942299a12af?s=128&d=identicon&r=PG&f=1","display_name":"ghosh506","link":"https://stackoverflow.com/users/12851984/ghosh506"},"edited":false,"score":0,"creation_date":1582671581,"post_id":60403858,"comment_id":106856497,"link":"https://stackoverflow.com/questions/60401270/how-to-optimize-the-following-neo4j-cypher-query/60403858#comment106856497_60403858"},{"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":5,"user_id":12851984,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c4c1b6e1b40b4df581f76942299a12af?s=128&d=identicon&r=PG&f=1","display_name":"ghosh506","link":"https://stackoverflow.com/users/12851984/ghosh506"},"edited":false,"score":0,"creation_date":1582672152,"post_id":60403858,"comment_id":106856638,"link":"https://stackoverflow.com/questions/60401270/how-to-optimize-the-following-neo4j-cypher-query/60403858#comment106856638_60403858"},{"owner":{"reputation":5,"user_id":12851984,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c4c1b6e1b40b4df581f76942299a12af?s=128&d=identicon&r=PG&f=1","display_name":"ghosh506","link":"https://stackoverflow.com/users/12851984/ghosh506"},"edited":false,"score":0,"creation_date":1582672247,"post_id":60403858,"comment_id":106856661,"link":"https://stackoverflow.com/questions/60401270/how-to-optimize-the-following-neo4j-cypher-query/60403858#comment106856661_60403858"}],"tags":[],"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":8,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1582671968,"last_edit_date":1582671968,"creation_date":1582668269,"answer_id":60403858,"question_id":60401270,"share_link":"https://stackoverflow.com/a/60403858","body_markdown":" 1. You need to avoid making a [cartesian product](https://stackoverflow.com/questions/33352673/why-does-neo4j-warn-this-query-builds-a-cartesian-product-between-disconnected) between the results of your two `MATCH` clauses. Let&#39;s say the two `MATCH` clauses would normally return `N` and `M` nodes, respectively, when executed in their own queries. Because your query combines those two `MATCH` clauses in the way that it does, your second `MATCH` clause is actually performing `N*M` matches (and producing `N*M` result rows).\r\n\r\n 2. You need to make sure you have created an [index]() on `:VW_OrderXStatusSummary4(SourceTypeID)`. That will optimize the lookups performed by the `MATCH` clauses.\r\n\r\n 3. You can simplify your Cypher code to avoid duplicated function calls.\r\n\r\n\r\nAfter creating the index indicated above, try this:\r\n\r\n    WITH apoc.date.parse(&quot;2020-02-10&quot;,&#39;s&#39;,(&#39;yyyy-MM-dd&#39;)) AS a, apoc.date.parse(&quot;2020-02-16&quot;,&#39;s&#39;,(&#39;yyyy-MM-dd&#39;)) AS b\r\n    MATCH (x:VW_OrderXStatusSummary4 {SourceTypeID: &quot;1&quot;}) \r\n    WHERE a &lt;= apoc.date.parse(x.TimeStamp,&#39;s&#39;,(&#39;yyyy-MM-dd HH:mm:ss&#39;)) &lt;= b\r\n    WITH a, b, COLLECT(x.IdentifierValue) AS X\r\n    MATCH (y:VW_OrderXStatusSummary4 {SourceTypeID: &quot;2&quot;}) \r\n    WHERE a &lt;= apoc.date.parse(y.TimeStamp,&#39;s&#39;,(&#39;yyyy-MM-dd HH:mm:ss&#39;)) &lt;= b\r\n    WITH X, COLLECT(y.IdentifierValue) AS Y\r\n    UNWIND apoc.coll.disjunction(X, Y) AS YY\r\n    ...\r\n\r\nPerforming the `COLLECT(x.IdentifierValue)` operation in the first `WITH` clause causes it to return all the `x` nodes in a single result row (instead of `N` result rows). This allows the second `MATCH` to avoid a cartesian product issue.","link":"https://stackoverflow.com/questions/60401270/how-to-optimize-the-following-neo4j-cypher-query/60403858#60403858","title":"How to optimize the following neo4j Cypher query"}],"owner":{"reputation":5,"user_id":12851984,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c4c1b6e1b40b4df581f76942299a12af?s=128&d=identicon&r=PG&f=1","display_name":"ghosh506","link":"https://stackoverflow.com/users/12851984/ghosh506"},"last_editor":{"reputation":5,"user_id":12851984,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c4c1b6e1b40b4df581f76942299a12af?s=128&d=identicon&r=PG&f=1","display_name":"ghosh506","link":"https://stackoverflow.com/users/12851984/ghosh506"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60403858,"answer_count":1,"score":0,"last_activity_date":1582672200,"creation_date":1582656242,"last_edit_date":1582672200,"question_id":60401270,"share_link":"https://stackoverflow.com/q/60401270","body_markdown":"I am new to cypher and have the below query to find mistmaches between 2 source types(for example). I believe syntactically the query looks fine but it takes 1 minute to run on data set of just 1,00,000 nodes. I am not using relations still. Can someone please help in optimizing the query? Thanks.\r\n\r\n    MATCH (VW_OXSS41:VW_OrderXStatusSummary4{SourceTypeID: &quot;1&quot;}) \r\n    WHERE apoc.date.parse(VW_OXSS41.TimeStamp,&#39;s&#39;,(&#39;yyyy-MM-dd HH:mm:ss&#39;))&gt;=apoc.date.parse(&quot;2020-02-10&quot;,&#39;s&#39;,(&#39;yyyy-MM-dd&#39;)) AND apoc.date.parse(VW_OXSS41.TimeStamp,&#39;s&#39;,(&#39;yyyy-MM-dd HH:mm:ss&#39;))&lt;=apoc.date.parse(&quot;2020-02-16&quot;,&#39;s&#39;,(&#39;yyyy-MM-dd&#39;))\r\n    WITH VW_OXSS41.IdentifierValue as X\r\n    MATCH (VW_OXSS42:VW_OrderXStatusSummary4{SourceTypeID: &quot;2&quot;}) \r\n    WHERE apoc.date.parse(VW_OXSS42.TimeStamp,&#39;s&#39;,(&#39;yyyy-MM-dd HH:mm:ss&#39;))&gt;=apoc.date.parse(&quot;2020-02-10&quot;,&#39;s&#39;,(&#39;yyyy-MM-dd&#39;)) AND apoc.date.parse(VW_OXSS42.TimeStamp,&#39;s&#39;,(&#39;yyyy-MM-dd HH:mm:ss&#39;))&lt;=apoc.date.parse(&quot;2020-02-16&quot;,&#39;s&#39;,(&#39;yyyy-MM-dd&#39;))\r\n    WITH apoc.coll.disjunction(COLLECT(X), COLLECT(VW_OXSS42.IdentifierValue)) as XX\r\n    UNWIND (XX) as YY\r\n\r\n\r\n\r\nThe updated query and the error:-\r\n\r\n    WITH apoc.date.parse(&quot;2020-02-20&quot;,&#39;s&#39;,(&#39;yyyy-MM-dd&#39;)) AS a, apoc.date.parse(&quot;2020-02-25&quot;,&#39;s&#39;,(&#39;yyyy-MM-dd&#39;)) AS b\r\n           MATCH (x:VW_OrderXStatusSummary4 {SourceTypeID: &quot;2&quot;}) \r\n           WHERE a &lt;= apoc.date.parse(x.TimeStamp,&#39;s&#39;,(&#39;yyyy-MM-dd HH:mm:ss&#39;)) &lt;= b\r\n           WITH a, b, COLLECT(x.IdentifierValue) AS X\r\n           MATCH (y:VW_OrderXStatusSummary4 {SourceTypeID: &quot;1&quot;}) \r\n           WHERE a &lt;= apoc.date.parse(y.TimeStamp,&#39;s&#39;,(&#39;yyyy-MM-dd HH:mm:ss&#39;)) &lt;= b\r\n           WITH X, COLLECT(y.IdentifierValue) AS Y\r\n           UNWIND apoc.coll.subtract(X,Y) AS XX\r\n           MATCH (z:VW_OrderXStatusSummary4 {SourceTypeID: &quot;2&quot;}) \r\n           WHERE a &lt;= apoc.date.parse(z.TimeStamp,&#39;s&#39;,(&#39;yyyy-MM-dd HH:mm:ss&#39;)) &lt;= b\r\n           RETURN XX AS MISMATCHES,MAX(z.TimeStamp);\r\n    Variable `a` not defined (line 10, column 7 (offset: 551))\r\n    &quot;WHERE a &lt;= apoc.date.parse(z.TimeStamp,&#39;s&#39;,(&#39;yyyy-MM-dd HH:mm:ss&#39;)) &lt;= b&quot;\r\n\r\n\r\nSolved the above error like this:- \r\n\r\n\r\n    WITH apoc.date.parse(&quot;2020-02-21&quot;,&#39;s&#39;,(&#39;yyyy-MM-dd&#39;)) AS a, apoc.date.parse(&quot;2020-02-25&quot;,&#39;s&#39;,(&#39;yyyy-MM-dd&#39;)) AS b\r\n    MATCH (x:VW_OrderXStatusSummary4 {SourceTypeID: &quot;2&quot;}) \r\n    WHERE a &lt;= apoc.date.parse(x.TimeStamp,&#39;s&#39;,(&#39;yyyy-MM-dd HH:mm:ss&#39;)) &lt;= b\r\n    WITH a, b, COLLECT(x.IdentifierValue) AS X\r\n    MATCH (y:VW_OrderXStatusSummary4 {SourceTypeID: &quot;1&quot;}) \r\n    WHERE a &lt;= apoc.date.parse(y.TimeStamp,&#39;s&#39;,(&#39;yyyy-MM-dd HH:mm:ss&#39;)) &lt;= b\r\n    WITH X, COLLECT(y.IdentifierValue) AS Y\r\n    UNWIND apoc.coll.subtract(X,Y) AS XX\r\n    WITH XX, apoc.date.parse(&quot;2020-02-20&quot;,&#39;s&#39;,(&#39;yyyy-MM-dd&#39;)) AS a, apoc.date.parse(&quot;2020-02-25&quot;,&#39;s&#39;,(&#39;yyyy-MM-dd&#39;)) AS b\r\n    MATCH (z:VW_OrderXStatusSummary4 {SourceTypeID: &quot;2&quot;}) \r\n    WHERE a &lt;= apoc.date.parse(z.TimeStamp,&#39;s&#39;,(&#39;yyyy-MM-dd HH:mm:ss&#39;)) &lt;= b\r\n    AND XX = z.IdentifierValue\r\n    RETURN XX AS MISMATCHES,MAX(z.TimeStamp);\r\n\r\nWith the correct expected output as:- \r\n\r\n    +---------------------------------------------+\r\n    | MISMATCHES          | TIMESTAMP             |\r\n    +---------------------------------------------+\r\n    | &quot;W2002201453550218&quot; | &quot;2020-02-21 12:00:16&quot; |\r\n    | &quot;W2002201453550222&quot; | &quot;2020-02-21 12:00:16&quot; |\r\n    | &quot;W2002201453550223&quot; | &quot;2020-02-21 09:30:36&quot; |\r\n    | &quot;W2002201453550224&quot; | &quot;2020-02-21 12:00:16&quot; |\r\n    | &quot;W2002201453550226&quot; | &quot;2020-02-21 12:00:16&quot; |\r\n    | &quot;W2002201453550227&quot; | &quot;2020-02-21 12:00:16&quot; |\r\n    | &quot;W2002201453550237&quot; | &quot;2020-02-21 12:00:16&quot; |\r\n    | &quot;3011WOS002978598&quot;  | &quot;2020-02-21 10:00:54&quot; |\r\n    | &quot;3011WOS002978595&quot;  | &quot;2020-02-21 13:00:57&quot; |\r\n    | &quot;0010000000006183&quot;  | &quot;2020-02-21 16:00:41&quot; |\r\n    | &quot;W2002181111547439&quot; | &quot;2020-02-21 04:00:34&quot; |\r\n    | &quot;11&quot;                | &quot;2020-02-21 16:00:41&quot; |\r\n    | &quot;10112787861P1458&quot;  | &quot;2020-02-21 10:00:54&quot; |\r\n    +---------------------------------------------+\r\n\r\nWondering if there&#39;s a better approach?","link":"https://stackoverflow.com/questions/60401270/how-to-optimize-the-following-neo4j-cypher-query","title":"How to optimize the following neo4j Cypher query"},{"tags":["neo4j","cypher"],"answers":[{"tags":[],"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1582665030,"last_edit_date":1582665030,"creation_date":1582660500,"answer_id":60402217,"question_id":60400387,"share_link":"https://stackoverflow.com/a/60402217","body_markdown":"This should work:\r\n\r\n    MATCH (d:Drug)\r\n    WHERE SIZE((d)-[:IS_PARTICIPANT_IN]-&gt;()) = 1\r\n    MATCH (d)-[:IS_PARTICIPANT_IN]-&gt;(ddi)\r\n    RETURN ddi.name AS ddiName, COLLECT(d.name) AS drugNames\r\n    ORDER BY drugNames[0]\r\n\r\nThe `WHERE` clause uses a very efficient degreeness check to filter for `Drug` nodes that have only a single outgoing `IS_PARTICIPANT_IN` relationship. This check is efficient because it does not have to actually get any `DrugDrugInteraction` nodes.\r\n\r\nAfter the degreeness check, the query performs a second `MATCH` to actually get the associated `DrugDrugInteraction` node. (I assume that the `IS_PARTICIPANT_IN` relationship only points at `DrugDrugInteraction` nodes, and have therefore omitted the label from the search pattern, for efficiency).\r\n\r\nThe `RETURN` clause uses the [aggregating function](https://neo4j.com/docs/developer-manual/current/cypher/functions/aggregating/) `COLLECT` to collect the `Drug` names for each `ddi` name. (I assume that `ddi` nodes have unique names.)\r\n\r\nBy the way, this query will also work if there are any number of `Drug`s (not just 2) that participate in the same `DrugDrugInteraction`, and no other ones. Also, if a matched `DrugDrugInteraction` happens to have a related `Drug` that participates in other interactions, this query will not include that `Drug` in the result (since this query only pays attention to `d` nodes that passed the initial degreeness check).","link":"https://stackoverflow.com/questions/60400387/obtain-pairs-of-nodes-having-exactly-one-relationship-of-a-certain-type-which-co/60402217#60402217","title":"Obtain pairs of nodes having exactly one relationship of a certain type which connects them to each other in Cypher"}],"owner":{"reputation":79,"user_id":8167370,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9f0e474d3a30673f8c391e425d269153?s=128&d=identicon&r=PG&f=1","display_name":"clanofsol","link":"https://stackoverflow.com/users/8167370/clanofsol"},"last_editor":{"reputation":79,"user_id":8167370,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9f0e474d3a30673f8c391e425d269153?s=128&d=identicon&r=PG&f=1","display_name":"clanofsol","link":"https://stackoverflow.com/users/8167370/clanofsol"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1582665030,"creation_date":1582652432,"last_edit_date":1582653940,"question_id":60400387,"share_link":"https://stackoverflow.com/q/60400387","body_markdown":"I have a graph database in Neo4j with drugs and drug-drug interactions, among other entities. In this regard, ```()-[:IS_PARTICIPANT_IN]-&gt;()``` connects a drug to an interaction. I need to obtain those pairs of drugs ```a``` and ```b``` which are not involved in any other ```:IS_PARTICIPANT_IN``` relationship other than the one between them, i.e. ```(a)-[:IS_PARTICIPANT_IN]-&gt;(ddi:DrugDrugInteraction)&lt;-[:IS_PARTICIPANT_IN]-(b)```, without any other ```IS_PARTICIPANT_IN``` relationships involving neither ```a``` nor ```b```.\r\n\r\nFor that purpose, I have tried the following Cypher query. However, it ends up reaching heap size (raised to 8 GB), as collect operations consume too much memory.\r\n\r\n```Cypher\r\nMATCH (drug1:Drug)-[r1:IS_PARTICIPANT_IN]-&gt;(ddi:DrugDrugInteraction)\r\nMATCH (drug2:Drug)-[r2:IS_PARTICIPANT_IN]-&gt;(ddi)\r\nWHERE drug1 &lt;&gt; drug2 \r\nOPTIONAL MATCH (drug2)-[r3:IS_PARTICIPANT_IN]-&gt;(furtherDDI:DrugDrugInteraction)\r\nWHERE furtherDDI &lt;&gt; ddi\r\nWITH drug1, drug2, ddi, COLLECT(ddi) AS ddis, furtherDDI, COLLECT(furtherDDI) AS additionalDDIs\r\nWITH drug1, drug2, ddi, COUNT(ddis) AS n1, COUNT(additionalDDIs) AS n2\r\nWHERE n1 = 1 AND n2 = 0\r\nRETURN drug1.name, drug2.name, ddi.name ORDER BY drug1;\r\n```\r\n\r\nHow can I improve my code so as to get the desired results without exceeding the heap size limit?","link":"https://stackoverflow.com/questions/60400387/obtain-pairs-of-nodes-having-exactly-one-relationship-of-a-certain-type-which-co","title":"Obtain pairs of nodes having exactly one relationship of a certain type which connects them to each other in Cypher"},{"tags":["c#","neo4j","neo4jclient"],"owner":{"reputation":177,"user_id":3091744,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/277365aa6e544c174a5e771c3f754b1b?s=128&d=identicon&r=PG&f=1","display_name":"CodeCase","link":"https://stackoverflow.com/users/3091744/codecase"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1582648247,"creation_date":1582648247,"question_id":60399218,"share_link":"https://stackoverflow.com/q/60399218","body_markdown":"Im using the neo4j Client v4.0.0.1 and want to create just a single node from a class but Im always getting the following 404 error.\r\n\r\nError Code:\r\n\r\n    System.Exception: &#39;Received an unexpected HTTP status when executing the request.\r\n    \r\n    The response status was: 404 Not Found\r\n    \r\n    The response from Neo4j (which might include useful detail!) was: &#39;\r\n\r\nIf I use curl to check if all is fine:\r\n\r\n    curl -I localhost:7474\r\n    HTTP/1.1 200 OK\r\n    Date: Tue, 25 Feb 2020 14:23:18 GMT\r\n    Access-Control-Allow-Origin: *\r\n    Content-Type: application/json;charset=utf-8\r\n    Content-Length: 223\r\n\r\nAnd:\r\n\r\n    curl -I http://localhost:7474/db/data\r\n    HTTP/1.1 302 Found\r\n    Date: Tue, 25 Feb 2020 14:23:26 GMT\r\n    Location: http://localhost:7474/db/data/\r\n    Content-Length: 0\r\n\r\nall seems to be fine. Thats my try Id like to start with:\r\n\r\n    public class Person\r\n        {\r\n            public string Name { get; set; }\r\n            public int Id { get; set; }\r\n            public int Age { get; set; }\r\n        }\r\n\r\n    private void createNode(){\r\n                var client = new GraphClient(new Uri(&quot;http://localhost:7474/db/data/&quot;), &quot;neo4j&quot;, &quot;neo4j&quot;);\r\n\r\n            client.Connect();\r\n\r\n            var results = client.Cypher\r\n                        .Create(&quot;(n:Person)&quot;)\r\n                        .Return((a) =&gt; new {\r\n                            Person = a.As&lt;Person&gt;()\r\n                        }).Results;\r\n\r\n        }\r\n","link":"https://stackoverflow.com/questions/60399218/wpf-app-and-neo4j-client-always-throws-me-a-404","title":"WPF App and Neo4j Client always throws me a 404"},{"tags":["performance","debugging","encryption","neo4j"],"comments":[{"owner":{"reputation":23863,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"edited":false,"score":0,"creation_date":1582673018,"post_id":60398809,"comment_id":106856850,"link":"https://stackoverflow.com/questions/60398809/neo4j-interactive-graph-freezes#comment106856850_60398809"}],"owner":{"reputation":13,"user_id":7024998,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-cJedZvQuV1s/AAAAAAAAAAI/AAAAAAAAKcU/Viek0O70FsI/photo.jpg?sz=128","display_name":"cdery6","link":"https://stackoverflow.com/users/7024998/cdery6"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1582646911,"creation_date":1582646911,"question_id":60398809,"share_link":"https://stackoverflow.com/q/60398809","body_markdown":"We have been using Neo4j for quite some time without any problem. Recently, the community version we are using started to be very buggy. So buggy that we cannot use the Interactive graph view. I would note that we did not make any change to our project and that we had this issue about one year ago. How was the issue solved? It was not. It just started working again after some time. Yesterday, I had a colleague launch the tool in Linux/Google Chrome. It worked perfectly.\r\n\r\nAnother colleague launched the tool in windows and it was as buggy as my windows instance. I would add that our computers are sufficiently powerful to handle our use case.\r\n\r\nAny idea how we could solve this puzzle?\r\n","link":"https://stackoverflow.com/questions/60398809/neo4j-interactive-graph-freezes","title":"Neo4j Interactive graph freezes"},{"tags":["neo4j"],"answers":[{"tags":[],"owner":{"reputation":9839,"user_id":4187346,"user_type":"registered","profile_image":"https://i.stack.imgur.com/uSe1J.png?s=128&g=1","display_name":"Dave Bennett","link":"https://stackoverflow.com/users/4187346/dave-bennett"},"last_editor":{"reputation":9839,"user_id":4187346,"user_type":"registered","profile_image":"https://i.stack.imgur.com/uSe1J.png?s=128&g=1","display_name":"Dave Bennett","link":"https://stackoverflow.com/users/4187346/dave-bennett"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1582664705,"last_edit_date":1582664705,"creation_date":1582643945,"answer_id":60397885,"question_id":60397693,"share_link":"https://stackoverflow.com/a/60397885","body_markdown":"They are always set to 1 because of the way you are counting.\r\n\r\nWhen you group by `s, e, r` that is always going to result in a single row. But if you `collect(r)` for every `s, e` then you will get a collection of all of the `:NextExp` relationships between those two nodes.\r\n\r\nAlso, [length()][1] is for measuring the length (number of nodes) in a matched path and should not work directly on a relationship.\r\n\r\nMatch the relationship and put them in a collection for each pair of nodes. Iterate over each rel in the collection and set the size of the collection of rels.\r\n\r\n\r\n    MATCH (s:LabeledExperience)-[r:NextExp]-&gt;(e:LabeledExperience) \r\n    WITH s, e, collect(r) AS rels\r\n    UNWIND rels AS rel\r\n    SET rel.weight = size(rels)\r\n\r\n\r\n  [1]: https://neo4j.com/docs/cypher-manual/current/functions/scalar/#functions-length","link":"https://stackoverflow.com/questions/60397693/count-the-number-of-relationships-between-a-pair-of-nodes-and-set-it-as-paramete/60397885#60397885","title":"Count the number of relationships between a pair of nodes and set it as parameter in Neo4J"}],"owner":{"reputation":503,"user_id":4764743,"user_type":"registered","accept_rate":74,"profile_image":"https://i.stack.imgur.com/HzVLJ.jpg?s=128&g=1","display_name":"Spider","link":"https://stackoverflow.com/users/4764743/spider"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":60397885,"answer_count":1,"score":1,"last_activity_date":1582664705,"creation_date":1582643362,"question_id":60397693,"share_link":"https://stackoverflow.com/q/60397693","body_markdown":"I have a graph where a pair of nodes can have several relationships between them. \r\nI would like to count this relationships between each pair of nodes, and set it as a parameter of each relationship. \r\n\r\nI tried something like: \r\n\r\n    MATCH (s:LabeledExperience)-[r:NextExp]-&gt;(e:LabeledExperience) \r\n    with s, e, r, length(r) as cnt\r\n    MATCH (s2:LabeledExperience{name:s.name})-[r2:NextExp{name:r.name}]-&gt;(e2:LabeledExperience{name: e.name})\r\n    SET r2.weight = cnt\r\n\r\nBut this set the weight always to one. \r\nI also tried: \r\n\r\n    MATCH ()-[r:NextExp]-&gt;() \r\n        with r, length(r) as cnt\r\n        MATCH ()-[r2:NextExp{name:r.name}]-&gt;()\r\n        SET r2.weight = cnt\r\n\r\nBut this takes too much time since there are more than 90k relationships and there is no index (since it is not possible to have them on edges). \r\n\r\n","link":"https://stackoverflow.com/questions/60397693/count-the-number-of-relationships-between-a-pair-of-nodes-and-set-it-as-paramete","title":"Count the number of relationships between a pair of nodes and set it as parameter in Neo4J"},{"tags":["graph","neo4j","cypher"],"answers":[{"tags":[],"owner":{"reputation":9839,"user_id":4187346,"user_type":"registered","profile_image":"https://i.stack.imgur.com/uSe1J.png?s=128&g=1","display_name":"Dave Bennett","link":"https://stackoverflow.com/users/4187346/dave-bennett"},"last_editor":{"reputation":9839,"user_id":4187346,"user_type":"registered","profile_image":"https://i.stack.imgur.com/uSe1J.png?s=128&g=1","display_name":"Dave Bennett","link":"https://stackoverflow.com/users/4187346/dave-bennett"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582766243,"last_edit_date":1582766243,"creation_date":1582636444,"answer_id":60395474,"question_id":60394868,"share_link":"https://stackoverflow.com/a/60395474","body_markdown":"You are using the `CASE` incorrectly. You cannot have update clauses inside of a CASE statement. Instead you can use a `WHERE` clause to filter the rows of the file. For instance, adding `WHERE line.key != &#39;NA&#39;` while processing the file befor you move onto the update will work. Something like this should fit the bill.\r\n\r\n    USING PERIODIC COMMIT\r\n    LOAD CSV WITH HEADERS FROM &#39;file:///test.csv&#39; as line\r\n    MATCH (a:test_t {tid: line.pid})\r\n    WITH line\r\n    WHERE line.key &lt;&gt; &#39;NA&#39; \r\n    WITH split(line.key, &quot;,&quot;) as name\r\n    UNWIND name as x\r\n    MERGE (k:test_key {key_term: toLower(x)})\r\n    MERGE (a)-[:contains]-&gt;(k)\r\n\r\nIt looks like,from your logic you could even move the test up above the `MATCH`. So this might be better (fewer unecessary matches).\r\n\r\n    USING PERIODIC COMMIT\r\n    LOAD CSV WITH HEADERS FROM &#39;file:///test.csv&#39; as line\r\n    WITH line\r\n    WHERE line.key &lt;&gt; &#39;NA&#39; \r\n    MATCH (a:test_t {tid: line.pid})\r\n    WITH split(line.key, &quot;,&quot;) as name\r\n    UNWIND name as x\r\n    MERGE (k:test_key {key_term: toLower(x)})\r\n    MERGE (a)-[:contains]-&gt;(k)\r\n","link":"https://stackoverflow.com/questions/60394868/error-in-loading-a-data-to-neo4j-in-case-statement-in-cypher-query/60395474#60395474","title":"Error in loading a data to neo4j in case statement in cypher query"},{"tags":[],"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582756611,"last_edit_date":1582756611,"creation_date":1582748879,"answer_id":60422047,"question_id":60394868,"share_link":"https://stackoverflow.com/a/60422047","body_markdown":"The `CASE` clause does not support embedding other Cypher clauses (but it can invoke functions). In fact, a `CASE` clause is not actually needed for your use case.\r\n\r\nThis query should work (the `:auto` at the beginning is needed in neo4j 4.0+):\r\n\r\n    :auto USING PERIODIC COMMIT\r\n    LOAD CSV WITH HEADERS FROM &#39;file:///test.csv&#39; as line FIELDTERMINATOR &#39;;&#39;\r\n    WITH line\r\n    WHERE line.key &lt;&gt; &#39;NA&#39;\r\n    MATCH (a:test_t {tid: line.pid})\r\n    UNWIND split(line.key, &#39;,&#39;) as x\r\n    MERGE (k:test_key {key_term: TOLOWER(x)})\r\n    MERGE (a)-[:contains]-&gt;(k)\r\n\r\nThis query filters out all unwanted `line`s as soon as they are obtained from the file. Reducing the number of rows of data being worked on as early as possible is good practice.\r\n\r\nAlso, you have a second issue. Your data file cannot use the comma as both the (default) field terminator AND as the delimiter between your `x` values.\r\n\r\nTo resolve this ambiguity, the above query chose to use the `FIELDTERMINATOR &#39;;&#39;` option to specify that the &quot;;&quot; character will be used as the field terminator. A sample data file would look like this:\r\n\r\n    pid;key\r\n    123;NA\r\n    234;Foo,Bar\r\n    345;Bar,Baz\r\n    456;NA\r\n    567;Baz\r\n\r\n","link":"https://stackoverflow.com/questions/60394868/error-in-loading-a-data-to-neo4j-in-case-statement-in-cypher-query/60422047#60422047","title":"Error in loading a data to neo4j in case statement in cypher query"}],"owner":{"reputation":11,"user_id":12960074,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AAuE7mCNhCqd-IMT-0G9NY4SwlHflXaQoqbyj8upuc1N=k-s128","display_name":"Valli Subramanian","link":"https://stackoverflow.com/users/12960074/valli-subramanian"},"last_editor":{"reputation":9839,"user_id":4187346,"user_type":"registered","profile_image":"https://i.stack.imgur.com/uSe1J.png?s=128&g=1","display_name":"Dave Bennett","link":"https://stackoverflow.com/users/4187346/dave-bennett"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1582766243,"creation_date":1582634317,"last_edit_date":1582636681,"question_id":60394868,"share_link":"https://stackoverflow.com/q/60394868","body_markdown":"try to upload `CSV` data with a case statement in the query, but the following error appears:\r\n\r\n**cypher:**\r\n\r\n    USING PERIODIC COMMIT\r\n    LOAD CSV WITH HEADERS FROM &#39;file:///test.csv&#39; as line\r\n    MATCH(a:test_t{tid:line.pid})\r\n    CASE\r\n      WHEN line.key !=&#39;NA&#39; THEN\r\n        WITH split(line.key,&quot;,&quot;) as name\r\n        UNWIND name as x\r\n        MERGE(k:test_key{key_term:toLower(x)})\r\n        MERGE(a)-[:contains]-&gt;(k)\r\n    END\r\n\r\n**Error**\r\n\r\n&gt; Neo.ClientError.Statement.SyntaxError: Invalid input &#39;S&#39;: expected &#39;l/L&#39; (line 5, column 3 (offset: 137))\r\n    &quot;CASE&quot;\r\n\r\n\r\nCan anyone help me?","link":"https://stackoverflow.com/questions/60394868/error-in-loading-a-data-to-neo4j-in-case-statement-in-cypher-query","title":"Error in loading a data to neo4j in case statement in cypher query"},{"tags":["apache-spark","neo4j"],"comments":[{"owner":{"reputation":977,"user_id":917492,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/52187fd2fdf79f483491eded08d16ff6?s=128&d=identicon&r=PG","display_name":"jasie","link":"https://stackoverflow.com/users/917492/jasie"},"edited":false,"score":0,"creation_date":1582618206,"post_id":60388222,"comment_id":106829626,"link":"https://stackoverflow.com/questions/60388222/when-i-use-neo4j-spark-connector-to-read-neo4j-data-i-get-errors#comment106829626_60388222"}],"owner":{"reputation":25,"user_id":12212167,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/af975b8ee2e6f7d0f1778dbcef08dbef?s=128&d=identicon&r=PG&f=1","display_name":"Sin","link":"https://stackoverflow.com/users/12212167/sin"},"comment_count":1,"delete_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":7,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1582609738,"creation_date":1582609738,"question_id":60388222,"share_link":"https://stackoverflow.com/q/60388222","body_markdown":"When I use neo4j-spark-connector to read neo4j data, I get errors.I can guarantee that there is data in my neo4j.\r\n\r\nval query = match (x:User)-[r:RELATION]-&gt;(target:User) return x.id as source_id , r.type as type, r.timestampMs as timestampMs, target.id as target_id\r\n\r\nI can make sure that this query can find the data, but I will get the following error when using spark\r\n\r\n&gt;     User class threw exception: org.apache.spark.sql.AnalysisException: Data used in creating the Delta table doesn&#39;t have any columns.;\r\n&gt;     at org.apache.spark.sql.delta.DeltaErrors$.emptyDataException(DeltaErrors.scala:118)\r\n&gt;     at org.apache.spark.sql.delta.schema.ImplicitMetadataOperation$class.updateMetadata(ImplicitMetadataOperation.scala:78)\r\n&gt;     at org.apache.spark.sql.delta.commands.WriteIntoDelta.updateMetadata(WriteIntoDelta.scala:45)\r\n&gt;     at org.apache.spark.sql.delta.commands.WriteIntoDelta.write(WriteIntoDelta.scala:84)\r\n&gt;     at org.apache.spark.sql.delta.commands.WriteIntoDelta$$anonfun$run$1.apply(WriteIntoDelta.scala:65)\r\n&gt;     at org.apache.spark.sql.delta.commands.WriteIntoDelta$$anonfun$run$1.apply(WriteIntoDelta.scala:64)\r\n&gt;     at org.apache.spark.sql.delta.DeltaLog.withNewTransaction(DeltaLog.scala:388)\r\n&gt;     at org.apache.spark.sql.delta.commands.WriteIntoDelta.run(WriteIntoDelta.scala:64)\r\n&gt;     at org.apache.spark.sql.delta.sources.DeltaDataSource.createRelation(DeltaDataSource.scala:131)\r\n&gt;     at org.apache.spark.sql.execution.datasources.SaveIntoDataSourceCommand.run(SaveIntoDataSourceCommand.scala:45)\r\n&gt;     at org.apache.spark.sql.execution.command.ExecutedCommandExec.sideEffectResult$lzycompute(commands.scala:70)\r\n&gt;     at org.apache.spark.sql.execution.command.ExecutedCommandExec.sideEffectResult(commands.scala:68)\r\n&gt;     at org.apache.spark.sql.execution.command.ExecutedCommandExec.doExecute(commands.scala:86)\r\n&gt;     at org.apache.spark.sql.execution.SparkPlan$$anonfun$execute$1.apply(SparkPlan.scala:131)\r\n&gt;     at org.apache.spark.sql.execution.SparkPlan$$anonfun$execute$1.apply(SparkPlan.scala:127)\r\n&gt;     at org.apache.spark.sql.execution.SparkPlan$$anonfun$executeQuery$1.apply(SparkPlan.scala:156)\r\n&gt;     at org.apache.spark.rdd.RDDOperationScope$.withScope(RDDOperationScope.scala:151)\r\n&gt;     at org.apache.spark.sql.execution.SparkPlan.executeQuery(SparkPlan.scala:152)\r\n&gt;     at org.apache.spark.sql.execution.SparkPlan.execute(SparkPlan.scala:127)\r\n&gt;     at org.apache.spark.sql.execution.QueryExecution.toRdd$lzycompute(QueryExecution.scala:80)\r\n&gt;     at org.apache.spark.sql.execution.QueryExecution.toRdd(QueryExecution.scala:80)\r\n\r\nneo4j-contrib:neo4j-spark-connector:2.2.1-M5\r\n","link":"https://stackoverflow.com/questions/60388222/when-i-use-neo4j-spark-connector-to-read-neo4j-data-i-get-errors","title":"When I use neo4j-spark-connector to read neo4j data, I get errors"},{"tags":["java","neo4j","neo4j-driver"],"owner":{"reputation":2783,"user_id":1819402,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/ae4d12b8ca04eaa450e7065f90c1d0d5?s=128&d=identicon&r=PG","display_name":"MAGx2","link":"https://stackoverflow.com/users/1819402/magx2"},"last_editor":{"reputation":5630,"user_id":2266,"user_type":"registered","accept_rate":90,"profile_image":"https://www.gravatar.com/avatar/aa64f5e61bb8cbcc9d10372256580364?s=128&d=identicon&r=PG","display_name":"Chris Skardon","link":"https://stackoverflow.com/users/2266/chris-skardon"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1582634455,"creation_date":1582580832,"last_edit_date":1582634455,"question_id":60384385,"share_link":"https://stackoverflow.com/q/60384385","body_markdown":"I&#39;m running my application and Neo4j 4 in Docker compose environment. After starting my application I&#39;m getting some weird logs that connection pool is closing connection to DB (`Closing connection pool towards graphdb(172.21.0.4):7687`) and after this `neo4jClient` is unable to query DB (logs below). What is the reason of this behaviour?\r\n\r\nBTW. I created Spring Health Check (`driver.verifyConnectivity()`), but it always return `OK` (no error is thrown).\r\n\r\nAny ideas?\r\n```kotlin\r\n\r\n@Configuration\r\nclass Neo4jConfiguration {\r\n    private val logger = LoggerFactory.getLogger(Neo4jConfiguration::class.java)\r\n\r\n    @Bean\r\n    fun neo4jDriver(\r\n            @Value(&quot;\\${spring.data.neo4j.host}&quot;) host: String?,\r\n            @Value(&quot;\\${spring.data.neo4j.port}&quot;) port: Int?): Driver {\r\n        val connectionUrl = &quot;neo4j://$host:$port&quot;\r\n        logger.info(&quot;Connecting to Neo4j on `$connectionUrl`&quot;)\r\n        return GraphDatabase.driver(connectionUrl/*, AuthTokens.basic(&quot;neo4j&quot;, &quot;secret&quot;)*/) \r\n    }\r\n\r\n    @Bean\r\n    fun neo4jClient(): ReactiveNeo4jClient = ReactiveNeo4jClient.create(neo4jDriver(null, null))\r\n\r\n    @Bean\r\n    fun neo4jTransactionManager() = ReactiveNeo4jTransactionManager(neo4jDriver(null, null))\r\n}\r\n```\r\nDocker compose:\r\n```\r\nversion: &#39;3.7&#39;\r\nservices:\r\n  graphdb:\r\n    image: neo4j:4.0.0\r\n    ports:\r\n      - 7474:7474\r\n      - 7687:7687\r\n    environment:\r\n      NEO4J_AUTH: none\r\n      NEO4J_dbms_connectors_default__listen__address: 0.0.0.0\r\n    volumes:\r\n      - ./docker/neo4j/data:/data\r\n    networks:\r\n      - things\r\nnetworks:\r\n  things:\r\n    name: things\r\n```\r\nFull logs:\r\n```\r\n2020-02-24 20:57:32.922  INFO 1 --- [  restartedMain] c.t.r.repo.neo4j.Neo4jConfiguration      : Connecting to Neo4j on `neo4j://graphdb:7687`\r\n2020-02-24 20:57:33.321  INFO 1 --- [  restartedMain] Driver                                   : Routing driver instance 656417291 created for server address graphdb:7687\r\n2020-02-24 20:57:43.329  INFO 1 --- [o4jDriverIO-2-3] LoadBalancer                             : Routing table for database &#39;system&#39; is stale. Ttl 1582577863326, currentTime 1582577863328, routers AddressSet=[], writers AddressSet=[], readers AddressSet=[], database &#39;system&#39;\r\n2020-02-24 20:57:43.437  INFO 1 --- [o4jDriverIO-2-2] ConnectionPool                           : Closing connection pool towards graphdb(172.21.0.4):7687, it has no active connections and is not in the routing table registry.\r\n2020-02-24 20:57:43.440  INFO 1 --- [o4jDriverIO-2-2] LoadBalancer                             : Updated routing table for database &#39;system&#39;. Ttl 1582578163422, currentTime 1582577863439, routers AddressSet=[0.0.0.0:7687], writers AddressSet=[0.0.0.0:7687], readers AddressSet=[0.0.0.0:7687], database &#39;system&#39;\r\n2020-02-24 20:58:02.694  INFO 1 --- [ault-executor-1] LoadBalancer                             : Routing table for database &#39;&lt;default database&gt;&#39; is stale. Ttl 1582577882693, currentTime 1582577882694, routers AddressSet=[], writers AddressSet=[], readers AddressSet=[], database &#39;&lt;default database&gt;&#39;\r\n2020-02-24 20:58:02.777  INFO 1 --- [o4jDriverIO-2-2] ConnectionPool                           : Closing connection pool towards graphdb(172.21.0.4):7687, it has no active connections and is not in the routing table registry.\r\n2020-02-24 20:58:02.777  INFO 1 --- [o4jDriverIO-2-2] LoadBalancer                             : Updated routing table for database &#39;&lt;default database&gt;&#39;. Ttl 1582578182776, currentTime 1582577882777, routers AddressSet=[0.0.0.0:7687], writers AddressSet=[0.0.0.0:7687], readers AddressSet=[0.0.0.0:7687], database &#39;&lt;default database&gt;&#39;\r\n2020-02-24 20:58:02.803  WARN 1 --- [o4jDriverIO-2-2] LoadBalancer                             : Failed to obtain a connection towards address 0.0.0.0:7687\r\n\r\norg.neo4j.driver.exceptions.SessionExpiredException: Server at 0.0.0.0:7687 is no longer available\r\n\tat org.neo4j.driver.internal.cluster.loadbalancing.LoadBalancer.lambda$acquire$9(LoadBalancer.java:204) ~[neo4j-java-driver-4.0.0.jar:4.0.0-d03d93ede8ad65657eeb90ed890757203ecfaa7a]\r\n\tat java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(Unknown Source) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(Unknown Source) ~[na:na]\r\n  [... removed ...]\r\nCaused by: org.neo4j.driver.exceptions.ServiceUnavailableException: Unable to connect to 0.0.0.0:7687, ensure the database is running and that there is a working network connection to it.\r\n\tat org.neo4j.driver.internal.async.connection.ChannelConnectedListener.databaseUnavailableError(ChannelConnectedListener.java:76) ~[neo4j-java-driver-4.0.0.jar:4.0.0-d03d93ede8ad65657eeb90ed890757203ecfaa7a]\r\n\tat org.neo4j.driver.internal.async.connection.ChannelConnectedListener.operationComplete(ChannelConnectedListener.java:70) ~[neo4j-java-driver-4.0.0.jar:4.0.0-d03d93ede8ad65657eeb90ed890757203ecfaa7a]\r\n\tat org.neo4j.driver.internal.async.connection.ChannelConnectedListener.operationComplete(ChannelConnectedListener.java:37) ~[neo4j-java-driver-4.0.0.jar:4.0.0-d03d93ede8ad65657eeb90ed890757203ecfaa7a]\r\n  [... removed ...]\r\n\t... 7 common frames omitted\r\nCaused by: org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: /0.0.0.0:7687\r\nCaused by: java.net.ConnectException: Connection refused\r\n\tat java.base/sun.nio.ch.SocketChannelImpl.checkConnect(Native Method) ~[na:na]\r\n\tat java.base/sun.nio.ch.SocketChannelImpl.finishConnect(Unknown Source) ~[na:na]\r\n\t[... removed ...]\r\n```","link":"https://stackoverflow.com/questions/60384385/neo4j-connection-pool-is-closing-after-application-starts","title":"Neo4J connection pool is closing after application starts"},{"tags":["python","pandas","neo4j","cypher","neo4j-driver"],"comments":[{"owner":{"reputation":3306,"user_id":7835267,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1","display_name":"G. Anderson","link":"https://stackoverflow.com/users/7835267/g-anderson"},"edited":false,"score":1,"creation_date":1582580194,"post_id":60384097,"comment_id":106819433,"link":"https://stackoverflow.com/questions/60384097/python-loading-script-for-neo4j-returns-valueerror#comment106819433_60384097"},{"owner":{"reputation":1,"user_id":12956233,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AAuE7mCMCwP_ijd6OjfIPo8y3cW_J2DvcCw3lTg9GwG1_Q=k-s128","display_name":"pborah88","link":"https://stackoverflow.com/users/12956233/pborah88"},"reply_to_user":{"reputation":3306,"user_id":7835267,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1","display_name":"G. Anderson","link":"https://stackoverflow.com/users/7835267/g-anderson"},"edited":false,"score":0,"creation_date":1582643484,"post_id":60384097,"comment_id":106843471,"link":"https://stackoverflow.com/questions/60384097/python-loading-script-for-neo4j-returns-valueerror#comment106843471_60384097"},{"owner":{"reputation":1,"user_id":12956233,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AAuE7mCMCwP_ijd6OjfIPo8y3cW_J2DvcCw3lTg9GwG1_Q=k-s128","display_name":"pborah88","link":"https://stackoverflow.com/users/12956233/pborah88"},"reply_to_user":{"reputation":3306,"user_id":7835267,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1","display_name":"G. Anderson","link":"https://stackoverflow.com/users/7835267/g-anderson"},"edited":false,"score":1,"creation_date":1582644041,"post_id":60384097,"comment_id":106843809,"link":"https://stackoverflow.com/questions/60384097/python-loading-script-for-neo4j-returns-valueerror#comment106843809_60384097"}],"answers":[{"tags":[],"owner":{"reputation":1,"user_id":12956233,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AAuE7mCMCwP_ijd6OjfIPo8y3cW_J2DvcCw3lTg9GwG1_Q=k-s128","display_name":"pborah88","link":"https://stackoverflow.com/users/12956233/pborah88"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582734090,"creation_date":1582734090,"answer_id":60418269,"question_id":60384097,"share_link":"https://stackoverflow.com/a/60418269","body_markdown":"    #Connect to the neo4j database server\r\n    graphDB_Driver  = GraphDatabase.driver(uri, auth=(userName, password))\r\n    \r\n    #CREATE NODES (:Program{Parent_Procedure}) set property &#39;type&#39; = Parent_Object_Type \r\n    \r\n    with graphDB_Driver.session() as graphDB_Session:\r\n        for index, row in df.iterrows():\r\n            cq1 = &#39;merge (p:Program{programName:&quot;&#39;+row[&quot;Parent_Procedure&quot;]+&#39;&quot;}) set p.type = &quot;&#39;+row[&quot;Parent_Object_Type&quot;]+&#39;&quot;&#39;\r\n    #Execute the Cypher query\r\n            res1 = graphDB_Session.run(cq1)\r\n            print(res1)\r\n    #CREATE NODES (:Program{Called_Procedure}) set property &#39;type&#39; = Called_Object_Type \r\n        for index, row in df.iterrows():\r\n            cq2 = &#39;merge (p:Program{programName:&quot;&#39;+row[&quot;Called_Procedure&quot;]+&#39;&quot;}) set p.type = &quot;&#39;+row[&quot;Called_Object_Type&quot;]+&#39;&quot;&#39;\r\n    #Execute the Cypher query\r\n            res2 = graphDB_Session.run(cq2)\r\n            print(res2)\r\n            \r\n    #Create relationship - (Parent_Procedure)-[:CALLS_TO]-&gt;(Called_Procedure)\r\n        for index, row in df.iterrows():\r\n            cq3 = &#39;match (p1:Program{programName:&quot;&#39;+row[&quot;Parent_Procedure&quot;]+&#39;&quot;}) match (p2:Program{programName:&quot;&#39;+row[&quot;Called_Procedure&quot;]+&#39;&quot;}) merge (p1)-[:CALLS_TO]-&gt;(p2)&#39;\r\n    #Execute the Cypher query\r\n            res3 = graphDB_Session.run(cq3)\r\n            print(res3)        \r\n            \r\n    graphDB_Driver.close()","link":"https://stackoverflow.com/questions/60384097/python-loading-script-for-neo4j-returns-valueerror/60418269#60418269","title":"Python loading script for neo4j returns ValueError"}],"owner":{"reputation":1,"user_id":12956233,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AAuE7mCMCwP_ijd6OjfIPo8y3cW_J2DvcCw3lTg9GwG1_Q=k-s128","display_name":"pborah88","link":"https://stackoverflow.com/users/12956233/pborah88"},"last_editor":{"reputation":1,"user_id":12956233,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AAuE7mCMCwP_ijd6OjfIPo8y3cW_J2DvcCw3lTg9GwG1_Q=k-s128","display_name":"pborah88","link":"https://stackoverflow.com/users/12956233/pborah88"},"comment_count":3,"delete_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1582734090,"creation_date":1582579398,"last_edit_date":1582579918,"question_id":60384097,"share_link":"https://stackoverflow.com/q/60384097","body_markdown":"I&#39;m relatively new-ish to programming in general (business analytics student turned data analyst) and I&#39;m testing a python script to iterate over csv rows and construct a cypher query for each row to load into neo4j -\r\n\r\n    import pandas as pd\r\n    from neo4j import GraphDatabase\r\n    \r\n    pd.set_option(&#39;display.max_colwidth&#39;, -1)\r\n    \r\n    # neo4j credentials\r\n    uri= &quot;bolt://localhost:7687&quot;\r\n    userName= &quot;neo4j&quot;\r\n    password= &quot;password&quot;\r\n    \r\n    \r\n    df = pd.read_csv(&#39;C://Users/ABC/Documents/Test/Test/lineage_stored_procedure_dedup.csv&#39;, \r\n                     sep=&#39;,&#39;, index_col=None, header=0,usecols=[0,1,2,3,4,5])\r\n    \r\n    df.columns.str.replace(&#39; &#39;, &#39;&#39;)\r\n    \r\n    graphDB_Driver  = GraphDatabase.driver(uri, auth=(userName, password))\r\n    \r\n    with graphDB_Driver.session() as graphDB_Session:\r\n        for row in df.iterrows():\r\n            cq = &#39;merge (p:Program{programName:&quot;&#39;+df[&#39;Parent_Procedure&#39;]+&#39;&quot;}) set p.type = &quot;&#39;+df[&#39;Parent_Object_Type&#39;]+&#39;&quot;&#39;\r\n            res = graphDB_Session.run(cq)\r\n    \r\n    graphDB_Driver.close()\r\n\r\nI get the following error - \r\n\r\n    Traceback (most recent call last):\r\n    \r\n      File &quot;&lt;ipython-input-91-01ba397763e3&gt;&quot;, line 1, in &lt;module&gt;\r\n        runfile(&#39;C:/Users/ABC/Documents/Test/Test/StoredProcLoadScript.py&#39;, wdir=&#39;C:/Users/ABC/Documents/Test/Test&#39;)\r\n    \r\n      File &quot;C:\\Users\\ABC\\Anaconda3\\lib\\site-packages\\spyder_kernels\\customize\\spydercustomize.py&quot;, line 827, in runfile\r\n        execfile(filename, namespace)\r\n    \r\n      File &quot;C:\\Users\\ABC\\Anaconda3\\lib\\site-packages\\spyder_kernels\\customize\\spydercustomize.py&quot;, line 110, in execfile\r\n        exec(compile(f.read(), filename, &#39;exec&#39;), namespace)\r\n    \r\n      File &quot;C:/Users/ABC/Documents/Test/Test/StoredProcLoadScript.py&quot;, line 35, in &lt;module&gt;\r\n        res = graphDB_Session.run(cq)\r\n    \r\n      File &quot;C:\\Users\\ABC\\Anaconda3\\lib\\site-packages\\neo4j\\__init__.py&quot;, line 429, in run\r\n        if not statement:\r\n    \r\n      File &quot;C:\\Users\\ABC\\Anaconda3\\lib\\site-packages\\pandas\\core\\generic.py&quot;, line 1555, in __nonzero__\r\n        self.__class__.__name__\r\n    \r\n    ValueError: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().\r\n\r\nI understand that the error means I did not use the correct bitwise operators as per pandas documentation. But I don&#39;t understand where did I even need to use it in the code to begin with? Appreciate any and all help. Thank you.","link":"https://stackoverflow.com/questions/60384097/python-loading-script-for-neo4j-returns-valueerror","title":"Python loading script for neo4j returns ValueError"},{"tags":["c#","neo4j","neo4jclient"],"answers":[{"comments":[{"owner":{"reputation":177,"user_id":3091744,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/277365aa6e544c174a5e771c3f754b1b?s=128&d=identicon&r=PG&f=1","display_name":"CodeCase","link":"https://stackoverflow.com/users/3091744/codecase"},"edited":false,"score":0,"creation_date":1582639972,"post_id":60383996,"comment_id":106841291,"link":"https://stackoverflow.com/questions/60380207/try-to-save-to-neo4j-db-with-new-neo4jclient-in-core-app/60383996#comment106841291_60383996"},{"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":177,"user_id":3091744,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/277365aa6e544c174a5e771c3f754b1b?s=128&d=identicon&r=PG&f=1","display_name":"CodeCase","link":"https://stackoverflow.com/users/3091744/codecase"},"edited":false,"score":0,"creation_date":1582658594,"post_id":60383996,"comment_id":106851315,"link":"https://stackoverflow.com/questions/60380207/try-to-save-to-neo4j-db-with-new-neo4jclient-in-core-app/60383996#comment106851315_60383996"}],"tags":[],"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1582658534,"last_edit_date":1582658534,"creation_date":1582578823,"answer_id":60383996,"question_id":60380207,"share_link":"https://stackoverflow.com/a/60383996","body_markdown":"You are executing your query with the `ExecuteWithoutResultsAsync` method, which does not return results (and your code does not attempt to handle a result from the method anyway).\r\n\r\nTo get results, your generated Cypher must `RETURN` a result, and you need to use the `Results` method to get the results of the query. In addition, your code should actually use the result in some way.\r\n\r\nRefer to the [documentation](https://github.com/Readify/Neo4jClient/wiki/cypher#returns) for more details.","link":"https://stackoverflow.com/questions/60380207/try-to-save-to-neo4j-db-with-new-neo4jclient-in-core-app/60383996#60383996","title":"Try to save to neo4j DB with new Neo4jClient in Core App"}],"owner":{"reputation":177,"user_id":3091744,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/277365aa6e544c174a5e771c3f754b1b?s=128&d=identicon&r=PG&f=1","display_name":"CodeCase","link":"https://stackoverflow.com/users/3091744/codecase"},"last_editor":{"reputation":177,"user_id":3091744,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/277365aa6e544c174a5e771c3f754b1b?s=128&d=identicon&r=PG&f=1","display_name":"CodeCase","link":"https://stackoverflow.com/users/3091744/codecase"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60383996,"answer_count":1,"score":0,"last_activity_date":1582658534,"creation_date":1582561944,"last_edit_date":1582647368,"question_id":60380207,"share_link":"https://stackoverflow.com/q/60380207","body_markdown":"Im using the new neo4j Client from https://www.nuget.org/packages/Neo4jClient/4.0.0.1-prerelease, now I would like to use parameters like from https://github.com/Readify/Neo4jClient/wiki/cypher-examples\r\n\r\nin my C# App and try to save a new node Person with:\r\n\r\n                \r\n        private async Task CreatePerson(IGraphClient client, params Person[] persons)\r\n        {\r\n                client.Cypher\r\n                .Unwind(persons, &quot;person&quot;)\r\n                .Merge(&quot;(p:Person { Id: person.Id })&quot;)\r\n                .OnCreate()\r\n                .Set(&quot;p = person&quot;)\r\n                .Return(person =&gt; person.As&lt;Person&gt;());\r\n        }\r\n\r\nI can run the Query but I didnt receive any Data and Im not getting any Error, what Im missing here?\r\n\r\nThank you and best regards\r\n\r\n**UPDATE:** Added Return Statement\r\n\r\n\r\n  [1]: https://www.nuget.org/packages/Neo4jClient/4.0.0.1-prerelease","link":"https://stackoverflow.com/questions/60380207/try-to-save-to-neo4j-db-with-new-neo4jclient-in-core-app","title":"Try to save to neo4j DB with new Neo4jClient in Core App"},{"tags":["spring","neo4j","cypher","neo4j-ogm"],"answers":[{"comments":[{"owner":{"reputation":253,"user_id":3991291,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/4a93df6c9ca1acb740727f294ba48add?s=128&d=identicon&r=PG&f=1","display_name":"Emptyfruit","link":"https://stackoverflow.com/users/3991291/emptyfruit"},"edited":false,"score":0,"creation_date":1582706674,"post_id":60402192,"comment_id":106865700,"link":"https://stackoverflow.com/questions/60377556/neo4j-spring-ogm-query-for-list-of-entities-always-return-distinct/60402192#comment106865700_60402192"},{"owner":{"reputation":5157,"user_id":2650436,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/34ecacd077244d141a23c46ea094df5c?s=128&d=identicon&r=PG","display_name":"meistermeier","link":"https://stackoverflow.com/users/2650436/meistermeier"},"reply_to_user":{"reputation":253,"user_id":3991291,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/4a93df6c9ca1acb740727f294ba48add?s=128&d=identicon&r=PG&f=1","display_name":"Emptyfruit","link":"https://stackoverflow.com/users/3991291/emptyfruit"},"edited":false,"score":0,"creation_date":1582712870,"post_id":60402192,"comment_id":106869130,"link":"https://stackoverflow.com/questions/60377556/neo4j-spring-ogm-query-for-list-of-entities-always-return-distinct/60402192#comment106869130_60402192"}],"tags":[],"owner":{"reputation":5157,"user_id":2650436,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/34ecacd077244d141a23c46ea094df5c?s=128&d=identicon&r=PG","display_name":"meistermeier","link":"https://stackoverflow.com/users/2650436/meistermeier"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582660390,"creation_date":1582660390,"answer_id":60402192,"question_id":60377556,"share_link":"https://stackoverflow.com/a/60402192","body_markdown":"In general this behaviour is correct:\r\nThe `A` is always the same and gets mapped as one object. It won&#39;t make any sense to create the very same object twice.\r\n\r\nI don&#39;t know from your question what the query should map to. But assuming it should create `List&lt;A&gt;` for this query it is correct.\r\nReturning the `a.username` will not map to any entity but can only get collected in a projection / `@QueryResult`. This result has no concept of equality or similar and will always get created for any returned &quot;row&quot; from the response.","link":"https://stackoverflow.com/questions/60377556/neo4j-spring-ogm-query-for-list-of-entities-always-return-distinct/60402192#60402192","title":"Neo4j Spring OGM query for list of entities always return distinct"}],"owner":{"reputation":253,"user_id":3991291,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/4a93df6c9ca1acb740727f294ba48add?s=128&d=identicon&r=PG&f=1","display_name":"Emptyfruit","link":"https://stackoverflow.com/users/3991291/emptyfruit"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1582660390,"creation_date":1582553020,"question_id":60377556,"share_link":"https://stackoverflow.com/q/60377556","body_markdown":"Lets say i have a graph:\r\n\r\n```\r\nA - follows -&gt; B\r\nA - follows -&gt; C\r\n```\r\n\r\nNow, i have a query to get followers for both `B` and `C` (which should return me `A` 2 times). \r\n\r\n```\r\nMATCH (a)&lt;-[:FOLLOWS]-(followers) \r\nWHERE a.username IN [&#39;B&#39;,&#39;C&#39;]\r\nRETURN followers\r\n```\r\n\r\nIf i make this query through Neo4J browser, i get **2** records: `A` node 2 times. This is correct.\r\n\r\nIf i make the same query through Spring Repository i get a list with only **1** object (A).\r\n\r\nSo, through Spring&#39;s repository any query for entities performs as if i add `DISTINCT`, so there is no difference between regular query and `DISTINCT` one.\r\n\r\nIf i query for some property of a node, i.e. `A.username`, i get a list with two duplicate strings (as intended).\r\n\r\n 1. Is this behaviour expected? \r\n 2. Why ?\r\n 3. Is there a way to query fo full entities with duplicates, the same\r\n    way that Cypher query works in Neo4J itself?\r\n\r\n","link":"https://stackoverflow.com/questions/60377556/neo4j-spring-ogm-query-for-list-of-entities-always-return-distinct","title":"Neo4j Spring OGM query for list of entities always return distinct"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1582750949,"post_id":60375887,"comment_id":106889371,"link":"https://stackoverflow.com/questions/60375887/extract-all-reviews-for-movie-if-the-movie-has-atleast-one-rating-as-1#comment106889371_60375887"}],"answers":[{"comments":[{"owner":{"reputation":103,"user_id":11212964,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7630d8ca3e3a7e1cc342b65a6b113c51?s=128&d=identicon&r=PG&f=1","display_name":"uprav","link":"https://stackoverflow.com/users/11212964/uprav"},"edited":false,"score":0,"creation_date":1582561857,"post_id":60376921,"comment_id":106811320,"link":"https://stackoverflow.com/questions/60375887/extract-all-reviews-for-movie-if-the-movie-has-atleast-one-rating-as-1/60376921#comment106811320_60376921"}],"tags":[],"owner":{"reputation":12856,"user_id":3196723,"user_type":"registered","accept_rate":70,"profile_image":"https://graph.facebook.com/100000703107215/picture?type=large","display_name":"Govind Singh","link":"https://stackoverflow.com/users/3196723/govind-singh"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582550765,"creation_date":1582550765,"answer_id":60376921,"question_id":60375887,"share_link":"https://stackoverflow.com/a/60376921","body_markdown":"Simple:\r\n\r\n    MATCH(m:movie)-[r:HAS_REVIEWS]-&gt;(r:review)\r\n    where r.rating&gt;0\r\n    RETURN DISTINCT m,r;\r\n\r\n\r\ni will suggest first go through the neo4j cypher queries\r\n\r\nhttps://neo4j.com/developer/cypher-query-language/","link":"https://stackoverflow.com/questions/60375887/extract-all-reviews-for-movie-if-the-movie-has-atleast-one-rating-as-1/60376921#60376921","title":"Extract all reviews for movie if the movie has atleast one rating as &#39;1&#39;"},{"comments":[{"owner":{"reputation":103,"user_id":11212964,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7630d8ca3e3a7e1cc342b65a6b113c51?s=128&d=identicon&r=PG&f=1","display_name":"uprav","link":"https://stackoverflow.com/users/11212964/uprav"},"edited":false,"score":0,"creation_date":1582562285,"post_id":60377386,"comment_id":106811553,"link":"https://stackoverflow.com/questions/60375887/extract-all-reviews-for-movie-if-the-movie-has-atleast-one-rating-as-1/60377386#comment106811553_60377386"},{"owner":{"reputation":6519,"user_id":2286415,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tbRoS.png?s=128&g=1","display_name":"logisima","link":"https://stackoverflow.com/users/2286415/logisima"},"reply_to_user":{"reputation":103,"user_id":11212964,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7630d8ca3e3a7e1cc342b65a6b113c51?s=128&d=identicon&r=PG&f=1","display_name":"uprav","link":"https://stackoverflow.com/users/11212964/uprav"},"edited":false,"score":0,"creation_date":1582562342,"post_id":60377386,"comment_id":106811584,"link":"https://stackoverflow.com/questions/60375887/extract-all-reviews-for-movie-if-the-movie-has-atleast-one-rating-as-1/60377386#comment106811584_60377386"},{"owner":{"reputation":103,"user_id":11212964,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7630d8ca3e3a7e1cc342b65a6b113c51?s=128&d=identicon&r=PG&f=1","display_name":"uprav","link":"https://stackoverflow.com/users/11212964/uprav"},"edited":false,"score":0,"creation_date":1582564868,"post_id":60377386,"comment_id":106812846,"link":"https://stackoverflow.com/questions/60375887/extract-all-reviews-for-movie-if-the-movie-has-atleast-one-rating-as-1/60377386#comment106812846_60377386"},{"owner":{"reputation":6519,"user_id":2286415,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tbRoS.png?s=128&g=1","display_name":"logisima","link":"https://stackoverflow.com/users/2286415/logisima"},"reply_to_user":{"reputation":103,"user_id":11212964,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7630d8ca3e3a7e1cc342b65a6b113c51?s=128&d=identicon&r=PG&f=1","display_name":"uprav","link":"https://stackoverflow.com/users/11212964/uprav"},"edited":false,"score":0,"creation_date":1582761897,"post_id":60377386,"comment_id":106892956,"link":"https://stackoverflow.com/questions/60375887/extract-all-reviews-for-movie-if-the-movie-has-atleast-one-rating-as-1/60377386#comment106892956_60377386"}],"tags":[],"owner":{"reputation":6519,"user_id":2286415,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tbRoS.png?s=128&g=1","display_name":"logisima","link":"https://stackoverflow.com/users/2286415/logisima"},"last_editor":{"reputation":6519,"user_id":2286415,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tbRoS.png?s=128&g=1","display_name":"logisima","link":"https://stackoverflow.com/users/2286415/logisima"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582627824,"last_edit_date":1582627824,"creation_date":1582552451,"answer_id":60377386,"question_id":60375887,"share_link":"https://stackoverflow.com/a/60377386","body_markdown":"@Govind respond can be what is you&#39;re looking for, if you only want the review with a `rating &gt; 1`.\r\n\r\nBut if you want : \r\n\r\n * searching a movie that has a `rating = 1`\r\n * then returns all the review of this movie\r\n\r\nThis is the query :\r\n\r\n    MATCH (m) WHERE exists((m)-[:HAS_REVIEW {rating:1}]-&gt;(:Review))\r\n    WITH m \r\n    MATCH (m)-[r:HAS_REVIEW]-&gt;(review:Review)\r\n    RETURN m, r, review\r\n\r\nFYI, in the pattern in your question, you have defined twice the varaiable `r` (one as the relationship, and the other as the node Review)\r\n\r\n\r\n----------\r\n\r\nUpdate\r\n\r\n    MATCH (m)-[:HAS_REVIEW]-&gt;(r:Review)\r\n    WHERE r.rating = 1 AND r.date &gt; XXX\r\n    WITH m \r\n      MATCH (m)-[r:HAS_REVIEW]-&gt;(r:Review)\r\n      RETURN m AS movie, size((m)-[:HAS_REVIEW]-&gt;(:Review)) AS nbReview, r AS review\r\n","link":"https://stackoverflow.com/questions/60375887/extract-all-reviews-for-movie-if-the-movie-has-atleast-one-rating-as-1/60377386#60377386","title":"Extract all reviews for movie if the movie has atleast one rating as &#39;1&#39;"}],"owner":{"reputation":103,"user_id":11212964,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7630d8ca3e3a7e1cc342b65a6b113c51?s=128&d=identicon&r=PG&f=1","display_name":"uprav","link":"https://stackoverflow.com/users/11212964/uprav"},"last_editor":{"reputation":12856,"user_id":3196723,"user_type":"registered","accept_rate":70,"profile_image":"https://graph.facebook.com/100000703107215/picture?type=large","display_name":"Govind Singh","link":"https://stackoverflow.com/users/3196723/govind-singh"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1582627824,"creation_date":1582546916,"last_edit_date":1582550249,"question_id":60375887,"share_link":"https://stackoverflow.com/q/60375887","body_markdown":"I am new to NEO4J and trying to extract all the movies and the rating for movies if the movie has atleast 1 review with rating&#39;1&#39;. \r\n\r\n    (m:movie)-[r:HAS_REVIEWS]-&gt;(r:review)\r\n\r\n in the relationship WHERE r.rating is the rating field\r\n\r\nAny pointers on how I can extract the data?\r\n","link":"https://stackoverflow.com/questions/60375887/extract-all-reviews-for-movie-if-the-movie-has-atleast-one-rating-as-1","title":"Extract all reviews for movie if the movie has atleast one rating as &#39;1&#39;"},{"tags":["neo4j"],"comments":[{"owner":{"reputation":12856,"user_id":3196723,"user_type":"registered","accept_rate":70,"profile_image":"https://graph.facebook.com/100000703107215/picture?type=large","display_name":"Govind Singh","link":"https://stackoverflow.com/users/3196723/govind-singh"},"edited":false,"score":0,"creation_date":1582550873,"post_id":60372496,"comment_id":106805016,"link":"https://stackoverflow.com/questions/60372496/reload-movie-recommendation-dataset-in-neo4j#comment106805016_60372496"},{"owner":{"reputation":688,"user_id":1311378,"user_type":"registered","accept_rate":78,"profile_image":"https://www.gravatar.com/avatar/ca90e200bac0e707d7910e1a0fa585ff?s=128&d=identicon&r=PG","display_name":"Sarvavyapi","link":"https://stackoverflow.com/users/1311378/sarvavyapi"},"reply_to_user":{"reputation":12856,"user_id":3196723,"user_type":"registered","accept_rate":70,"profile_image":"https://graph.facebook.com/100000703107215/picture?type=large","display_name":"Govind Singh","link":"https://stackoverflow.com/users/3196723/govind-singh"},"edited":false,"score":0,"creation_date":1582624903,"post_id":60372496,"comment_id":106832973,"link":"https://stackoverflow.com/questions/60372496/reload-movie-recommendation-dataset-in-neo4j#comment106832973_60372496"}],"answers":[{"comments":[{"owner":{"reputation":688,"user_id":1311378,"user_type":"registered","accept_rate":78,"profile_image":"https://www.gravatar.com/avatar/ca90e200bac0e707d7910e1a0fa585ff?s=128&d=identicon&r=PG","display_name":"Sarvavyapi","link":"https://stackoverflow.com/users/1311378/sarvavyapi"},"edited":false,"score":0,"creation_date":1582624887,"post_id":60380850,"comment_id":106832964,"link":"https://stackoverflow.com/questions/60372496/reload-movie-recommendation-dataset-in-neo4j/60380850#comment106832964_60380850"}],"tags":[],"owner":{"reputation":171,"user_id":12205676,"user_type":"registered","profile_image":"https://i.stack.imgur.com/nePIV.jpg?s=128&g=1","display_name":"Nathan Smith","link":"https://stackoverflow.com/users/12205676/nathan-smith"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582564358,"creation_date":1582564358,"answer_id":60380850,"question_id":60372496,"share_link":"https://stackoverflow.com/a/60380850","body_markdown":"```\r\n:play movie-graph\r\n```\r\n\r\nThis link has information about several sample data sets you can work with, including movies, Northwind store, and Game of Thrones. \r\n\r\nhttps://neo4j.com/developer/example-data/\r\n\r\n","link":"https://stackoverflow.com/questions/60372496/reload-movie-recommendation-dataset-in-neo4j/60380850#60380850","title":"Reload movie recommendation dataset in Neo4j"}],"owner":{"reputation":688,"user_id":1311378,"user_type":"registered","accept_rate":78,"profile_image":"https://www.gravatar.com/avatar/ca90e200bac0e707d7910e1a0fa585ff?s=128&d=identicon&r=PG","display_name":"Sarvavyapi","link":"https://stackoverflow.com/users/1311378/sarvavyapi"},"last_editor":{"reputation":17030,"user_id":1233251,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/zklTv.png?s=128&g=1","display_name":"E_net4 the unsafe","link":"https://stackoverflow.com/users/1233251/e-net4-the-unsafe"},"comment_count":2,"delete_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1582626976,"creation_date":1582535107,"last_edit_date":1582626976,"question_id":60372496,"share_link":"https://stackoverflow.com/q/60372496","body_markdown":"I am new to Neo4j and was playing around with the movie recommendation graph in the sandbox when I accidentally deleted all the entries. I tried creating a new project, but the movie dataset is missing from the list. Can someone please tell me how to restore it? I searched for this in the Neo4j community, but could not find anything to help me out.\r\n","link":"https://stackoverflow.com/questions/60372496/reload-movie-recommendation-dataset-in-neo4j","title":"Reload movie recommendation dataset in Neo4j"},{"tags":["docker","neo4j"],"answers":[{"tags":[],"owner":{"reputation":1039,"user_id":10766766,"user_type":"registered","profile_image":"https://i.stack.imgur.com/SqW5t.jpg?s=128&g=1","display_name":"Raphael","link":"https://stackoverflow.com/users/10766766/raphael"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582547543,"creation_date":1582547543,"answer_id":60376040,"question_id":60372472,"share_link":"https://stackoverflow.com/a/60376040","body_markdown":"It turned out that the standard database in neo4j.conf needs to be set to the name of the new created database. After that I restarted the container and it worked :)","link":"https://stackoverflow.com/questions/60372472/neo4j-docker-admin-import-database-not-found/60376040#60376040","title":"Neo4j Docker - Admin Import - Database not found"}],"owner":{"reputation":1039,"user_id":10766766,"user_type":"registered","profile_image":"https://i.stack.imgur.com/SqW5t.jpg?s=128&g=1","display_name":"Raphael","link":"https://stackoverflow.com/users/10766766/raphael"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1582547543,"creation_date":1582534951,"question_id":60372472,"share_link":"https://stackoverflow.com/q/60372472","body_markdown":"After I created a neo4j docker container and imported data using admin-import the database is not found.\r\n\r\n    @neo4j&gt; :use dgraph\r\n    Unable to get a routing table for database &#39;dgraph&#39; because this database does not exist\r\n\r\n\r\n1) run the docker container\r\n\r\n    docker run \\\r\n    --name=neo4j \\\r\n    --publish=7474:7474 --publish=7687:7687 \\\r\n    --volume=[...]/neo4j/data:/data \\\r\n    --volume=[...]/neo4j/import:/var/lib/neo4j/import \\\r\n    --env=NEO4J_AUTH=none \\\r\n    neo4j\r\n\r\n2) open bash in container\r\n\r\n    docker exec -it neo4j bash\r\n\r\n3) create new database folder in data/databases\r\n\r\n    mkdir data/databases/dgraph\r\n\r\n3) run admin-import\r\n\r\n    docker exec -it neo4j bash\r\n    &gt;&gt; cd import\r\n    &gt;&gt; neo4j-admin import \\\r\n    --database=dgraph \\\r\n    [...]\r\n\r\nImport succesfull message and data/databases/dgraph contains database files (like data/databases/neo4j)\r\n\r\n3) chown all files to neo4j user\r\n\r\n    chown -R neo4j:neo4j data\r\n\r\n\r\nBut still: I can&#39;t use the newly created database :( Surely I&#39;m missing something but I cant figure out what.\r\n\r\nAny help is much appreciated","link":"https://stackoverflow.com/questions/60372472/neo4j-docker-admin-import-database-not-found","title":"Neo4j Docker - Admin Import - Database not found"},{"tags":["javascript","neo4j"],"answers":[{"comments":[{"owner":{"reputation":591,"user_id":4289059,"user_type":"registered","accept_rate":61,"profile_image":"https://www.gravatar.com/avatar/fe49395fd234bc395806bc79ed1c97a5?s=128&d=identicon&r=PG&f=1","display_name":"stat","link":"https://stackoverflow.com/users/4289059/stat"},"edited":false,"score":0,"creation_date":1582637390,"post_id":60384585,"comment_id":106839752,"link":"https://stackoverflow.com/questions/60372310/neo4j-javascript-drivers-cant-pass-the-read-data-to-object/60384585#comment106839752_60384585"},{"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":591,"user_id":4289059,"user_type":"registered","accept_rate":61,"profile_image":"https://www.gravatar.com/avatar/fe49395fd234bc395806bc79ed1c97a5?s=128&d=identicon&r=PG&f=1","display_name":"stat","link":"https://stackoverflow.com/users/4289059/stat"},"edited":false,"score":0,"creation_date":1582656472,"post_id":60384585,"comment_id":106850359,"link":"https://stackoverflow.com/questions/60372310/neo4j-javascript-drivers-cant-pass-the-read-data-to-object/60384585#comment106850359_60384585"}],"tags":[],"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582656401,"last_edit_date":1582656401,"creation_date":1582581846,"answer_id":60384585,"question_id":60372310,"share_link":"https://stackoverflow.com/a/60384585","body_markdown":"The [Result.then](https://neo4j.com/docs/api/javascript-driver/current/class/src/result.js~Result.html#instance-method-then) method returns a Javascript [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise), which you should learn about.\r\n\r\nProbably the simplest way to (asynchronously) pass the `results` (or an error) to your `next()` function (which you will have to write) is: return `results` from your existing `then`, and chain another `then` call after the existing one:\r\n\r\n    session\r\n      .run(&quot;MYCYPHERQUERY&quot;)\r\n      .then(r =&gt; {\r\n        const results = r.records.map(d =&gt; d.toObject()); // results can be local\r\n        data = JSON.stringify(results);\r\n        session.close();\r\n        console.log(data);\r\n        return results;\r\n      })\r\n      .then(r =&gt; {\r\n        next(null, r);\r\n      })\r\n      .catch(error =&gt; {\r\n        console.log(error);\r\n        next(error);\r\n      })\r\n\r\nIn above example, `next()` takes an error (or `null`) as the first parameter, and the results (or `undefined`) as the second parameter.","link":"https://stackoverflow.com/questions/60372310/neo4j-javascript-drivers-cant-pass-the-read-data-to-object/60384585#60384585","title":"Neo4J Javascript drivers can&#39;t pass the read data to object"}],"owner":{"reputation":591,"user_id":4289059,"user_type":"registered","accept_rate":61,"profile_image":"https://www.gravatar.com/avatar/fe49395fd234bc395806bc79ed1c97a5?s=128&d=identicon&r=PG&f=1","display_name":"stat","link":"https://stackoverflow.com/users/4289059/stat"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1582656401,"creation_date":1582534324,"question_id":60372310,"share_link":"https://stackoverflow.com/q/60372310","body_markdown":"I have to admit I feel a bit lost as I&#39;m not an expert javascript programmer.\r\n\r\nI want to query my neo4j db in order to store in a variable a json-like structure of my data coming from a simple query like \r\n\r\n    MATCH (a:VarA)--&gt;(b:VarB) RETURN a.var1 as one, a.var2 as two, b.var3 as three, b.var4 as four; \r\n\r\nSo I wrote some simple code like:\r\n\r\n\r\n    var driver = neo4j.driver(\r\n            &#39;BOLT PATH&#39;,\r\n            neo4j.auth.basic(&#39;MYUSER&#39;, &#39;MYPASS&#39;),\r\n            { disableLosslessIntegers: true }\r\n        );\r\n    var session = driver.session({ defaultAccessMode: neo4j.session.WRITE });\r\n    \r\n    session\r\n        .run(&quot;MYCYPHERQUERY&quot;)\r\n        .then(r =&gt; {\r\n            results = r.records.map(d =&gt; d.toObject());\r\n            data = JSON.stringify(results);\r\n            session.close();\r\n            console.log(data);\r\n        })\r\n        .catch(error =&gt; {\r\n            results = [];\r\n            console.log(error);\r\n        })\r\n\r\n\r\n\r\nBut, I guess I&#39;m stuck in this async function, as if I add \r\n\r\nconsole.log(data); \r\n\r\nafter the code, it returns an empty array, while the one in the .then block is triggered after and returns the proper json file.\r\n\r\nHowever this blocks me as I want to pass this object to the next function, which doesn&#39;t work.\r\n\r\nHow can I add to this an option to wait for the results to be stored in data variable before proceeding?\r\n\r\n","link":"https://stackoverflow.com/questions/60372310/neo4j-javascript-drivers-cant-pass-the-read-data-to-object","title":"Neo4J Javascript drivers can&#39;t pass the read data to object"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":6519,"user_id":2286415,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tbRoS.png?s=128&g=1","display_name":"logisima","link":"https://stackoverflow.com/users/2286415/logisima"},"edited":false,"score":0,"creation_date":1582552653,"post_id":60370717,"comment_id":106806073,"link":"https://stackoverflow.com/questions/60370717/find-the-largest-node-of-each-segment-in-a-series-of-paths#comment106806073_60370717"}],"answers":[{"comments":[{"owner":{"reputation":1,"user_id":12951655,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-CDLhCIYQe5g/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9VgaYh6a_o9h_4uP-OacTYFstUg/photo.jpg?sz=128","display_name":"黃宣豪","link":"https://stackoverflow.com/users/12951655/%e9%bb%83%e5%ae%a3%e8%b1%aa"},"edited":false,"score":0,"creation_date":1582644605,"post_id":60377613,"comment_id":106844165,"link":"https://stackoverflow.com/questions/60370717/find-the-largest-node-of-each-segment-in-a-series-of-paths/60377613#comment106844165_60377613"}],"tags":[],"owner":{"reputation":6519,"user_id":2286415,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tbRoS.png?s=128&g=1","display_name":"logisima","link":"https://stackoverflow.com/users/2286415/logisima"},"last_editor":{"reputation":6519,"user_id":2286415,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tbRoS.png?s=128&g=1","display_name":"logisima","link":"https://stackoverflow.com/users/2286415/logisima"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582706178,"last_edit_date":1582706178,"creation_date":1582553203,"answer_id":60377613,"question_id":60370717,"share_link":"https://stackoverflow.com/a/60377613","body_markdown":"I don&#39;t know if it&#39;s what you&#39;re looking for, but here is an example on how to find the item with a max value plus its position in the array :\r\n\r\n    MATCH p = (A:Task{FROMLOCTYPE:&quot;1&quot;})-[:path*]-&gt;(b:Task{TOLOCTYPE:&quot;4&quot;})\r\n    WITH \r\n    \treduce(\r\n        \toutput = [0, 0, 0], \r\n            n IN nodes(p) |  \r\n            CASE \r\n            \tWHEN output[0] &lt; n.duration THEN [n.duration, output[2], output[2]+1]\r\n                ELSE [output[0], output[1], output[2]+1]\r\n        ) as tasks\r\n     RETURN \r\n      tasks[0] AS max,\r\n      tasks[1] AS positionInArray\r\n\r\n \r\nIn the reduce we create an array with 3 elements : \r\n\r\n* in the first one we will store the maximum value found\r\n* in the second the position in the array of the maximum value\r\n* in the third, it&#39;s just an increment to track the position of where we are in the array\r\n\r\nA good read about that : https://blog.armbruster-it.de/2015/03/cypher-fun-finding-the-position-of-an-element-in-an-array/","link":"https://stackoverflow.com/questions/60370717/find-the-largest-node-of-each-segment-in-a-series-of-paths/60377613#60377613","title":"Find the largest node of each segment in a series of paths"},{"tags":[],"owner":{"reputation":1,"user_id":12951655,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-CDLhCIYQe5g/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9VgaYh6a_o9h_4uP-OacTYFstUg/photo.jpg?sz=128","display_name":"黃宣豪","link":"https://stackoverflow.com/users/12951655/%e9%bb%83%e5%ae%a3%e8%b1%aa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582644439,"creation_date":1582644439,"answer_id":60398047,"question_id":60370717,"share_link":"https://stackoverflow.com/a/60398047","body_markdown":"[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/OKq9W.png\r\n\r\n\r\n&gt; MATCH p = (A:Task{FROMLOCTYPE:&quot;LOAD_PORT&quot;})-[:wafer_path*]-&gt;(b:Task{TOLOCTYPE:&quot;LOAD_PORT&quot;})\r\n&gt;return p limit 3\r\n\r\nThe photo is my sample data.\r\n\r\nSorry my previous description was not clear enough.\r\n\r\nI think my problem should be when I find a bunch of lists.\r\n\r\nHow do I search these nodes at the same time.\r\n\r\nA bit like how to find the maximum value of an array in a two-dimensional array.\r\n\r\nI can group nodes according to the classification I want.\r\n\r\n&gt; MATCH p = (A:Task{FROMLOCTYPE:&quot;LOAD_PORT&quot;})-[:wafer_path*]-&gt;(b:Task{TOLOCTYPE:&quot;LOAD_PORT&quot;})\r\n&gt;return p\r\n\r\nP will return all the Ps that Neo4j finds.\r\n\r\nAnd the nodes in p has its own duration.\r\n\r\n&gt; [12,18,14,15]\r\n\r\n&gt; [15,19,12,11]\r\n\r\n&gt; [12,15,13,14]\r\n\r\nBut I ’m not sure how to query for the max duration in each group with cypher.\r\nOr check the MAX duration node is (Task:{position:&quot;2&quot;)\r\n\r\nThank again for your reply.\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/60370717/find-the-largest-node-of-each-segment-in-a-series-of-paths/60398047#60398047","title":"Find the largest node of each segment in a series of paths"}],"owner":{"reputation":1,"user_id":12951655,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-CDLhCIYQe5g/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9VgaYh6a_o9h_4uP-OacTYFstUg/photo.jpg?sz=128","display_name":"黃宣豪","link":"https://stackoverflow.com/users/12951655/%e9%bb%83%e5%ae%a3%e8%b1%aa"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1582706178,"creation_date":1582526543,"question_id":60370717,"share_link":"https://stackoverflow.com/q/60370717","body_markdown":"I&#39;m trying to divide different short chains according to the head and tail I want in a long chain, and find the max duration in the short chains.\r\n\r\nE.g..\r\n\r\nLong chain:\r\n\r\nNA1 -&gt; NA2 -&gt; NA3 -&gt; NA4 -&gt; NB1 -&gt; NB2 -&gt; NB3 -&gt; NB4 -&gt;...\r\n\r\nI want to check whether the max duration in each chain is the second node.\r\n\r\nNA1 -&gt; NA2 -&gt; NA3 -&gt; NA4\r\n\r\nNB1 -&gt; NB2 -&gt; NB3 -&gt; NB4\r\n\r\n...\r\n\r\n\r\n( N means node, A,b and the number are the attribute and each node has its own duration )\r\n\r\n\r\n```\r\nMATCH p = (A:Task{FROMLOCTYPE:&quot;1&quot;})-[:path*]-&gt;(b:Task{TOLOCTYPE:&quot;4&quot;})\r\n\r\nWITH reduce(output = [], n IN nodes(p) | output + n ) as tasks\r\n```\r\n\r\nBut I&#39;m stuck here and don&#39;t know how to check the maximum duration in each list.\r\n\r\nOr do any operation in each list.","link":"https://stackoverflow.com/questions/60370717/find-the-largest-node-of-each-segment-in-a-series-of-paths","title":"Find the largest node of each segment in a series of paths"},{"tags":["neo4j","nosql","graph-databases","spring-data-neo4j"],"answers":[{"comments":[{"owner":{"reputation":3,"user_id":12264407,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/3e7a472b6d3578f2f2043e1ebc522c72?s=128&d=identicon&r=PG&f=1","display_name":"Ramith Thenuwara","link":"https://stackoverflow.com/users/12264407/ramith-thenuwara"},"edited":false,"score":0,"creation_date":1582525553,"post_id":60370096,"comment_id":106793480,"link":"https://stackoverflow.com/questions/60369739/how-to-make-relationship-using-the-value-of-the-properties-using-neo4j/60370096#comment106793480_60370096"},{"owner":{"reputation":1210,"user_id":1734996,"user_type":"registered","accept_rate":85,"profile_image":"https://i.stack.imgur.com/MaqL4.png?s=128&g=1","display_name":"Graphileon","link":"https://stackoverflow.com/users/1734996/graphileon"},"reply_to_user":{"reputation":3,"user_id":12264407,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/3e7a472b6d3578f2f2043e1ebc522c72?s=128&d=identicon&r=PG&f=1","display_name":"Ramith Thenuwara","link":"https://stackoverflow.com/users/12264407/ramith-thenuwara"},"edited":false,"score":0,"creation_date":1582527152,"post_id":60370096,"comment_id":106793951,"link":"https://stackoverflow.com/questions/60369739/how-to-make-relationship-using-the-value-of-the-properties-using-neo4j/60370096#comment106793951_60370096"},{"owner":{"reputation":3,"user_id":12264407,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/3e7a472b6d3578f2f2043e1ebc522c72?s=128&d=identicon&r=PG&f=1","display_name":"Ramith Thenuwara","link":"https://stackoverflow.com/users/12264407/ramith-thenuwara"},"edited":false,"score":0,"creation_date":1582527712,"post_id":60370096,"comment_id":106794147,"link":"https://stackoverflow.com/questions/60369739/how-to-make-relationship-using-the-value-of-the-properties-using-neo4j/60370096#comment106794147_60370096"},{"owner":{"reputation":3,"user_id":12264407,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/3e7a472b6d3578f2f2043e1ebc522c72?s=128&d=identicon&r=PG&f=1","display_name":"Ramith Thenuwara","link":"https://stackoverflow.com/users/12264407/ramith-thenuwara"},"edited":false,"score":0,"creation_date":1582528013,"post_id":60370096,"comment_id":106794248,"link":"https://stackoverflow.com/questions/60369739/how-to-make-relationship-using-the-value-of-the-properties-using-neo4j/60370096#comment106794248_60370096"},{"owner":{"reputation":1210,"user_id":1734996,"user_type":"registered","accept_rate":85,"profile_image":"https://i.stack.imgur.com/MaqL4.png?s=128&g=1","display_name":"Graphileon","link":"https://stackoverflow.com/users/1734996/graphileon"},"reply_to_user":{"reputation":3,"user_id":12264407,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/3e7a472b6d3578f2f2043e1ebc522c72?s=128&d=identicon&r=PG&f=1","display_name":"Ramith Thenuwara","link":"https://stackoverflow.com/users/12264407/ramith-thenuwara"},"edited":false,"score":0,"creation_date":1582528927,"post_id":60370096,"comment_id":106794577,"link":"https://stackoverflow.com/questions/60369739/how-to-make-relationship-using-the-value-of-the-properties-using-neo4j/60370096#comment106794577_60370096"},{"owner":{"reputation":2090,"user_id":9783433,"user_type":"registered","profile_image":"https://i.stack.imgur.com/vRAjK.png?s=128&g=1","display_name":"mischva11","link":"https://stackoverflow.com/users/9783433/mischva11"},"edited":false,"score":0,"creation_date":1582532630,"post_id":60370096,"comment_id":106795941,"link":"https://stackoverflow.com/questions/60369739/how-to-make-relationship-using-the-value-of-the-properties-using-neo4j/60370096#comment106795941_60370096"}],"tags":[],"owner":{"reputation":1210,"user_id":1734996,"user_type":"registered","accept_rate":85,"profile_image":"https://i.stack.imgur.com/MaqL4.png?s=128&g=1","display_name":"Graphileon","link":"https://stackoverflow.com/users/1734996/graphileon"},"last_editor":{"reputation":1210,"user_id":1734996,"user_type":"registered","accept_rate":85,"profile_image":"https://i.stack.imgur.com/MaqL4.png?s=128&g=1","display_name":"Graphileon","link":"https://stackoverflow.com/users/1734996/graphileon"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582528986,"last_edit_date":1582528986,"creation_date":1582522489,"answer_id":60370096,"question_id":60369739,"share_link":"https://stackoverflow.com/a/60370096","body_markdown":"    MATCH (log:Log)\r\n    WITH log\r\n    MATCH (cust:Customer)\r\n    WHERE cust.mob=log.incomming\r\n    CREATE (log)-[:MYNEWRELATIONTYPE]-&gt;(cust)","link":"https://stackoverflow.com/questions/60369739/how-to-make-relationship-using-the-value-of-the-properties-using-neo4j/60370096#60370096","title":"How to make relationship using the value of the properties using neo4j"}],"owner":{"reputation":3,"user_id":12264407,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/3e7a472b6d3578f2f2043e1ebc522c72?s=128&d=identicon&r=PG&f=1","display_name":"Ramith Thenuwara","link":"https://stackoverflow.com/users/12264407/ramith-thenuwara"},"last_editor":{"reputation":5630,"user_id":2266,"user_type":"registered","accept_rate":90,"profile_image":"https://www.gravatar.com/avatar/aa64f5e61bb8cbcc9d10372256580364?s=128&d=identicon&r=PG","display_name":"Chris Skardon","link":"https://stackoverflow.com/users/2266/chris-skardon"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1582550254,"creation_date":1582519834,"last_edit_date":1582550254,"question_id":60369739,"share_link":"https://stackoverflow.com/q/60369739","body_markdown":"How to make relationship using the value of the properties\r\n\r\nExample: There is dataset imported named customers , Its node label is **CUSTOMER** and it has big amount of data  id , mobile number, city, contact type, date  \r\n[Customer data][1]   \r\nclick the image\r\n\r\n2. there is an another data set name **calllog** details , Its node label is log and the properties are Duration ,event date, Incoming calls , outgoing calls\r\n\r\n[call logs][2]\r\nclick the image\r\n\r\n****Note****  the Values of the **INCOMING** numbers in LOG node are also present in MOBILE number values of the CUSTOMER node . \r\n\r\nhow can i build a relation to `CUSTOMER {Mobile &#39;Value&#39;} == to CALL LOG (Incomming number &#39;Value&#39;)`\r\n\r\n    mobile no:&#39;07123456&#39;  == incomming number : &#39;07123456&#39;\r\n\r\nthe customer data base (mobile number) contains same value of the call log data base (Incoming calls)   \r\nI want to join them using neo4j\r\n\r\nIMAGE 3\r\n[IMAGE3][3]\r\nhow can I do this explain with code  thank you &lt;3\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4GxQ7.png\r\n  [2]: https://i.stack.imgur.com/KwFbc.png\r\n  [3]: https://i.stack.imgur.com/fIBqW.png","link":"https://stackoverflow.com/questions/60369739/how-to-make-relationship-using-the-value-of-the-properties-using-neo4j","title":"How to make relationship using the value of the properties using neo4j"},{"tags":["ruby-on-rails","ruby","neo4j","neo4j.rb"],"comments":[{"owner":{"reputation":12421,"user_id":567762,"user_type":"registered","accept_rate":78,"profile_image":"https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG","display_name":"Jared Beck","link":"https://stackoverflow.com/users/567762/jared-beck"},"edited":false,"score":0,"creation_date":1582518981,"post_id":60367793,"comment_id":106791844,"link":"https://stackoverflow.com/questions/60367793/retrieving-subgraph-using-neo4j-rb#comment106791844_60367793"},{"owner":{"reputation":51,"user_id":7020955,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/69dbac6928ed6e02e89120814e1fe3f4?s=128&d=identicon&r=PG&f=1","display_name":"bstovall","link":"https://stackoverflow.com/users/7020955/bstovall"},"reply_to_user":{"reputation":12421,"user_id":567762,"user_type":"registered","accept_rate":78,"profile_image":"https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG","display_name":"Jared Beck","link":"https://stackoverflow.com/users/567762/jared-beck"},"edited":false,"score":0,"creation_date":1582605982,"post_id":60367793,"comment_id":106825485,"link":"https://stackoverflow.com/questions/60367793/retrieving-subgraph-using-neo4j-rb#comment106825485_60367793"}],"owner":{"reputation":51,"user_id":7020955,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/69dbac6928ed6e02e89120814e1fe3f4?s=128&d=identicon&r=PG&f=1","display_name":"bstovall","link":"https://stackoverflow.com/users/7020955/bstovall"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1582499640,"creation_date":1582499640,"question_id":60367793,"share_link":"https://stackoverflow.com/q/60367793","body_markdown":"Currently have a graph schema defined with a single node type and a single relationship type. My goal is to pass a particular subgraph to a graph visualization utility for display, so I need to get all nodes and all relationships between the nodes. More particularly, the subgraph is the subgraph beginning at node *n* and extending *max_steps* edges from *n*.\r\n\r\nSo far, I have something along the lines of:\r\n\r\n```ruby\r\nclass Position\r\n  include Neo4j::ActiveNode\r\n\r\n  has_many :out, :next, relationship_class: :To\r\n\r\n  def get_next_subgraph( max_steps = 1 )\r\n    nodes = []\r\n    edges = []\r\n\r\n    data = self.as(:n)\r\n           .next(:m, :r, rel_length: max_steps )\r\n           .pluck(:m, :r)\r\n\r\n    data.each do |n, r|\r\n      nodes.append n\r\n      edges.append r[0]\r\n    end\r\n\r\n    return {\r\n        nodes: nodes,\r\n        edges: edges\r\n    }\r\n\r\n  end  \r\nend\r\n```\r\n\r\nwhich gets used in something like the following manner:\r\n\r\n```ruby\r\npos = Position.find(&#39;24325&#39;)\r\nsg = pos.get_next_subgraph()\r\n\r\nsg[:edges].each do |edge|\r\n  edge.from_node.uuid\r\nend\r\n```\r\n\r\nThe issue I&#39;m encountering is that because `from_node` and `to_node` are lazy loaded, neo4j.rb performs an additional query each time I try to access the `uuid` of a particular relationship, which is needed to identify the node at each end of the edge. So, what I need is to either have the `from_node` and `to_node` mapped to the corresponding nodes (which are returned with the query already) or another way to retrieve the `from_node`/`to_node` `uuids`.  \r\n\r\nI have a few other ideas about how to do this, but I&#39;ve spent enough time on something that seems to be a common enough pattern that I feel like I must be missing something.\r\n\r\nSo, in short, what&#39;s the correct/idiomatic way to use neo4j.rb to retrieve a subgraph in a single query?\r\n\r\n(For context, this will eventually be sent back in response to a GraphQL query.)","link":"https://stackoverflow.com/questions/60367793/retrieving-subgraph-using-neo4j-rb","title":"Retrieving subgraph using neo4j.rb"},{"tags":["json","graph","neo4j","merge","relationship"],"comments":[{"owner":{"reputation":308,"user_id":12251717,"user_type":"registered","profile_image":"https://i.stack.imgur.com/2ImiE.jpg?s=128&g=1","display_name":"TheTeacher","link":"https://stackoverflow.com/users/12251717/theteacher"},"edited":false,"score":0,"creation_date":1582515905,"post_id":60367668,"comment_id":106791272,"link":"https://stackoverflow.com/questions/60367668/neo4j-merging-two-nodes-within-the-same-dataset#comment106791272_60367668"},{"owner":{"reputation":235,"user_id":3821678,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/5bfda9224e568b83ca293d3a57b695d6?s=128&d=identicon&r=PG&f=1","display_name":"Wana_B3_Nerd","link":"https://stackoverflow.com/users/3821678/wana-b3-nerd"},"reply_to_user":{"reputation":308,"user_id":12251717,"user_type":"registered","profile_image":"https://i.stack.imgur.com/2ImiE.jpg?s=128&g=1","display_name":"TheTeacher","link":"https://stackoverflow.com/users/12251717/theteacher"},"edited":false,"score":0,"creation_date":1582518057,"post_id":60367668,"comment_id":106791672,"link":"https://stackoverflow.com/questions/60367668/neo4j-merging-two-nodes-within-the-same-dataset#comment106791672_60367668"},{"owner":{"reputation":308,"user_id":12251717,"user_type":"registered","profile_image":"https://i.stack.imgur.com/2ImiE.jpg?s=128&g=1","display_name":"TheTeacher","link":"https://stackoverflow.com/users/12251717/theteacher"},"edited":false,"score":0,"creation_date":1582518108,"post_id":60367668,"comment_id":106791683,"link":"https://stackoverflow.com/questions/60367668/neo4j-merging-two-nodes-within-the-same-dataset#comment106791683_60367668"},{"owner":{"reputation":308,"user_id":12251717,"user_type":"registered","profile_image":"https://i.stack.imgur.com/2ImiE.jpg?s=128&g=1","display_name":"TheTeacher","link":"https://stackoverflow.com/users/12251717/theteacher"},"edited":false,"score":0,"creation_date":1582518145,"post_id":60367668,"comment_id":106791690,"link":"https://stackoverflow.com/questions/60367668/neo4j-merging-two-nodes-within-the-same-dataset#comment106791690_60367668"},{"owner":{"reputation":6519,"user_id":2286415,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tbRoS.png?s=128&g=1","display_name":"logisima","link":"https://stackoverflow.com/users/2286415/logisima"},"edited":false,"score":0,"creation_date":1582547101,"post_id":60367668,"comment_id":106802973,"link":"https://stackoverflow.com/questions/60367668/neo4j-merging-two-nodes-within-the-same-dataset#comment106802973_60367668"},{"owner":{"reputation":235,"user_id":3821678,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/5bfda9224e568b83ca293d3a57b695d6?s=128&d=identicon&r=PG&f=1","display_name":"Wana_B3_Nerd","link":"https://stackoverflow.com/users/3821678/wana-b3-nerd"},"edited":false,"score":0,"creation_date":1582567053,"post_id":60367668,"comment_id":106813900,"link":"https://stackoverflow.com/questions/60367668/neo4j-merging-two-nodes-within-the-same-dataset#comment106813900_60367668"},{"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1582674482,"post_id":60367668,"comment_id":106857216,"link":"https://stackoverflow.com/questions/60367668/neo4j-merging-two-nodes-within-the-same-dataset#comment106857216_60367668"}],"owner":{"reputation":235,"user_id":3821678,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/5bfda9224e568b83ca293d3a57b695d6?s=128&d=identicon&r=PG&f=1","display_name":"Wana_B3_Nerd","link":"https://stackoverflow.com/users/3821678/wana-b3-nerd"},"comment_count":7,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1582498577,"creation_date":1582498577,"question_id":60367668,"share_link":"https://stackoverflow.com/q/60367668","body_markdown":"Hello I am a beginner to neo4j and graph databases in general. I have watched tutorials but I am struggling with a merge statement when trying to apply my learning to my own project.\r\n\r\nDo give some context I am importing my data using apoc.load.json and the format of my json file is:\r\n\r\n```\r\n{&quot;train_id&quot;:3326, &quot;relevant&quot;:1, &quot;date&quot;:&quot;2020-01-22&quot;, &quot;user_id&quot;:134680773, &quot;tweet&quot;:&quot;blah blah text&quot;, &quot;conversation_id&quot;:&quot;1220212769825&quot;, &quot;id&quot;:&quot;122021276&quot;}\r\n```\r\nI am able to load my data fine into neo4j\r\nBut I am having trouble with my actual query to create the connections within my data.\r\nWhat I want to do is create nodes for every row called &quot;Tweets&quot; and a node for every row called &quot;date&quot;, Tweets should store all the info in the json , and date should store just the &quot;date&quot; info from it. \r\nI then want to create a connection between the nodes to display different node for days and connect them with all the different tweets that were created on that day.\r\n\r\nHere is the query I have created thus far:\r\n\r\n```\r\n//Creating Nodes and Labels\r\nCALL apoc.load.json(&quot;file:///file.json&quot;) \r\nYield value\r\nWith value LIMIT 1000\r\nMerge (a:Tweet{id:value.id,date:value.date,train_id:value.train_id})\r\nMerge (d:Date{date:value.date})\r\nMerge (a)-[:SAME_DATE]-&gt;(d)\r\n```\r\nUnfortunately what I get with this is 1 date node which happens to be the first date in the file, and a bunch of tweets connected to it. Rather than all the various dates and the tweets that correspond to those specific dates.\r\nHere is an image for what it currently looks like, any help with the query would be much appreciated as I am a beginner with this and I have looked at various examples and haven&#39;t been able to figure it out. Thanks! as a side note how would you change the orange bubbles to show like the train_id rather than the date in the graph.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/x8HAi.jpg","link":"https://stackoverflow.com/questions/60367668/neo4j-merging-two-nodes-within-the-same-dataset","title":"Neo4j Merging two nodes within the same dataset"},{"tags":["neo4j","geojson","neo4j-spatial"],"owner":{"reputation":49,"user_id":9825326,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/3d1869a21e3c62968d590346f04bf66b?s=128&d=identicon&r=PG&f=1","display_name":"Schwertfisch","link":"https://stackoverflow.com/users/9825326/schwertfisch"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1582497541,"creation_date":1582497541,"question_id":60367550,"share_link":"https://stackoverflow.com/q/60367550","body_markdown":"How to import GeoJson into neo4j?\r\nUsing neo4j spatial and Java Api.\r\nIn the following urls :\r\n[Geojson][1] and [Test][2] \r\nThe test code is a great place for finding out how to do things. But There are no examples handling GeoJson format that demonstrate how it&#39;s clearly done. many examples show how it&#39;s done with Shapefiles but I couldn&#39;t find serious thing with Geojson. Of course, It would be great, if some generous person could provide an example that really matches.\r\n\r\n\r\n  [1]: https://github.com/neo4j-contrib/spatial/blob/master/src/main/java/org/neo4j/gis/spatial/pipes/processing/GeoJSON.java\r\n  [2]: https://github.com/neo4j-contrib/spatial/blob/master/src/test/java/org/neo4j/gis/spatial/pipes/GeoPipesDocTest.java","link":"https://stackoverflow.com/questions/60367550/how-to-import-geojson-into-neo4j","title":"How to import GeoJson into neo4j"},{"tags":["javascript","json","django","neo4j"],"owner":{"reputation":591,"user_id":4289059,"user_type":"registered","accept_rate":61,"profile_image":"https://www.gravatar.com/avatar/fe49395fd234bc395806bc79ed1c97a5?s=128&d=identicon&r=PG&f=1","display_name":"stat","link":"https://stackoverflow.com/users/4289059/stat"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1582476613,"creation_date":1582476613,"question_id":60364539,"share_link":"https://stackoverflow.com/q/60364539","body_markdown":"I&#39;m building this webapp with django.\r\n\r\nI&#39;m using the grid package by gijgo, to make a nice interactive table, with the ability to interact with my database.\r\n\r\nI&#39;m using a neo4j database, and since it is not supported directly I&#39;m changing the queries to make it work (changing the code for upload/edit/deletion and so on).\r\n\r\nhere an example of the editable table:\r\n\r\nhttps://gijgo.com/grid/demos/javascript-sourced-data\r\n\r\nhere you can see that with the parameter datasource, you can both specify a server interaction, or to use a json file created locally.\r\n\r\nhttps://gijgo.com/grid/configuration/dataSource\r\n\r\nI was using the local version, I was defining in view.py to pass an object to the page (maybe this is not the right word to use) preprocessed with:\r\n\r\nresults=repr(dumps( ))\r\n\r\nthen results returned.\r\n\r\nthen in the HTML document, in a javascript I was using \r\n\r\nvar data = jQuery.parseJSON({{results | safe }});\r\n\r\nthis allowed me to use it in the datasource option in the grid function (as a local object).\r\n\r\nHowever after I updated the edit/new interactions I noticed that of course the json file passed from view prevented the grid to be updated (I had to update the page with f5 every time to see the results).\r\n\r\nTherefore I decided to move the json creation inside the javascript\r\n\r\nI used the neo4j drivers and it&#39;s doing its job,\r\n\r\nafter    \r\n\r\n$(document).ready(function () {\r\n\r\nbut before\r\n\r\ngrid = $(&#39;#grid&#39;).grid({\r\n\r\nI added the code to refresh the container.\r\n\r\n\r\n\r\n        var driver = neo4j.driver(\r\n                &#39;BOLT PATH&#39;,\r\n                neo4j.auth.basic(&#39;MYUSER&#39;, &#39;MYPASS&#39;),\r\n                { disableLosslessIntegers: true }\r\n            );\r\n        var session = driver.session({ defaultAccessMode: neo4j.session.WRITE });\r\n\r\n        session\r\n            .run(&quot;MYCYPHERQUERY&quot;)\r\n            .then(r =&gt; {\r\n                results = r.records.map(d =&gt; d.toObject());\r\n                data = JSON.stringify(results);\r\n                session.close();\r\n                console.log(data);\r\n            })\r\n            .catch(error =&gt; {\r\n                results = [];\r\n                console.log(error);\r\n            })\r\n\r\n\r\nWhen console.log(data); is triggered, I see that in the log the content is exactly what I want.\r\n\r\nHowever I can&#39;t pass this to the datasource option.\r\n\r\nFirst I had the error &quot;not defined in HTML&quot; that I solved defining the variable at the top of the javascript.\r\n\r\nIt seems that this grid function is totally unable to recognise the data container for some reasons.\r\n\r\nI suppose I&#39;m having some troubles between local/global definition of variables or something similar.\r\n\r\nThanks for taking the time to read all of this, even more if you will have any hint to follow.\r\n\r\n","link":"https://stackoverflow.com/questions/60364539/javascript-neo4j-json-object-from-django-to-js-in","title":"Javascript Neo4j JSON object from django to JS in"},{"tags":["scala","neo4j"],"comments":[{"owner":{"reputation":8206,"user_id":4111404,"user_type":"registered","accept_rate":80,"profile_image":"https://lh5.googleusercontent.com/-kzPWJe4orps/AAAAAAAAAAI/AAAAAAAAABE/L-IQwWBiNJU/photo.jpg?sz=128","display_name":"Luis Miguel Mej&#237;a Su&#225;rez","link":"https://stackoverflow.com/users/4111404/luis-miguel-mej%c3%ada-su%c3%a1rez"},"edited":false,"score":1,"creation_date":1582478686,"post_id":60363789,"comment_id":106783034,"link":"https://stackoverflow.com/questions/60363789/neo4j-pass-liststring-into-query-and-unwind#comment106783034_60363789"}],"answers":[{"tags":[],"owner":{"reputation":714,"user_id":4838284,"user_type":"registered","accept_rate":47,"profile_image":"https://www.gravatar.com/avatar/31f9133efa4665383038a34262e8b3cc?s=128&d=identicon&r=PG&f=1","display_name":"Chris","link":"https://stackoverflow.com/users/4838284/chris"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582541814,"creation_date":1582541814,"answer_id":60374427,"question_id":60363789,"share_link":"https://stackoverflow.com/a/60374427","body_markdown":"In my `storeAPI.NeoQuery` I was missing the parameter that maps the string `$$list` in the query, to the val `list` outside of the query. \r\n\r\nWorking version below.\r\n\r\n    import org.neo4j.driver.v1._\r\n\r\n    def getNodesByPropertyValue(list: List[String]): Future[List[(String, String)]] = {\r\n    val getNodes =\r\n      s&quot;&quot;&quot;\r\n         | UNWIND $$list AS propValue\r\n         | MATCH (i: item {id: propValue})&lt;-[:CONTAINS]-(c: Collection)\r\n         | RETURN i.originalID AS OID\r\n         |&quot;&quot;&quot;.stripMargin\r\n    storeAPI.NeoQuery(getNodes, Map(&quot;list&quot; -&gt; list.asJava)).resultList().map {\r\n      result =&gt;\r\n        result.map {\r\n          record =&gt;\r\n            record.get(&quot;OID&quot;).toString\r\n        }\r\n    }).recoverWith {\r\n      case e: Exception =&gt;\r\n        logger.error(s&quot;Failure in getNodesByProperty: &quot;, e)\r\n        throw e\r\n    }\r\n    }","link":"https://stackoverflow.com/questions/60363789/neo4j-pass-liststring-into-query-and-unwind/60374427#60374427","title":"Neo4J - pass List[String] into query and UNWIND"}],"owner":{"reputation":714,"user_id":4838284,"user_type":"registered","accept_rate":47,"profile_image":"https://www.gravatar.com/avatar/31f9133efa4665383038a34262e8b3cc?s=128&d=identicon&r=PG&f=1","display_name":"Chris","link":"https://stackoverflow.com/users/4838284/chris"},"last_editor":{"reputation":714,"user_id":4838284,"user_type":"registered","accept_rate":47,"profile_image":"https://www.gravatar.com/avatar/31f9133efa4665383038a34262e8b3cc?s=128&d=identicon&r=PG&f=1","display_name":"Chris","link":"https://stackoverflow.com/users/4838284/chris"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1582541814,"creation_date":1582471783,"last_edit_date":1582477697,"question_id":60363789,"share_link":"https://stackoverflow.com/q/60363789","body_markdown":"I am trying to pass a `List[String]` into a query and then match on possibly multiple nodes by a property, where the value of the property is the string passed into the query. \r\n\r\n\r\n I get an error - `Expected parameter(s): list`\r\n\r\n    import org.neo4j.driver.v1._\r\n  \r\n    def getNodesByPropertyValue(list: List[String]): Future[List[(String, String)]] = {\r\n        val getNodes =\r\n          s&quot;&quot;&quot;\r\n             | UNWIND $$list AS propValue\r\n             | MATCH (i: item {id: propValue})&lt;-[:CONTAINS]-(c: Collection)\r\n             | RETURN i.originalID AS OID\r\n             |&quot;&quot;&quot;.stripMargin\r\n        storeAPI.NeoQuery(getNodes).resultList().map {\r\n          result =&gt;\r\n            result.map {\r\n              record =&gt;\r\n                record.get(&quot;OID&quot;).toString\r\n            }\r\n        }).recoverWith {\r\n          case e: Exception =&gt;\r\n            logger.error(s&quot;Failure in getNodesByProperty: &quot;, e)\r\n            throw e\r\n        }\r\n      }\r\n\r\nAlso, when I use `$list` instead, I get an error saying Neo4J doesn&#39;t recognise the function `List()`. \r\n\r\nA solution to this would be appreciated. \r\n\r\nAlso, what is the difference between passing a variable with `$` into a query, than passing a variable with `$$`? I thought the `$$` might be used for collections but I am unsure, I haven&#39;t found information on it yet. \r\n\r\nThanks.","link":"https://stackoverflow.com/questions/60363789/neo4j-pass-liststring-into-query-and-unwind","title":"Neo4J - pass List[String] into query and UNWIND"},{"tags":["graph","neo4j","cypher","analytics"],"answers":[{"tags":[],"owner":{"reputation":6519,"user_id":2286415,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tbRoS.png?s=128&g=1","display_name":"logisima","link":"https://stackoverflow.com/users/2286415/logisima"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582553760,"creation_date":1582553760,"answer_id":60377786,"question_id":60360056,"share_link":"https://stackoverflow.com/a/60377786","body_markdown":"if you have (n)--&gt;(m)--&gt;(p)`, the relationship `(n)--&gt;(p)` doesn&#39;t exist in the database.\r\n\r\nSo to do what you want, you will need *APOC*. There are some procedures/functions to create virtual graph.\r\n\r\n    MATCH (n1:node1)-[r1:related_to]-(n2:node2)-[r2:BELONGS_TO]-(n3:node3) \r\n    WITH n1, n3\r\n    CALL apoc.create.vRelationship(n1,&#39;belongs_to&#39;,{​}, n3) YIELD rel\r\n    RETURN n1,n3, rel\r\n\r\nExample : https://neo4j.com/docs/labs/apoc/current/virtual/\r\n","link":"https://stackoverflow.com/questions/60360056/how-to-display-graph-for-three-nodes-where-first-node-is-connected-to-third-via/60377786#60377786","title":"How to display graph for three nodes where first node is connected to third via second node using ne04j cypher?"}],"owner":{"reputation":126,"user_id":7819943,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/e4dd437fd2f9d6fed5e9f01c0ba27d77?s=128&d=identicon&r=PG&f=1","display_name":"Zara","link":"https://stackoverflow.com/users/7819943/zara"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":1,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1582612537,"creation_date":1582442983,"question_id":60360056,"share_link":"https://stackoverflow.com/q/60360056","body_markdown":"I am trying to figure out insights where `(node1)-[:related_to]-&gt;(node2)-[:belongs_to]-&gt;(node3)`. I want to display like  `(node1)-[:belongs_to]-&gt;(node3)` based on above relationship. Three relationship was created. \r\n\r\n    MATCH (n2:node2),(n3:node3)\r\n    WHERE n2.Name = n3.Name\r\n    CREATE (n3) &lt;- [:BELONGS_TO]- (n2)\r\n    \r\n    MATCH (n1:node2),(n2:node2)\r\n    CREATE (n1) &lt;- [:related_to]- (n2)\r\n    \r\n    MATCH (n1:node2),(n2:node2)\r\n    CREATE (n2) &lt;- [:related_to]- (n1)\r\n\r\nI have tried this query but it&#39;s giving me via relationship. \r\n\r\n    MATCH (n1:node1)-[r1:related_to]-(n2:node2)-[r2:BELONGS_TO]-(n3:node3) \r\n    RETURN n1,n2,n3\r\n\r\nI am new in this field and trying to bring few insights. Your valuable feedback will be appreciated. \r\n","link":"https://stackoverflow.com/questions/60360056/how-to-display-graph-for-three-nodes-where-first-node-is-connected-to-third-via","title":"How to display graph for three nodes where first node is connected to third via second node using ne04j cypher?"},{"tags":["neo4j","data-modeling"],"answers":[{"comments":[{"owner":{"reputation":343,"user_id":4183601,"user_type":"registered","accept_rate":94,"profile_image":"https://i.stack.imgur.com/HQ7K6.jpg?s=128&g=1","display_name":"Balael","link":"https://stackoverflow.com/users/4183601/balael"},"edited":false,"score":0,"creation_date":1582447611,"post_id":60359115,"comment_id":106775446,"link":"https://stackoverflow.com/questions/60357425/neo4j-data-model-detailing/60359115#comment106775446_60359115"}],"tags":[],"owner":{"reputation":1210,"user_id":1734996,"user_type":"registered","accept_rate":85,"profile_image":"https://i.stack.imgur.com/MaqL4.png?s=128&g=1","display_name":"Graphileon","link":"https://stackoverflow.com/users/1734996/graphileon"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1582431290,"creation_date":1582431290,"answer_id":60359115,"question_id":60357425,"share_link":"https://stackoverflow.com/a/60359115","body_markdown":"You could browse through these slides https://www.slideshare.net/mobile/neo4j/graphtour-neo4j-murrelektronik. It shows that you can go a lot further, like in modelling your property values as nodes, including support for properties that are calculated on the basis of others, multi-language support and conversion between units. Disclosure : we were part of this project and contributed heavily to the modeling. We also provided the UI.","link":"https://stackoverflow.com/questions/60357425/neo4j-data-model-detailing/60359115#60359115","title":"NEO4J DATA MODEL Detailing"}],"owner":{"reputation":343,"user_id":4183601,"user_type":"registered","accept_rate":94,"profile_image":"https://i.stack.imgur.com/HQ7K6.jpg?s=128&g=1","display_name":"Balael","link":"https://stackoverflow.com/users/4183601/balael"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1582431290,"creation_date":1582410275,"question_id":60357425,"share_link":"https://stackoverflow.com/q/60357425","body_markdown":"A product catalog has articles. Every article has specific properties. These properties like material, size, form etc. are shared by some of the articles e.g. a tool is available in 3 sizes (6&quot;, 8&quot;, 10&quot;) and 2 materials (304, 316). In a catalog you&#39;ll find now 6 records, for every version of the possible combination one. This will raise very fast when you add another property, e.g. Voltage (230, 400, 500) as you now have 18 records. \r\nI am pondering if I should keep the properties in the nodes so that I have 18 nodes for every property like \r\n\r\n    (n:Tool {name:&quot;X&quot;, voltage:&quot;230&quot;, size:&quot;6&quot;})\r\n\r\nand search the nodes for properties to find the right node or if I would try to set those key properties as nodes and connect the tool nodes to the property nodes, e.g.\r\n\r\n    (n:Tool {name:&quot;X&quot;}) -[:HAS_SIZE]- (s:Size {size:&quot;6&quot;})\r\n    (n) -[:HAS_VOLTAGE]- (v:Voltage {voltage:&quot;230&quot;}) a.s.o.\r\n\r\nand try to find the node X by following paths. This last options might also have the charme that I could fill form fields with all available options by picking e.g. all voltage-nodes.\r\n\r\nThe last might lead to many nodes and relations and when the number raises e.g. having 20 property nodes I am unsure how to find my node X? The query then might look like\r\n\r\n    MATCH (n:Tool) -[:HAS_SIZE]- (s:Size)\r\n    MATCH (n:Tool) -[:HAS_VOLTAGE]- (v:Voltage)\r\n    MATCH (n:Tool) -[:MADE_OF]- (m:Material)\r\n    where s.size = &quot;6&quot; AND v.voltage=&quot;230&quot; AND m.material =&quot;304&quot;\r\n    return n\r\n\r\nThis will become very big queries.\r\n\r\nMaybe someone has a link to an article/post where a basic layout for such a data model is shown? \r\nThank you!","link":"https://stackoverflow.com/questions/60357425/neo4j-data-model-detailing","title":"NEO4J DATA MODEL Detailing"},{"tags":["neo4j"],"answers":[{"comments":[{"owner":{"reputation":209,"user_id":5095832,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/cdbf08ed1957197c73ab5d35cf26a602?s=128&d=identicon&r=PG&f=1","display_name":"Krid","link":"https://stackoverflow.com/users/5095832/krid"},"edited":false,"score":0,"creation_date":1582462186,"post_id":60356220,"comment_id":106778474,"link":"https://stackoverflow.com/questions/60354801/whats-the-recommended-memory-efficient-way-to-perform-mass-property-update/60356220#comment106778474_60356220"},{"owner":{"reputation":308,"user_id":12251717,"user_type":"registered","profile_image":"https://i.stack.imgur.com/2ImiE.jpg?s=128&g=1","display_name":"TheTeacher","link":"https://stackoverflow.com/users/12251717/theteacher"},"reply_to_user":{"reputation":209,"user_id":5095832,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/cdbf08ed1957197c73ab5d35cf26a602?s=128&d=identicon&r=PG&f=1","display_name":"Krid","link":"https://stackoverflow.com/users/5095832/krid"},"edited":false,"score":0,"creation_date":1582462414,"post_id":60356220,"comment_id":106778526,"link":"https://stackoverflow.com/questions/60354801/whats-the-recommended-memory-efficient-way-to-perform-mass-property-update/60356220#comment106778526_60356220"}],"tags":[],"owner":{"reputation":308,"user_id":12251717,"user_type":"registered","profile_image":"https://i.stack.imgur.com/2ImiE.jpg?s=128&g=1","display_name":"TheTeacher","link":"https://stackoverflow.com/users/12251717/theteacher"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1582401422,"creation_date":1582401422,"answer_id":60356220,"question_id":60354801,"share_link":"https://stackoverflow.com/a/60356220","body_markdown":"You can use apoc procedure apoc.periodic.iterate for this ,\n\n    CALL apoc.periodic.iterate( &quot;MATCH (o:Order) WHERE o.date &gt; &#39;2016-10-13&#39; RETURN o&quot;, &quot;MATCH (o)-[:HAS_ITEM]-&gt;(i) WITH o, sum(i.value) as value SET o.value = value&quot;, {batchSize:100})\n\nThis is example in the documentation. Where you return the nodes to be updated in first query and do the update in second query.here ,you won&#39;t load all 30 million nodes at once..you can configure it using batch size .\n\nCheck out the documentation [here][1]  \n\n\n  [1]: https://neo4j.com/docs/labs/apoc/current/graph-updates/periodic-execution/","link":"https://stackoverflow.com/questions/60354801/whats-the-recommended-memory-efficient-way-to-perform-mass-property-update/60356220#60356220","title":"What&#39;s the recommended memory efficient way to perform mass property update?"}],"owner":{"reputation":209,"user_id":5095832,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/cdbf08ed1957197c73ab5d35cf26a602?s=128&d=identicon&r=PG&f=1","display_name":"Krid","link":"https://stackoverflow.com/users/5095832/krid"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1582401422,"creation_date":1582392347,"question_id":60354801,"share_link":"https://stackoverflow.com/q/60354801","body_markdown":"I have a Neo4j DB with more than 30 million nodes. I&#39;m wondering what might be the most efficient (regarding memory and speed) approach to do a bulk update of a returning pattern within a node property using only the Cypher Shell.\r\n\r\ne.g.: having a node with the label USER with a property name of the type String like:\r\n\r\n    &#39;Peter_Test&#39;\r\n\r\nIf I want to get rid of all the underscores in a bulk update what&#39;s the best way to achieve this without having to select each of the 30 million nodes in a single transaction, update the content and write it back to the same property?\r\n\r\nA selection of all USER nodes upfront and a following UNWIND for each entry within the selection plus an update would definitely run into memory issues.\r\n\r\nAny advice to perform such a task?","link":"https://stackoverflow.com/questions/60354801/whats-the-recommended-memory-efficient-way-to-perform-mass-property-update","title":"What&#39;s the recommended memory efficient way to perform mass property update?"},{"tags":["node.js","neo4j","neo4j-javascript"],"owner":{"reputation":1055,"user_id":7564182,"user_type":"registered","accept_rate":80,"profile_image":"https://i.stack.imgur.com/WkQwy.jpg?s=128&g=1","display_name":"Myonara","link":"https://stackoverflow.com/users/7564182/myonara"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1582381233,"creation_date":1582381233,"question_id":60353061,"share_link":"https://stackoverflow.com/q/60353061","body_markdown":"Im new to neo4j (playing with neo4j-Desktop 1.2.4 on a 4.0.0 neo4j-DB the last week) and I started today with the neo4j-javascript-driver (version 4.0.1) in node.js. I&#39;ve gone through the [neo4j-driver doc for javascript][1] and [the official neo4j Documentation for Drivers][2] and found no clue on the state of the session.\r\n\r\nThe minimum code file &#39;Neo4jDB.js&#39; is:\r\n\r\n\r\n    var Promise = require(&quot;bluebird&quot;);\r\n    \r\n    const cfg = require(&#39;../config/config_all&#39;);\r\n    var neo4j = require(&#39;neo4j-driver&#39;);\r\n    \r\n    var driver = neo4j.driver(\r\n        cfg.neo4j.uri,\r\n        neo4j.auth.basic(cfg.neo4j.user,cfg.neo4j.password),\r\n        { maxTransactionRetryTime: 30000}\r\n        );\r\n    \r\n    function Neo4jDB() { // NJDBxx\r\n    \r\n        this.cleanUp = function() {\r\n            var session = driver.session();\r\n            session.close();\r\n            driver.close();\r\n        }\r\n    \r\n        function error2msg(msgid,error,msgclass) {\r\n            if (typeof error.msgid === &#39;string&#39; || typeof msgid === &#39;undefined&#39; ) {\r\n                return error;\r\n            }\r\n            if (typeof msgclass === &#39;undefined&#39;) {\r\n                msgclass = &#39;DatabaseError&#39;;\r\n            }\r\n            return {\r\n                msgid : msgid,\r\n                msg : error,\r\n                msgclass : msgclass,\r\n            }\r\n        }\r\n    \r\n        function pt_createAuthor(txc,author) {\r\n            return new Promise(function(resolve,reject){\r\n                if (typeof author !== &#39;object&#39; || typeof author.name !== &#39;string&#39;) {\r\n                    reject(error2msg(&#39;NJAT01&#39;,&#39;ParameterError in Author creation&#39;,&quot;ParameterError&quot;));\r\n                    return;\r\n                }\r\n                txc.run(&quot;MERGE (a:Author { name:$nameParam }) &quot;\r\n                        +&quot;RETURN a.name AS name&quot;,\r\n                        {nameParam: author.name})\r\n                .then(authors =&gt; {\r\n                    resolve(authors);\r\n                }).catch(error =&gt; {\r\n                    console.log(&quot;p_createAuthor-error:&quot;,error);\r\n                    txc.rollback();\r\n                    reject(error2msg(&#39;NJAT02&#39;,error));\r\n                });\r\n            });\r\n        }\r\n    \r\n        function pt_createBook(txc,book) {\r\n            return new Promise(function(resolve,reject){\r\n                if (typeof book !== &#39;object&#39; || typeof book.title !== &#39;string&#39; || typeof book.isbn !== &#39;string&#39;) {\r\n                    reject(error2msg(&#39;NJBO01&#39;,&#39;ParameterError in Book creation&#39;,&quot;ParameterError&quot;));\r\n                    return;\r\n                }\r\n                txc.run(&quot;MERGE (b:Book { title: $titleParam,isbn:$isbnParam }) &quot;\r\n                        +&quot;RETURN b.title AS title,b.isbn AS isbn&quot;,\r\n                        {titleParam: book.title,isbnParam : book.isbn})\r\n                .then(books =&gt; {\r\n                    resolve(books);\r\n                }).catch(error =&gt; {\r\n                    console.log(&quot;pt_createBook-error:&quot;,error);\r\n                    reject(error2msg(&#39;NJBO02&#39;,error));\r\n                })\r\n            });\r\n        }\r\n        function pt_relateBookAndAuthor(txc,authorname,isbn) {\r\n            return new Promise(function(resolve,reject){\r\n                if (typeof authorname !== &#39;string&#39; || typeof isbn !== &#39;string&#39;) {\r\n                    reject(error2msg(&#39;NJBO03&#39;,&#39;ParameterError in Book relation to Author&#39;, &quot;ParameterError&quot;));\r\n                    return;\r\n                }\r\n                txc.run(&quot;MATCH (a:Author),(b:Book) WHERE a.name = $authorParam AND b.isbn = $isbnParam &quot;\r\n                    +&quot;CREATE (b)-[r:isAuthor]-&gt;(a) RETURN type(r) &quot;,\r\n                    {authorParam: authorname,isbnParam : isbn})\r\n                    .then(rel =&gt; {\r\n                        resolve(rel);\r\n                    }).catch(error =&gt; {\r\n                        console.log(&quot;pt_relateBookAndAuthor-error:&quot;,error);\r\n                        reject(error2msg(&#39;NJBO02&#39;,error)); \r\n                    })\r\n            });\r\n        }\r\n    \r\n        this.createBookAndAuthor = function(book,author) {\r\n            var session,txc;\r\n            return new Promise(function(resolve,reject){\r\n                if (typeof book !== &#39;object&#39; || typeof book.title !== &#39;string&#39; || typeof book.isbn !== &#39;string&#39;) {\r\n                    reject(error2msg(&#39;NJBO03&#39;,&#39;ParameterError in Book creation&#39;,&quot;ParameterError&quot;));\r\n                    return;\r\n                }\r\n                if (typeof author !== &#39;object&#39; || typeof author.name !== &#39;string&#39;) {\r\n                    reject(error2msg(&#39;NJAT03&#39;,&#39;ParameterError in Author creation&#39;,&quot;ParameterError&quot;));\r\n                    return;\r\n                }\r\n                session = driver.session({database:&#39;&#39;,defaultAccessMode: neo4j.session.WRITE});\r\n                txc = session.beginTransaction();\r\n                pt_createBook(txc,book)\r\n                .then(function(result){\r\n                    console.log(&#39;result-1&#39;);\r\n                    return pt_createAuthor(txc,author);\r\n                },function(error){\r\n                    txc.rollback();\r\n                    session.close();\r\n                    reject(error2msg(undefined,error)); \r\n                }).then(function(result){\r\n                    if (typeof result === &#39;undefined&#39;) {\r\n                        return;\r\n                    }\r\n                    console.log(&#39;result-2&#39;);\r\n                    return pt_relateBookAndAuthor(txc,author.name,book.isbn);\r\n                },function(error){\r\n                    txc.rollback();\r\n                    session.close();\r\n                    reject(error2msg(undefined,error));\r\n                })\r\n                .then(function(result){\r\n                    if (typeof result === &#39;undefined&#39;) {\r\n                        return;\r\n                    }\r\n                    console.log(&#39;result-3&#39;);\r\n                    txc.commit()\r\n                      .then( () =&gt; console.log(&quot;commit success&quot;))\r\n                      .catch( (error) =&gt; console.log(&quot;commit failed: &quot;,error));\r\n                    session.close();\r\n                    resolve(book);\r\n                },function(error){\r\n                    txc.rollback();\r\n                    session.close();\r\n                    reject(error2msg(undefined,error));\r\n                });\r\n            });\r\n        }\r\n    };\r\n    module.exports = new Neo4jDB();\r\n\r\n\r\nI&#39;m using three discrete routines `pt_createAuthor`, `pt_createAuthor`, `pt_relateBookAndAuthor`. Despite of using one cypher-Statement for the whole task, I&#39;ve splitted the transaction into these 3 and other basic functions, so that I can combine them in a similar pattern as used in the `createBookAndAuthor`-Routine also in other comfort routines (one session and one transaction, multiple basic functions). \r\n\r\nCurrently I&#39;m using some concrete sample data in a spec file:\r\n\r\n    const pdb = require(&#39;./Neo4jDB&#39;);\r\n    const assert = require(&#39;assert&#39;);\r\n    \r\n    \r\n    describe(&#39;Neo4jDB&#39;,function(){\r\n        describe(&#39;First Book&#39;,function(){\r\n            var author1 = {\r\n                name:&#39;Boris Grundl&#39;\r\n            };\r\n            var author2 = {\r\n                name:&#39;Bodo Sch&#228;fer&#39;\r\n            }\r\n            var book1 = {\r\n                title: &#39;Leading simple&#39;,\r\n                subtitle: &#39;F&#252;hren kann so einfach sein&#39;,\r\n                isbn: &#39;978-3-89749-708-5&#39;,\r\n            }\r\n            it(&#39;create pook with 1st author&#39;,function(done) {\r\n                pdb.createBookAndAuthor(book1,author1)\r\n                .then(function(result){\r\n                    // console.log(result);\r\n                    done();\r\n                },function(error){\r\n                    console.log(error);\r\n                    done(error);\r\n                })\r\n            })\r\n            it(&#39;merge book with 2nd author&#39;,function(done) {\r\n                pdb.createBookAndAuthor(book1,author2)\r\n                .then(function(result){\r\n                    // console.log(result);\r\n                    done();\r\n                },function(error){\r\n                    console.log(error);\r\n                    done(error);\r\n                })\r\n            })\r\n            it(&#39;cleans up&#39;,function(done){\r\n                pdb.cleanUp();\r\n                done();\r\n            })\r\n        }) // Connection tests.\r\n    }); // Neo4jDB\r\n\r\n\r\n  [1]: https://github.com/neo4j/neo4j-javascript-driver\r\n  [2]: https://neo4j.com/docs/driver-manual/current/\r\n","link":"https://stackoverflow.com/questions/60353061/neo4jerror-message-commit-cannot-be-handled-by-a-session-in-the-ready-state","title":"Neo4jError: Message &#39;COMMIT&#39; cannot be handled by a session in the READY state"},{"tags":["neo4j","cypher"],"answers":[{"comments":[{"owner":{"reputation":97,"user_id":10717049,"user_type":"registered","profile_image":"https://i.stack.imgur.com/RwV5B.jpg?s=128&g=1","display_name":"Lx2pwn","link":"https://stackoverflow.com/users/10717049/lx2pwn"},"edited":false,"score":0,"creation_date":1582380452,"post_id":60352428,"comment_id":106761801,"link":"https://stackoverflow.com/questions/60351996/problem-with-a-query-wich-has-optional-match-in-neo4j/60352428#comment106761801_60352428"},{"owner":{"reputation":308,"user_id":12251717,"user_type":"registered","profile_image":"https://i.stack.imgur.com/2ImiE.jpg?s=128&g=1","display_name":"TheTeacher","link":"https://stackoverflow.com/users/12251717/theteacher"},"reply_to_user":{"reputation":97,"user_id":10717049,"user_type":"registered","profile_image":"https://i.stack.imgur.com/RwV5B.jpg?s=128&g=1","display_name":"Lx2pwn","link":"https://stackoverflow.com/users/10717049/lx2pwn"},"edited":false,"score":0,"creation_date":1582400866,"post_id":60352428,"comment_id":106767662,"link":"https://stackoverflow.com/questions/60351996/problem-with-a-query-wich-has-optional-match-in-neo4j/60352428#comment106767662_60352428"}],"tags":[],"owner":{"reputation":308,"user_id":12251717,"user_type":"registered","profile_image":"https://i.stack.imgur.com/2ImiE.jpg?s=128&g=1","display_name":"TheTeacher","link":"https://stackoverflow.com/users/12251717/theteacher"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1582376661,"creation_date":1582376661,"answer_id":60352428,"question_id":60351996,"share_link":"https://stackoverflow.com/a/60352428","body_markdown":"Here , \r\n~~~\r\nWHERE  \r\n        f.name=~ &#39;(?i).*kirby.*&#39; AND  \r\n        f.timestamp&gt;&#39;2016-02-22&#39; AND f.timestamp&lt;&#39;2020-02-22&#39; AND\r\n        d.timestamp&gt;&#39;2016-02-22&#39; AND d.timestamp&lt;&#39;2020-02-22&#39;\r\n   ~~~\r\nWhen there are no tagged friends ,’d’ will be null and it cannot pass through these d.timestamp conditions \r\n\r\nYou can update your query like following to get the expected results ,\r\n~~~\r\nMATCH x=(:fbUser {graph_information:[&#39;admin&#39;, &#39;facebook&#39;]})--(f:Friend) \r\nOPTIONAL MATCH y=(f)-[s:TAGGED_TOGETHER]-(d:Friend) \r\nWITH x,f,y,d,s, case d when null then [] else [1] end as iterList \r\nWHERE  \r\n    f.name=~ &#39;(?i).*ruggeri.*&#39; AND  \r\n    f.timestamp&gt;&#39;2016-02-22&#39; AND f.timestamp&lt;&#39;2020-02-22&#39; AND ALL (x in iterList WHERE \r\n    d.timestamp&gt;&#39;2016-02-22&#39; AND d.timestamp&lt;&#39;2020-02-22&#39;) \r\nRETURN x,y\r\n~~~\r\nI am creating an iteration list based on the d value . So , when it’s null , we won’t check the time stamps on d, since we are iterating through empty list . When d is not null, we will the time stamps on d . ","link":"https://stackoverflow.com/questions/60351996/problem-with-a-query-wich-has-optional-match-in-neo4j/60352428#60352428","title":"problem with a query wich has OPTIONAL MATCH in neo4j"}],"owner":{"reputation":97,"user_id":10717049,"user_type":"registered","profile_image":"https://i.stack.imgur.com/RwV5B.jpg?s=128&g=1","display_name":"Lx2pwn","link":"https://stackoverflow.com/users/10717049/lx2pwn"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60352428,"answer_count":1,"score":0,"last_activity_date":1582376661,"creation_date":1582373240,"question_id":60351996,"share_link":"https://stackoverflow.com/q/60351996","body_markdown":"Consider the following schema, where orange nodes are of type `Friend` and pink node is of type `fbUser`.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nThe query that I am trying to write goes as follows:\r\n\r\n&gt; I&#39;m tring to match all nodes wich have a specific name in a specif range of time and\r\n&gt; optionally related to each Friend node, every `tagged_together`\r\n&gt; relationship\r\n\r\nSo I wrote the following query:\r\n\r\n    MATCH x=(:fbUser {graph_information:[&#39;admin&#39;, &#39;facebook&#39;]})--(f:Friend) \r\n    OPTIONAL MATCH y=(f)-[s:TAGGED_TOGETHER]-(d:Friend) \r\n    WITH x,f,y,d,s \r\n    WHERE  \r\n    \tf.name=~ &#39;(?i).*ruggeri.*&#39; AND  \r\n        f.timestamp&gt;&#39;2016-02-22&#39; AND f.timestamp&lt;&#39;2020-02-22&#39; AND\r\n        d.timestamp&gt;&#39;2016-02-22&#39; AND d.timestamp&lt;&#39;2020-02-22&#39;\r\n    RETURN x,y\r\n\r\nIn this specific case,the output is correctly what I want, in fact I have this:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nbut if run the query with this line\r\n\r\n    WHERE  \r\n        \tf.name=~ &#39;(?i).*kirby.*&#39; AND  \r\n            f.timestamp&gt;&#39;2016-02-22&#39; AND f.timestamp&lt;&#39;2020-02-22&#39; AND\r\n            d.timestamp&gt;&#39;2016-02-22&#39; AND d.timestamp&lt;&#39;2020-02-22&#39;\r\n\r\nI expect this output\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/TvVyU.png\r\n  [2]: https://i.stack.imgur.com/8tOp1.png\r\n  [3]: https://i.stack.imgur.com/R0esS.png\r\n\r\nbut I recieve `(no changes, no records)`\r\n\r\nwhy ?\r\n\r\nWhat I&#39;ve understand so far is that if an optional match doesn&#39;t have any results it returns null. \r\n","link":"https://stackoverflow.com/questions/60351996/problem-with-a-query-wich-has-optional-match-in-neo4j","title":"problem with a query wich has OPTIONAL MATCH in neo4j"},{"tags":["python","neo4j","cypher","graph-databases","neomodel"],"owner":{"reputation":1,"user_id":9643609,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-EaYE6k1qSBs/AAAAAAAAAAI/AAAAAAAAADs/QY1gMrVaGpw/photo.jpg?sz=128","display_name":"Monaheng Ramokhoro","link":"https://stackoverflow.com/users/9643609/monaheng-ramokhoro"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1582320936,"creation_date":1582320936,"question_id":60346509,"share_link":"https://stackoverflow.com/q/60346509","body_markdown":"I am trying to extract a path but using neomodel **without raw cypher**\r\n\r\nHow would u implement the equivalent of\r\n\r\n```MATCH (n:node_class {reference: &#39;some_root_node_id&#39;})-[:relationship*0..]-(m:node_class) SET m.property=n.property```\r\n\r\nbut in Neomodel code, without using raw cypher?\r\n\r\nI tried using the ```neomodel.match.Traversal``` class but it seems to only return the first level related nodes, could there be a parameter I am unaware of?\r\n\r\n```\r\nclass node_class(StructuredNode):\r\n    reference = StringProperty()\r\n    relationship = Relationship(node_class, &#39;relationship&#39;)\r\n```","link":"https://stackoverflow.com/questions/60346509/is-there-a-neomodel-way-of-traversing-a-path-given-the-root-node","title":"Is there a neomodel way of traversing a path given the root node?"},{"tags":["neo4j","permissions","graph-algorithm"],"answers":[{"tags":[],"owner":{"reputation":86,"user_id":6771840,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-HPdvp8Jp4gE/AAAAAAAAAAI/AAAAAAAAAQ0/1vI4OLS5HAk/photo.jpg?sz=128","display_name":"sharmag","link":"https://stackoverflow.com/users/6771840/sharmag"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1582313883,"creation_date":1582313883,"answer_id":60345221,"question_id":60344810,"share_link":"https://stackoverflow.com/a/60345221","body_markdown":"Try this if it helps.\r\n\r\n    CALL algo.scc.stream(&#39;Employee&#39;, &#39;MANAGES&#39;, {concurrency:4})\r\n    YIELD nodeId, partition","link":"https://stackoverflow.com/questions/60344810/prevent-writing-back-for-neo4j-algo/60345221#60345221","title":"Prevent writing back for Neo4j algo"}],"owner":{"reputation":961,"user_id":2299692,"user_type":"registered","accept_rate":17,"profile_image":"https://i.stack.imgur.com/4Y3SE.png?s=128&g=1","display_name":"David Makovoz","link":"https://stackoverflow.com/users/2299692/david-makovoz"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60345221,"answer_count":1,"score":0,"last_activity_date":1582313883,"creation_date":1582311828,"question_id":60344810,"share_link":"https://stackoverflow.com/q/60344810","body_markdown":"I work with a Neo4j database where I only have read permission. \r\n\r\nI&#39;m trying to run some of the algo algorithms. E.g. a community detection algo.scc.\r\n\r\nAccording to the [documentation][1] algo.scc has a parameter ```write``` which  \r\n\r\n&gt; Specifies if the result should be written back as a node property.\r\n\r\n\r\nHowever when I run it with ```write``` set to ```false```\r\n```\r\nCALL algo.scc(&#39;Employee&#39;,&#39;MANAGES&#39;, {write:false})\r\nYIELD loadMillis, computeMillis, writeMillis, setCount, maxSetSize, minSetSize;\r\n```\r\nI get the following error:\r\n\r\n```Neo.ClientError.Security.Forbidden: Write operations are not allowed for user &#39;dm00221&#39; with roles [reader].```\r\n\r\nI couldn&#39;t find any examples in documentation with ```{write:false}``` option. \r\nWhat am I doing wrong?\r\n\r\n  [1]: https://neo4j.com/docs/graph-algorithms/current/labs-algorithms/strongly-connected-components/","link":"https://stackoverflow.com/questions/60344810/prevent-writing-back-for-neo4j-algo","title":"Prevent writing back for Neo4j algo"},{"tags":["neo4j","cypher"],"answers":[{"tags":[],"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1582312686,"creation_date":1582312686,"answer_id":60344988,"question_id":60343771,"share_link":"https://stackoverflow.com/a/60344988","body_markdown":"Since the `MAX` aggregation function does not return the *node* with the max value, you should not use it. Otherwise, you&#39;d have to test the size of every animal *twice* to get both the max value and the node of interest (as you discovered).\r\n\r\nYou can instead use the `REDUCE` function to test the size of every animal just once:\r\n\r\n    MATCH (n:Animal)\r\n    WITH n.species AS species, COLLECT(n) as ns\r\n    RETURN species, REDUCE(s = {size: -1}, a IN ns |\r\n      CASE WHEN a.size &gt; s.size THEN {size: a.size, a: a} ELSE s END\r\n    ) AS result;","link":"https://stackoverflow.com/questions/60343771/return-node-after-aggregation-in-cypher/60344988#60344988","title":"Return node after aggregation in Cypher"}],"owner":{"reputation":649,"user_id":3545219,"user_type":"registered","accept_rate":67,"profile_image":"https://graph.facebook.com/1256244544/picture?type=large","display_name":"Loheek","link":"https://stackoverflow.com/users/3545219/loheek"},"last_editor":{"reputation":649,"user_id":3545219,"user_type":"registered","accept_rate":67,"profile_image":"https://graph.facebook.com/1256244544/picture?type=large","display_name":"Loheek","link":"https://stackoverflow.com/users/3545219/loheek"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60344988,"answer_count":1,"score":0,"last_activity_date":1582312686,"creation_date":1582306755,"last_edit_date":1582311203,"question_id":60343771,"share_link":"https://stackoverflow.com/q/60343771","body_markdown":"I am having a hard time understanding how to properly use aggregate functions in Cypher.\r\n\r\nLet say I have nodes labelled as `Animal`, with properties `size` and `species`.\r\nFor each species, I want to get the largest.\r\n\r\nSo far, I understand I can do it with the following :\r\n\r\n    MATCH (n:Animal)\r\n    WITH n.species as species, max(n.size) as size\r\n    RETURN species, size\r\n\r\nAnd I will effectively get the largest sizes with corresponding species.\r\n\r\nBut how can I get the nodes instead of species ?\r\n\r\nI can&#39;t return `n` because of the `WITH` statement, and I can&#39;t inject it into the `WITH` because it will break `species` aggregation.\r\n\r\nI know this question has already been asked a few times, but the different solutions I came accross were case-specific and used relations\r\n\r\nAny advice is very welcome\r\n\r\nEDIT: I finally made it work with :\r\n\r\n    MATCH (n:Animal)\r\n    WITH n.species as species, max(n.size) as size, collect(n) as ns\r\n    UNWIND ns as n\r\n    WITH n\r\n    WHERE n.size = size\r\n    RETURN n\r\n\r\nIs this the Cypher-way to settle things ? Seems a bit verbose and not efficient (all nodes are fetched here) to me, isn&#39;t there a more straightforward option ?","link":"https://stackoverflow.com/questions/60343771/return-node-after-aggregation-in-cypher","title":"Return node after aggregation in Cypher"},{"tags":["c#","neo4j","cypher"],"answers":[{"tags":[],"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1582313340,"creation_date":1582313340,"answer_id":60345126,"question_id":60342569,"share_link":"https://stackoverflow.com/a/60345126","body_markdown":"The best way to avoid these kinds of quotation-clash issues is to use a [parameter](https://neo4j.com/docs/cypher-manual/current/syntax/parameters/) to pass the string value to the Cypher code instead of attempting to hard-code the string in the code. This approach is preferable anyway, as it leads to code that is more readable and potentially more efficient, and avoids Cypher-injection attacks.\r\n\r\nFor example, if the string is passed as a `name` parameter, your code would be simply:\r\n\r\n    var query2Neo = (&quot;CREATE (p:Person { samAccountName: $name })&quot;);\r\n","link":"https://stackoverflow.com/questions/60342569/optimizing-cypher-query-to-handle-quote-chars/60345126#60345126","title":"Optimizing Cypher Query to handle quote chars"}],"owner":{"reputation":177,"user_id":3091744,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/277365aa6e544c174a5e771c3f754b1b?s=128&d=identicon&r=PG&f=1","display_name":"CodeCase","link":"https://stackoverflow.com/users/3091744/codecase"},"last_editor":{"reputation":177,"user_id":3091744,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/277365aa6e544c174a5e771c3f754b1b?s=128&d=identicon&r=PG&f=1","display_name":"CodeCase","link":"https://stackoverflow.com/users/3091744/codecase"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60345126,"answer_count":1,"score":0,"last_activity_date":1582562212,"creation_date":1582301878,"last_edit_date":1582562212,"question_id":60342569,"share_link":"https://stackoverflow.com/q/60342569","body_markdown":"Im using the following Query to create a node in neo4j v4 with a Name, but Im having trouble if the name cotains a &#39; \r\nHow should I rewrite that Query so that we can use Names wich contains a &#39; ?\r\n\r\n     string name = &quot;&#214;&#246;&#220;&#252;&#196;&#228;&#223;&#181;@€-&amp;&#39;.&quot;;\r\n     var query2Neo = &quot;CREATE (p:Person { samAccountName: $name })&quot;;\r\n\r\n \r\n\r\nthank you\r\n\r\n","link":"https://stackoverflow.com/questions/60342569/optimizing-cypher-query-to-handle-quote-chars","title":"Optimizing Cypher Query to handle quote chars"},{"tags":["neo4j","cypher"],"answers":[{"tags":[],"owner":{"reputation":1210,"user_id":1734996,"user_type":"registered","accept_rate":85,"profile_image":"https://i.stack.imgur.com/MaqL4.png?s=128&g=1","display_name":"Graphileon","link":"https://stackoverflow.com/users/1734996/graphileon"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1582291644,"creation_date":1582291644,"answer_id":60339619,"question_id":60338510,"share_link":"https://stackoverflow.com/a/60339619","body_markdown":"    With 3 as numberOfLabels\r\n    Match (n) where size(labels(n)) &gt;= numberOfLabels","link":"https://stackoverflow.com/questions/60338510/how-to-find-all-nodes-with-greater-or-equal-n-labels/60339619#60339619","title":"How to find all nodes with greater or equal n labels?"}],"owner":{"reputation":21,"user_id":12023845,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e5738a283e2d60bd51e9b9709d692d06?s=128&d=identicon&r=PG&f=1","display_name":"CB_Dev","link":"https://stackoverflow.com/users/12023845/cb-dev"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60339619,"answer_count":1,"score":0,"last_activity_date":1582291644,"creation_date":1582287471,"question_id":60338510,"share_link":"https://stackoverflow.com/q/60338510","body_markdown":"I need to find all nodes with greater or equal n labels (without knowing any label). Is there a simple way to do this using Cypher? ","link":"https://stackoverflow.com/questions/60338510/how-to-find-all-nodes-with-greater-or-equal-n-labels","title":"How to find all nodes with greater or equal n labels?"},{"tags":["graph","neo4j"],"owner":{"reputation":13,"user_id":10911424,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-sr7i2LfDn8s/AAAAAAAAAAI/AAAAAAAABb8/9bCdo1ILBg8/photo.jpg?sz=128","display_name":"Kirill Kobyshev","link":"https://stackoverflow.com/users/10911424/kirill-kobyshev"},"last_editor":{"reputation":13,"user_id":10911424,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-sr7i2LfDn8s/AAAAAAAAAAI/AAAAAAAABb8/9bCdo1ILBg8/photo.jpg?sz=128","display_name":"Kirill Kobyshev","link":"https://stackoverflow.com/users/10911424/kirill-kobyshev"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1582470129,"creation_date":1582281067,"last_edit_date":1582470129,"question_id":60336728,"share_link":"https://stackoverflow.com/q/60336728","body_markdown":"I would like to have a resistance distance function in Neo4j graph database.\r\nAnd it was nice to have algorithm to find n nearest neighbours by this distance function, it can make my recommender system much more powerful then simple distance function, because with that function I consider the common context of user interests instead of each interest separately.\r\n\r\nResistance distance is computed like common resistance in electric network with sequence and parallel connections, each edge is represented as a resistor element and weight is a resistance value. And the term &quot;resistance distance&quot; exists in the graph theory http://mathworld.wolfram.com/ResistanceDistance.html.\r\n","link":"https://stackoverflow.com/questions/60336728/is-resistance-distance-function-implemented-in-some-neo4j-plugin","title":"Is resistance distance function implemented in some Neo4j plugin?"},{"tags":["c#",".net","neo4j","neo4jclient"],"comments":[{"owner":{"reputation":5630,"user_id":2266,"user_type":"registered","accept_rate":90,"profile_image":"https://www.gravatar.com/avatar/aa64f5e61bb8cbcc9d10372256580364?s=128&d=identicon&r=PG","display_name":"Chris Skardon","link":"https://stackoverflow.com/users/2266/chris-skardon"},"edited":false,"score":0,"creation_date":1582550376,"post_id":60335266,"comment_id":106804703,"link":"https://stackoverflow.com/questions/60335266/how-to-deserialise-objects-with-the-correct-type-of-a-node-from-neo4j#comment106804703_60335266"},{"owner":{"reputation":5630,"user_id":2266,"user_type":"registered","accept_rate":90,"profile_image":"https://www.gravatar.com/avatar/aa64f5e61bb8cbcc9d10372256580364?s=128&d=identicon&r=PG","display_name":"Chris Skardon","link":"https://stackoverflow.com/users/2266/chris-skardon"},"edited":false,"score":0,"creation_date":1582560962,"post_id":60335266,"comment_id":106810794,"link":"https://stackoverflow.com/questions/60335266/how-to-deserialise-objects-with-the-correct-type-of-a-node-from-neo4j#comment106810794_60335266"},{"owner":{"reputation":665,"user_id":2963755,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/cad00d08e68018db8b2c423beb946e1f?s=128&d=identicon&r=PG&f=1","display_name":"TobiasW","link":"https://stackoverflow.com/users/2963755/tobiasw"},"reply_to_user":{"reputation":5630,"user_id":2266,"user_type":"registered","accept_rate":90,"profile_image":"https://www.gravatar.com/avatar/aa64f5e61bb8cbcc9d10372256580364?s=128&d=identicon&r=PG","display_name":"Chris Skardon","link":"https://stackoverflow.com/users/2266/chris-skardon"},"edited":false,"score":0,"creation_date":1582617988,"post_id":60335266,"comment_id":106829552,"link":"https://stackoverflow.com/questions/60335266/how-to-deserialise-objects-with-the-correct-type-of-a-node-from-neo4j#comment106829552_60335266"}],"answers":[{"tags":[],"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582325980,"creation_date":1582325980,"answer_id":60347280,"question_id":60335266,"share_link":"https://stackoverflow.com/a/60347280","body_markdown":"Since neo4j&#39;s legacy REST API will be dropped in neo4j 4.0, I assume you are planning on using the [Cypher transaction API](https://neo4j.com/docs/http-api/current/actions/).\r\n\r\nWhen you pass a Cypher statement to the transactional API, you can specify the [graph](https://neo4j.com/docs/http-api/current/actions/return-results-in-graph-format/#http-api-return-results-in-graph-format) option in the `resultDataContents` list. That will cause the response to include the node labels and relationship types.","link":"https://stackoverflow.com/questions/60335266/how-to-deserialise-objects-with-the-correct-type-of-a-node-from-neo4j/60347280#60347280","title":"How to deserialise objects with the correct type of a node from Neo4j?"}],"owner":{"reputation":665,"user_id":2963755,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/cad00d08e68018db8b2c423beb946e1f?s=128&d=identicon&r=PG&f=1","display_name":"TobiasW","link":"https://stackoverflow.com/users/2963755/tobiasw"},"comment_count":3,"delete_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1582325980,"creation_date":1582275887,"question_id":60335266,"share_link":"https://stackoverflow.com/q/60335266","body_markdown":"We have paths of nodes which represent a set of activities which can happen linear or also parallel. These paths include multiple different types of nodes. Now I&#39;m building a REST Api to get all the nodes of a path and display them on my frontend.\r\n\r\nSince all this happens in c# I have to get the type so that I can create my object accordingly. It&#39;s not a problem to call cyphers which return me a specific type, since I can simply do it like this : \r\n```\r\n        public List&lt;Todo&gt; Get()\r\n        {\r\n            var query = client.Cypher\r\n                                    .Match(&quot;(n: Todo)&quot;)\r\n                                    .Return((n) =&gt; n.As&lt;Todo&gt;());\r\n            \r\n            return query.Results.ToList();\r\n        }\r\n```\r\n\r\nBut how would I approach this when I get multiple different types from my cypher?","link":"https://stackoverflow.com/questions/60335266/how-to-deserialise-objects-with-the-correct-type-of-a-node-from-neo4j","title":"How to deserialise objects with the correct type of a node from Neo4j?"},{"tags":["neo4j"],"answers":[{"comments":[{"owner":{"reputation":126,"user_id":10959695,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-qqrXpETz3E8/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaWM31CCyJG1_YL4UQNNK8I_rqY0g/mo/photo.jpg?sz=128","display_name":"parneeti sood","link":"https://stackoverflow.com/users/10959695/parneeti-sood"},"edited":false,"score":0,"creation_date":1582524253,"post_id":60347531,"comment_id":106793128,"link":"https://stackoverflow.com/questions/60333481/neo4j-streams-publish-procedure-not-found-error/60347531#comment106793128_60347531"}],"tags":[],"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582327965,"creation_date":1582327965,"answer_id":60347531,"question_id":60333481,"share_link":"https://stackoverflow.com/a/60347531","body_markdown":"The white listing [documentation](https://neo4j.com/docs/operations-manual/current/security/securing-extensions/#white-listing) states:\r\n\r\n&gt; The list may contain both fully-qualified procedure names, and partial\r\n&gt; names with the wildcard `*`.\r\n\r\nTry using the wildcard character &quot;*&quot; in the list:\r\n\r\n    dbms.security.procedures.whitelist=streams.*,apoc.coll.*","link":"https://stackoverflow.com/questions/60333481/neo4j-streams-publish-procedure-not-found-error/60347531#60347531","title":"Neo4j streams.publish procedure not found error"}],"owner":{"reputation":126,"user_id":10959695,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-qqrXpETz3E8/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaWM31CCyJG1_YL4UQNNK8I_rqY0g/mo/photo.jpg?sz=128","display_name":"parneeti sood","link":"https://stackoverflow.com/users/10959695/parneeti-sood"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1582327965,"creation_date":1582267918,"question_id":60333481,"share_link":"https://stackoverflow.com/q/60333481","body_markdown":"**CALL streams.publish(&#39;topic&#39;, &#39;hello_message&#39;)**\r\n\r\nResults into following error:\r\n\r\nTheir is no procedure with the name streams.publish registered for this database instance. Please ensure you have spelled the procedure name correctly and that the procedure is properly deployed.\r\n\r\nNeo4j version: 3.5.14\r\n\r\nNeo4j.conf includes:\r\n\r\n**dbms.security.procedures.whitelist**=streams.*, Apoc.coll.*\r\n\r\nAlso, Installed plugin neo4j.streams-3.5.5\r\n","link":"https://stackoverflow.com/questions/60333481/neo4j-streams-publish-procedure-not-found-error","title":"Neo4j streams.publish procedure not found error"},{"tags":["neo4j","cypher"],"answers":[{"comments":[{"owner":{"reputation":3,"user_id":12936736,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0de139e876d9a93b1fb68a919bd5f6ab?s=128&d=identicon&r=PG&f=1","display_name":"KJansma","link":"https://stackoverflow.com/users/12936736/kjansma"},"edited":false,"score":0,"creation_date":1582300729,"post_id":60333780,"comment_id":106742060,"link":"https://stackoverflow.com/questions/60333040/neo4j-and-clause/60333780#comment106742060_60333780"}],"tags":[],"owner":{"reputation":1210,"user_id":1734996,"user_type":"registered","accept_rate":85,"profile_image":"https://i.stack.imgur.com/MaqL4.png?s=128&g=1","display_name":"Graphileon","link":"https://stackoverflow.com/users/1734996/graphileon"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582269332,"creation_date":1582269332,"answer_id":60333780,"question_id":60333040,"share_link":"https://stackoverflow.com/a/60333780","body_markdown":"You use r twice\r\n\r\nTry :Role instead of r:Role","link":"https://stackoverflow.com/questions/60333040/neo4j-and-clause/60333780#60333780","title":"Neo4j AND clause"},{"comments":[{"owner":{"reputation":3,"user_id":12936736,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0de139e876d9a93b1fb68a919bd5f6ab?s=128&d=identicon&r=PG&f=1","display_name":"KJansma","link":"https://stackoverflow.com/users/12936736/kjansma"},"edited":false,"score":0,"creation_date":1582300827,"post_id":60335293,"comment_id":106742120,"link":"https://stackoverflow.com/questions/60333040/neo4j-and-clause/60335293#comment106742120_60335293"},{"owner":{"reputation":308,"user_id":12251717,"user_type":"registered","profile_image":"https://i.stack.imgur.com/2ImiE.jpg?s=128&g=1","display_name":"TheTeacher","link":"https://stackoverflow.com/users/12251717/theteacher"},"reply_to_user":{"reputation":3,"user_id":12936736,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0de139e876d9a93b1fb68a919bd5f6ab?s=128&d=identicon&r=PG&f=1","display_name":"KJansma","link":"https://stackoverflow.com/users/12936736/kjansma"},"edited":false,"score":0,"creation_date":1582360481,"post_id":60335293,"comment_id":106757552,"link":"https://stackoverflow.com/questions/60333040/neo4j-and-clause/60335293#comment106757552_60335293"}],"tags":[],"owner":{"reputation":308,"user_id":12251717,"user_type":"registered","profile_image":"https://i.stack.imgur.com/2ImiE.jpg?s=128&g=1","display_name":"TheTeacher","link":"https://stackoverflow.com/users/12251717/theteacher"},"last_editor":{"reputation":308,"user_id":12251717,"user_type":"registered","profile_image":"https://i.stack.imgur.com/2ImiE.jpg?s=128&g=1","display_name":"TheTeacher","link":"https://stackoverflow.com/users/12251717/theteacher"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1582360500,"last_edit_date":1582360500,"creation_date":1582275986,"answer_id":60335293,"question_id":60333040,"share_link":"https://stackoverflow.com/a/60335293","body_markdown":"```\r\nMATCH (p:Person)-[:HAS_ROLE]-&gt;(:Role{name:&quot;Manager&quot;})\r\nWHERE (p)-[:HAS_ROLE]-&gt;(:Role{name:&quot;QA&quot;})\r\nRETURN p\r\n```\r\nthis above query can be used if its just two Roles.But if want try for Many,then\r\n```\r\nMATCH (p:Person)-[:HAS_ROLE]-&gt;(r:Role)\r\nWITH p, COLLECT(r.name) as roles\r\nWHERE ALL (x IN [&quot;Manager&quot;,&quot;QA&quot;] WHERE x IN roles)\r\nRETURN p\r\n```\r\nyou can update this ```[&quot;Manager&quot;,&quot;QA&quot;]``` with all the roles you want to check for a person.","link":"https://stackoverflow.com/questions/60333040/neo4j-and-clause/60335293#60335293","title":"Neo4j AND clause"}],"owner":{"reputation":3,"user_id":12936736,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0de139e876d9a93b1fb68a919bd5f6ab?s=128&d=identicon&r=PG&f=1","display_name":"KJansma","link":"https://stackoverflow.com/users/12936736/kjansma"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60335293,"answer_count":2,"score":0,"last_activity_date":1582360500,"creation_date":1582265511,"question_id":60333040,"share_link":"https://stackoverflow.com/q/60333040","body_markdown":"New to Neo4j and looking for AND clause in a Cypher query.\r\nSuppose I have Person nodes and Role nodes. A person can have multiple Roles (Manager, Leader, IC, QA,...) \r\nI want to find the set of People who have both the roles of Manager and QA. \r\n\r\nSomethng like:\r\nMATCH (p:Person)-[:HAS_ROLE]-&gt;(r:Role{name:&quot;Manager&quot;}) AND (p)-[:HAS_ROLE]-&gt;(r:Role{name:&quot;QA&quot;}) \r\nRETURN p","link":"https://stackoverflow.com/questions/60333040/neo4j-and-clause","title":"Neo4j AND clause"},{"tags":["spring-boot","neo4j","neo4j-ogm"],"answers":[{"tags":[],"owner":{"reputation":209,"user_id":295500,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d1e45039260659352b262427db057911?s=128&d=identicon&r=PG","display_name":"ahmkara","link":"https://stackoverflow.com/users/295500/ahmkara"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1582271866,"creation_date":1582271866,"answer_id":60334330,"question_id":60332869,"share_link":"https://stackoverflow.com/a/60334330","body_markdown":"You should use `@SpringBootTest` over your tests. `@DataNeo4jTest` doesn&#39;t load any required services.","link":"https://stackoverflow.com/questions/60332869/unsatisfieddependencyexception-for-dataneo4jtest/60334330#60334330","title":"UnsatisfiedDependencyException for @DataNeo4jTest"}],"owner":{"reputation":179,"user_id":10912170,"user_type":"registered","profile_image":"https://i.stack.imgur.com/UFFQY.jpg?s=128&g=1","display_name":"Sha","link":"https://stackoverflow.com/users/10912170/sha"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60334330,"answer_count":1,"score":0,"last_activity_date":1582271866,"creation_date":1582264380,"question_id":60332869,"share_link":"https://stackoverflow.com/q/60332869","body_markdown":"I try to test my code with Spring-Boot Neo4j but I&#39;ve got an error like `org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;com.sha.neo4j.service.UserServiceTest&#39;: Unsatisfied dependency expressed through field &#39;userService&#39;; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;com.sha.neo4j.service.UserService&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n`\r\n\r\nDependencies;\r\n\r\n    dependencies {\r\n    \timplementation &#39;org.springframework.boot:spring-boot-starter-data-neo4j&#39;\r\n    \timplementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n        compileOnly &#39;org.projectlombok:lombok&#39;\r\n    \tannotationProcessor &#39;org.projectlombok:lombok&#39;\r\n    \ttestImplementation(&#39;org.springframework.boot:spring-boot-starter-test&#39;) {\r\n    \t\texclude group: &#39;org.junit.vintage&#39;, module: &#39;junit-vintage-engine&#39;\r\n    \t}\r\n        testImplementation &#39;org.neo4j.test:neo4j-harness:4.0.0&#39;\r\n        testImplementation &#39;org.neo4j:neo4j-ogm-embedded-driver:3.2.8&#39;\r\n    }\r\n\r\nAnd test class;\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @DataNeo4jTest\r\n    public class UserServiceTest\r\n    {\r\n        @Autowired\r\n        private UserService userService;\r\n    \r\n        @Test\r\n        public void testIt()\r\n        {\r\n            User user = new User();\r\n            user.setLastName(&quot;Test&quot;);\r\n            user.setName(&quot;Test&quot;);\r\n            userService.saveUser(user);\r\n    \r\n            List&lt;User&gt; users = userService.findAll();\r\n    \r\n            assertThat(users).hasSize(1);\r\n        }\r\n    }\r\n\r\nIn here, I&#39;ve jus try to test above code with embedded driver but I&#39;ve got an error like above. I don&#39;t have a specific properties (test application.properties) for test. Test works with neo4j-desktop bolt driver.\r\n\r\nIs there any suggestion?","link":"https://stackoverflow.com/questions/60332869/unsatisfieddependencyexception-for-dataneo4jtest","title":"UnsatisfiedDependencyException for @DataNeo4jTest"},{"tags":["database","amazon-ec2","neo4j","nosql","amazon-neptune"],"comments":[{"owner":{"reputation":1529,"user_id":3069919,"user_type":"registered","profile_image":"https://i.stack.imgur.com/ixwqv.jpg?s=128&g=1","display_name":"big-K","link":"https://stackoverflow.com/users/3069919/big-k"},"edited":false,"score":0,"creation_date":1582326867,"post_id":60331890,"comment_id":106752287,"link":"https://stackoverflow.com/questions/60331890/what-database-is-better-neo4j-or-amazon-neptune#comment106752287_60331890"}],"owner":{"reputation":1,"user_id":9424614,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-yfCJdBIlp6Y/AAAAAAAAAAI/AAAAAAAAGNw/KD8zhF8pvyo/photo.jpg?sz=128","display_name":"juan camilo caviedes","link":"https://stackoverflow.com/users/9424614/juan-camilo-caviedes"},"last_editor":{"reputation":1,"user_id":9424614,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-yfCJdBIlp6Y/AAAAAAAAAAI/AAAAAAAAGNw/KD8zhF8pvyo/photo.jpg?sz=128","display_name":"juan camilo caviedes","link":"https://stackoverflow.com/users/9424614/juan-camilo-caviedes"},"comment_count":1,"delete_vote_count":1,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1582275516,"answer_count":0,"score":-3,"last_activity_date":1582261667,"creation_date":1582256493,"last_edit_date":1582261667,"question_id":60331890,"share_link":"https://stackoverflow.com/q/60331890","body_markdown":"to start in a small project. What db is better? \r\nin term of\r\n\r\n 1. learning between  SPARQL and Cypher.\r\n 2. price Neo4j in EC2 or Amazon Neptune service.\r\n 3. comunity for resolve problems.\r\n","link":"https://stackoverflow.com/questions/60331890/what-database-is-better-neo4j-or-amazon-neptune","closed_reason":"Opinion-based","title":"what database is better neo4j or amazon neptune?"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1582254183,"post_id":60330883,"comment_id":106722532,"link":"https://stackoverflow.com/questions/60330883/neo4j-throws-forseticlient-exceptions-for-commands-run-in-same-transaction#comment106722532_60330883"},{"owner":{"reputation":274,"user_id":2555444,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e4f72aa7d5fa4f6ef91e565ee606300a?s=128&d=identicon&r=PG","display_name":"Rama","link":"https://stackoverflow.com/users/2555444/rama"},"reply_to_user":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1582306911,"post_id":60330883,"comment_id":106745323,"link":"https://stackoverflow.com/questions/60330883/neo4j-throws-forseticlient-exceptions-for-commands-run-in-same-transaction#comment106745323_60330883"}],"answers":[{"tags":[],"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582253831,"creation_date":1582253831,"answer_id":60331556,"question_id":60330883,"share_link":"https://stackoverflow.com/a/60331556","body_markdown":"See [this article](https://neo4j.com/developer/kb/explanation-of-error-deadlockdetectedexception-forseticlient-0-cant-acquire-exclusivelock/) for an illustration of the deadlock situation that can cause this error.\r\n\r\nWhen you `DETACH DELETE` a node, that causes an attempt to delete that node and all its relationships, which causes an attempt to place a Write-Lock on each of them. In addition, a relationship deletion attempt causes an attempt to place a Write-Lock on each of its end nodes.\r\n\r\nHere is one sequence of events that can cause a deadlock with your 2 queries:\r\n\r\n   1. Transaction 1 starts executing `DETACH DELETE member`. This starts out by placing a Write-Lock on the `member` node.\r\n   2. Transaction 2 starts executing `DETACH DELETE lag`. This starts out by placing a Write-Lock on the `lag` node.\r\n   3. Transaction 1 starts deletion of the relationships of the `member` node, which in turn causes an attempt to Write-Lock the same `lag` node that Transaction 2 already has a lock on.\r\n   4. Transaction 2 starts deletion of the relationships of the `lag` node, which in turn causes an attempt to Write-Lock the same `member` node that Transaction 1 already has a lock on.\r\n\r\nThe result is a deadlock.\r\n\r\nAs the above article states, you can retry queries that experience these kinds of `TransientException`s, since it is unlikely that a retry will also experience a deadlock.","link":"https://stackoverflow.com/questions/60330883/neo4j-throws-forseticlient-exceptions-for-commands-run-in-same-transaction/60331556#60331556","title":"Neo4J throws ForsetiClient exceptions for commands run in same transaction"},{"comments":[{"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1582568230,"post_id":60348011,"comment_id":106814427,"link":"https://stackoverflow.com/questions/60330883/neo4j-throws-forseticlient-exceptions-for-commands-run-in-same-transaction/60348011#comment106814427_60348011"}],"tags":[],"owner":{"reputation":274,"user_id":2555444,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e4f72aa7d5fa4f6ef91e565ee606300a?s=128&d=identicon&r=PG","display_name":"Rama","link":"https://stackoverflow.com/users/2555444/rama"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1582332616,"creation_date":1582332616,"answer_id":60348011,"question_id":60330883,"share_link":"https://stackoverflow.com/a/60348011","body_markdown":"Found the root cause. When 2 different threads try to run same Neo4J query (hence different TX), above deadlocks are seen. Fixing them to lock properly between threads fixed the issue.","link":"https://stackoverflow.com/questions/60330883/neo4j-throws-forseticlient-exceptions-for-commands-run-in-same-transaction/60348011#60348011","title":"Neo4J throws ForsetiClient exceptions for commands run in same transaction"}],"owner":{"reputation":274,"user_id":2555444,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e4f72aa7d5fa4f6ef91e565ee606300a?s=128&d=identicon&r=PG","display_name":"Rama","link":"https://stackoverflow.com/users/2555444/rama"},"last_editor":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1582332616,"creation_date":1582248114,"last_edit_date":1582253676,"question_id":60330883,"share_link":"https://stackoverflow.com/q/60330883","body_markdown":"I have a strange issue thats seen at random times for following 2 queries.\r\n\r\n    MATCH (n:TempLagNode {lag_sys_id: &quot;00:05:9A:30:A0:22&quot;})-[:HAS_TEMP_L2_LAG_INTF ]-&gt;(lag:TempL2LagInterface {oper_key: 222})\r\n      -[:HAS_TEMP_L2_LAG_MBR_INTF ]-&gt;(member:TempL2LagMemberInterface {oper_port: 1})\r\n    DETACH DELETE member\r\n\r\n    MATCH (n:TempLagNode)-[:HAS_TEMP_L2_LAG_INTF]-&gt;(lag:TempL2LagInterface)\r\n    WHERE size((lag)--&gt;())=0 AND size((lag)&lt;--())&lt;=2\r\n    DETACH DELETE lag\r\n\r\nBoth the commands are run in same transaction. But running above sequence multiple times leads to following exception (it passes mostly but fails some times):\r\n\r\n    java.lang.RuntimeException: org.neo4j.driver.v1.exceptions.TransientException: ForsetiClient[4] can&#39;t acquire ExclusiveLock{owner=ForsetiClient[1]} on NODE(205), because holders of that lock are waiting for ForsetiClient[4]. 410  Wait list:ExclusiveLock[411 Client[1] waits for [4]]\r\n\r\nCan someone comment whats causing above?","link":"https://stackoverflow.com/questions/60330883/neo4j-throws-forseticlient-exceptions-for-commands-run-in-same-transaction","title":"Neo4J throws ForsetiClient exceptions for commands run in same transaction"},{"tags":["graph","neo4j","bigdata","orientdb"],"comments":[{"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1582247403,"post_id":60329862,"comment_id":106721263,"link":"https://stackoverflow.com/questions/60329862/how-to-export-store-all-paths-in-graph#comment106721263_60329862"},{"owner":{"reputation":85,"user_id":3544113,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/d1a8f6cafd5af7b91a1613079d9d50f8?s=128&d=identicon&r=PG&f=1","display_name":"Vineeth","link":"https://stackoverflow.com/users/3544113/vineeth"},"reply_to_user":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1582309711,"post_id":60329862,"comment_id":106746488,"link":"https://stackoverflow.com/questions/60329862/how-to-export-store-all-paths-in-graph#comment106746488_60329862"}],"owner":{"reputation":85,"user_id":3544113,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/d1a8f6cafd5af7b91a1613079d9d50f8?s=128&d=identicon&r=PG&f=1","display_name":"Vineeth","link":"https://stackoverflow.com/users/3544113/vineeth"},"last_editor":{"reputation":85,"user_id":3544113,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/d1a8f6cafd5af7b91a1613079d9d50f8?s=128&d=identicon&r=PG&f=1","display_name":"Vineeth","link":"https://stackoverflow.com/users/3544113/vineeth"},"comment_count":2,"delete_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1582309657,"creation_date":1582240019,"last_edit_date":1582309657,"question_id":60329862,"share_link":"https://stackoverflow.com/q/60329862","body_markdown":"I have a read-heavy graph with a million nodes and 100 million edges. My use case is to fetch all paths (depth 2, 3 and 4) paths between any two nodes. I tried doing this in Neo4j, OrientDB, and Postgres. Though it works in all three databases, I&#39;m facing the following issues.\r\n\r\n - Not very fast. \r\n - Added slowness for supernodes. \r\n - Unable to do pagination/sorting effectively.\r\n\r\nOne way to address all the issues is by pre-calculating all the paths. What is the best way to do this pre-calculation effectively and where store these paths? \r\n(Also, how to handle changes in the graph?)\r\n\r\n","link":"https://stackoverflow.com/questions/60329862/how-to-export-store-all-paths-in-graph","title":"How to export/store all paths in graph"},{"tags":["node.js","neo4j","graphql","graphql-js","grandstack"],"owner":{"reputation":27,"user_id":11562724,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-Y2h0MjKUk34/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdD8Bx-v9qtpygqvvEY4PqDJvV7qA/mo/photo.jpg?sz=128","display_name":"techexplorer","link":"https://stackoverflow.com/users/11562724/techexplorer"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1582212097,"creation_date":1582212097,"question_id":60323211,"share_link":"https://stackoverflow.com/q/60323211","body_markdown":"I have nodes like below in neo4j\r\n```\r\n(a:Node{name:&quot;a&quot;})-[HAS_CONNECTION]-&gt;(b:Node{name:&quot;b&quot;})\r\n(a:Node{name:&quot;a&quot;})-[HAS_CONNECTION]-&gt;(b:Node{name:&quot;c&quot;})\r\n(a:Node{name:&quot;a&quot;})-[HAS_CONNECTION]-&gt;(b:Node{name:&quot;d&quot;})\r\n(a:Node{name:&quot;b&quot;})-[HAS_CONNECTION]-&gt;(b:Node{name:&quot;d&quot;})\r\n(a:Node{name:&quot;x&quot;})-[HAS_NO_CONNECTION]-&gt;(b:Node{name:&quot;b&quot;})\r\n(a:Node{name:&quot;x&quot;})-[HAS_NO_CONNECTION]-&gt;(b:Node{name:&quot;c&quot;})\r\n(a:Node{name:&quot;y&quot;})-[HAS_NO_CONNECTION]-&gt;(b:Node{name:&quot;d&quot;})\r\n(a:Node{name:&quot;y&quot;})-[HAS_NO_CONNECTION]-&gt;(b:Node{name:&quot;d&quot;})\r\n```\r\n\r\n\r\nI want to get the details of the nodes that has HAS_CONNECTION relation.\r\nI can do like below with Cypher query in Neo4j\r\n\r\n```\r\nmatch (g:Node)-[HAS_CONNECTION]-&gt;(k:Node) return g,k\r\n```\r\nHow can I do the same in GraphQL??\r\nI have created the schema like this\r\n\r\n```\r\nType Node {\r\nname:String\r\nconnections:[Connection]\r\n}\r\n\r\nTpye Connection @Relation(name:&quot;HAS_CONNECTION , Direction:&quot;OUT&quot;){\r\nfrom: Node\r\nto: Node\r\n}\r\n```\r\n\r\nPassing this schema to makeAugmentedSchema in my index.js code creates a Mutation named &quot;AddNodeConnections&quot; which is working perfectly to create relationship between nodes.\r\n\r\nbut not working for queries? Can someone please advise on the query part?","link":"https://stackoverflow.com/questions/60323211/how-to-build-graphql-query-based-on-the-relationship-name-in-neo4j","title":"How to build GraphQL query based on the RELATIONSHIP name in NEO4J"},{"tags":["neo4j","cypher"],"answers":[{"tags":[],"owner":{"reputation":308,"user_id":12251717,"user_type":"registered","profile_image":"https://i.stack.imgur.com/2ImiE.jpg?s=128&g=1","display_name":"TheTeacher","link":"https://stackoverflow.com/users/12251717/theteacher"},"last_editor":{"reputation":308,"user_id":12251717,"user_type":"registered","profile_image":"https://i.stack.imgur.com/2ImiE.jpg?s=128&g=1","display_name":"TheTeacher","link":"https://stackoverflow.com/users/12251717/theteacher"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1582264897,"last_edit_date":1582264897,"creation_date":1582221642,"answer_id":60326018,"question_id":60321877,"share_link":"https://stackoverflow.com/a/60326018","body_markdown":"You can use OR logic here \r\n~~~\r\nmatch (s1:Station{crs: &#39;ADR&#39;}), (s2:Station{crs : &#39;NRW&#39;})\r\nmatch  p=shortestPath((s1)-[*1..1000]-(s2))\r\nWHERE ALL (n IN nodes(p) WHERE n:TrackLocation or n = s1 or n = s2 ) return nodes(p)\r\n~~~","link":"https://stackoverflow.com/questions/60321877/cypher-find-path-avoiding-certain-node-types-except-at-the-start-and-end/60326018#60326018","title":"Cypher find path avoiding certain node types except at the start and end"},{"tags":[],"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1582227774,"last_edit_date":1582227774,"creation_date":1582225921,"answer_id":60327022,"question_id":60321877,"share_link":"https://stackoverflow.com/a/60327022","body_markdown":"If `x` is a list, then the [list operation](https://neo4j.com/docs/cypher-manual/current/syntax/operators/#syntax-accessing-elements-in-a-list) `x[1..-1]` returns a list with the second through next-to-last elements of `x`.\r\n\r\nThis query uses that list operation to avoid testing the first and last nodes in the path:\r\n\r\n    MATCH (s1:Station), (s2:Station)\r\n    WHERE s1.crs = &#39;ADR&#39; AND s2.crs = &#39;NRW&#39;\r\n    MATCH p = shortestPath((s1)-[*..1000]-(s2))\r\n    WITH NODES(p) AS ns\r\n    WHERE ALL(n IN ns[1..-1] WHERE n:TrackLocation)\r\n    RETURN ns\r\n","link":"https://stackoverflow.com/questions/60321877/cypher-find-path-avoiding-certain-node-types-except-at-the-start-and-end/60327022#60327022","title":"Cypher find path avoiding certain node types except at the start and end"}],"owner":{"reputation":3309,"user_id":318414,"user_type":"registered","accept_rate":95,"profile_image":"https://i.stack.imgur.com/Uwaiu.jpg?s=128&g=1","display_name":"simonalexander2005","link":"https://stackoverflow.com/users/318414/simonalexander2005"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60326018,"answer_count":2,"score":0,"last_activity_date":1582264897,"creation_date":1582207880,"question_id":60321877,"share_link":"https://stackoverflow.com/q/60321877","body_markdown":"I have a graph with the following structure:\r\n\r\n`(r:Region)-[:CONTAINS]-(s:Station)-[:IS_AT]-(t:TrackLocation)-[:IS_NEXT_TO]-(t:TrackLocation)`\r\n\r\nI want to find the shortest path between two `Station`s, using only track locations. My current query is:\r\n\r\n`match (s1:Station) where s1.crs = &#39;ADR&#39; match (s2:Station) where s2.crs = &#39;NRW&#39; match  p=shortestPath((s1)-[*1..1000]-(s2)) WHERE ALL (n IN nodes(p) WHERE NOT n:Region) return nodes(p)`.\r\n\r\nThe problem is, a station can be at multiple TrackLocations; and sometimes the shortest path can go via an intermediate Station node if it thinks this is quicker than sticking to TrackLocations for the intermediate nodes. If I change the filter to `WHERE NOT n:Region AND NOT n:Station`, then of course it won&#39;t work because the start and end nodes are stations.\r\n\r\nIs there any way to adjust this query to do `(Station)-&gt; via track locations only -&gt;(Station)`?","link":"https://stackoverflow.com/questions/60321877/cypher-find-path-avoiding-certain-node-types-except-at-the-start-and-end","title":"Cypher find path avoiding certain node types except at the start and end"},{"tags":["neo4j","cypher","neo4j-apoc"],"comments":[{"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1582226640,"post_id":60318860,"comment_id":106714293,"link":"https://stackoverflow.com/questions/60318860/neo4j-javascript-api-sort-and-collect-a-unions-match#comment106714293_60318860"},{"owner":{"reputation":135,"user_id":5341632,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c004273daf4cad48c5abbbfe13fcab9c?s=128&d=identicon&r=PG&f=1","display_name":"Bruno C","link":"https://stackoverflow.com/users/5341632/bruno-c"},"reply_to_user":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1582277872,"post_id":60318860,"comment_id":106729693,"link":"https://stackoverflow.com/questions/60318860/neo4j-javascript-api-sort-and-collect-a-unions-match#comment106729693_60318860"}],"answers":[{"comments":[{"owner":{"reputation":135,"user_id":5341632,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c004273daf4cad48c5abbbfe13fcab9c?s=128&d=identicon&r=PG&f=1","display_name":"Bruno C","link":"https://stackoverflow.com/users/5341632/bruno-c"},"edited":false,"score":0,"creation_date":1582490989,"post_id":60347134,"comment_id":106786619,"link":"https://stackoverflow.com/questions/60318860/neo4j-javascript-api-sort-and-collect-a-unions-match/60347134#comment106786619_60347134"},{"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":135,"user_id":5341632,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c004273daf4cad48c5abbbfe13fcab9c?s=128&d=identicon&r=PG&f=1","display_name":"Bruno C","link":"https://stackoverflow.com/users/5341632/bruno-c"},"edited":false,"score":0,"creation_date":1582568389,"post_id":60347134,"comment_id":106814491,"link":"https://stackoverflow.com/questions/60318860/neo4j-javascript-api-sort-and-collect-a-unions-match/60347134#comment106814491_60347134"}],"tags":[],"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1582324837,"creation_date":1582324837,"answer_id":60347134,"question_id":60318860,"share_link":"https://stackoverflow.com/a/60347134","body_markdown":"In neo4j 4.0, a new [subquery](https://neo4j.com/docs/cypher-manual/current/clauses/call-subquery/#query-call-subquery) feature was added to Cypher, and it supports [post-UNION processing](https://neo4j.com/docs/cypher-manual/current/clauses/call-subquery/#subquery-post-union).\r\n\r\nYou can use that feature to do what you want. Here is the new Cypher pseudo-code:\r\n\r\n    CALL {\r\n      QUERY_1 return value as COL1, value2 as COL2\r\n      UNION\r\n      QUERY_2 return value as COL1, value2 as COL2\r\n    }\r\n    RETURN COL1, COLLECT(COL2) as SET_OF_COL2\r\n\r\n","link":"https://stackoverflow.com/questions/60318860/neo4j-javascript-api-sort-and-collect-a-unions-match/60347134#60347134","title":"neo4j javascript API: SORT and COLLECT a UNIONS MATCH"}],"owner":{"reputation":135,"user_id":5341632,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c004273daf4cad48c5abbbfe13fcab9c?s=128&d=identicon&r=PG&f=1","display_name":"Bruno C","link":"https://stackoverflow.com/users/5341632/bruno-c"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60347134,"answer_count":1,"score":0,"last_activity_date":1582324837,"creation_date":1582197900,"question_id":60318860,"share_link":"https://stackoverflow.com/q/60318860","body_markdown":"I have to run a query based on union of queries, and I have to apply COLLECT and SORT of the results \r\n(I am on neo4j 3.5)\r\n\r\nSo my starting pseudo-code is the following:\r\n```\r\nvar session = driver.session();\r\n  return session\r\n.run(&quot;QUERY_1 return value as COL1, value2 as COL2 UNION QUERY_2 return value as COL1, value2 as COL&quot;,{paramslit}) \r\n.then(result =&gt; {\r\n      session.close();\r\n\t  return result.records.map(record =&gt; { return new RESULT(...)}\r\n});\r\n    })\r\n    .catch(error =&gt; {\r\n      session.close();\r\n      throw error;\r\n    });\r\n ```\r\n\r\nMy problem is that I need to get the result of col2 as a set, so I need to apply collect to it in the cypher query; but the collect should be applied after the union because both QUERY_1 and QUERY_2 can return values for a given col1  \r\n\r\nQUERY_1 and QUERY_2 are already pretty complicated and I don&#39;t think there is a way to get the output of those queries with a single query without UNION\r\n\r\nFor cypher only code I know that there is the **apoc.cypher.run**\r\nbut I have not been able to make it work as expected within the **session.run** code","link":"https://stackoverflow.com/questions/60318860/neo4j-javascript-api-sort-and-collect-a-unions-match","title":"neo4j javascript API: SORT and COLLECT a UNIONS MATCH"},{"tags":["neo4j","cypher"],"answers":[{"comments":[{"owner":{"reputation":280,"user_id":468334,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/490b42776dcf869a0401b4ac55d9ec26?s=128&d=identicon&r=PG","display_name":"jjg","link":"https://stackoverflow.com/users/468334/jjg"},"edited":false,"score":0,"creation_date":1582206337,"post_id":60320945,"comment_id":106703316,"link":"https://stackoverflow.com/questions/60318630/neo4j-where-in-queries/60320945#comment106703316_60320945"},{"owner":{"reputation":308,"user_id":12251717,"user_type":"registered","profile_image":"https://i.stack.imgur.com/2ImiE.jpg?s=128&g=1","display_name":"TheTeacher","link":"https://stackoverflow.com/users/12251717/theteacher"},"reply_to_user":{"reputation":280,"user_id":468334,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/490b42776dcf869a0401b4ac55d9ec26?s=128&d=identicon&r=PG","display_name":"jjg","link":"https://stackoverflow.com/users/468334/jjg"},"edited":false,"score":1,"creation_date":1582215924,"post_id":60320945,"comment_id":106709119,"link":"https://stackoverflow.com/questions/60318630/neo4j-where-in-queries/60320945#comment106709119_60320945"}],"tags":[],"owner":{"reputation":308,"user_id":12251717,"user_type":"registered","profile_image":"https://i.stack.imgur.com/2ImiE.jpg?s=128&g=1","display_name":"TheTeacher","link":"https://stackoverflow.com/users/12251717/theteacher"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1582204940,"creation_date":1582204940,"answer_id":60320945,"question_id":60318630,"share_link":"https://stackoverflow.com/a/60320945","body_markdown":"you need to create index on foo_id .\r\nAfter that , instead of checking in array \r\nyou can unwind that array and match like following \r\n```\r\nUNWIND [1,4,5,.....] as id \r\nMATCH (foo : Foo{foo_id:id}) \r\nRETURN foo \r\n```","link":"https://stackoverflow.com/questions/60318630/neo4j-where-in-queries/60320945#60320945","title":"Neo4j WHERE IN queries"}],"owner":{"reputation":280,"user_id":468334,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/490b42776dcf869a0401b4ac55d9ec26?s=128&d=identicon&r=PG","display_name":"jjg","link":"https://stackoverflow.com/users/468334/jjg"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1582204940,"creation_date":1582197098,"question_id":60318630,"share_link":"https://stackoverflow.com/q/60318630","body_markdown":"I&#39;m a graph DB relative n00b, have been playing with Neo4j (via Ruby ActiveRecord, but I don&#39;t think that&#39;s relevant), very much enjoying it but have found some counter-intuitive behaviour. \r\n\r\nMy problem involves getting some data from the DB, pulling it back to my Ruby code, doing some processing, then making a second query with the set of ids identified by this external processing (it is too complicated to do in the DB).  The result is an ActiveRecord query like\r\n```\r\nFoo.where(foo_id: foo_ids)...\r\n```\r\nwhich translates to a Cypher query like\r\n```\r\nMATCH (foo:Foo) WHERE foo.foo_id IN [1, 5, ...] ...\r\n```\r\nThe set of ids is largish, a few tens of thousands, and I&#39;m finding this query really rather slow.  The `foo_id` has a unique constraint, and my experience in RDBMSs shouts that it shouldn&#39;t be.  Is this just a the way things are or am I ignorant of the proper &quot;graphy&quot; way of doing things?","link":"https://stackoverflow.com/questions/60318630/neo4j-where-in-queries","title":"Neo4j WHERE IN queries"},{"tags":["neo4j","time-complexity","graph-databases","levenshtein-distance","edit-distance"],"answers":[{"tags":[],"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1582160994,"last_edit_date":1582160994,"creation_date":1582141980,"answer_id":60308200,"question_id":60303724,"share_link":"https://stackoverflow.com/a/60308200","body_markdown":"Since the [implementations](https://github.com/neo4j-contrib/neo4j-apoc-procedures/blob/4.0/src/main/java/apoc/text/Strings.java) of `apoc.text.levenshteinDistance` and `apoc.text.levenshteinSimilarity` simply rely on [org.apache.commons.text.similarity.LevenshteinDistance](https://commons.apache.org/proper/commons-text/apidocs/org/apache/commons/text/similarity/LevenshteinDistance.html) to do the calculation, the APOC library does not introduce any complexity improvements.\r\n\r\nIn any case, such a calculation should just compare 2 strings of text and should not in any way rely on the graphical nature of the DB.\r\n\r\nAnd finally, [it has been proven](https://ui.adsabs.harvard.edu/abs/2014arXiv1412.0348B/abstract) that the complexity **cannot** be improved (unless the [Strong Exponential Time Hypothesis](https://en.wikipedia.org/wiki/Exponential_time_hypothesis) is wrong).","link":"https://stackoverflow.com/questions/60303724/does-the-levenshtein-edit-distance-algorithm-perform-faster-than-onm-in-a-n/60308200#60308200","title":"Does the Levenshtein (Edit Distance) algorithm perform faster than O(n*m) in a native graph database?"}],"owner":{"reputation":21,"user_id":9050965,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0d4a5090eb403e5bf8b91635e0c3be97?s=128&d=identicon&r=PG&f=1","display_name":"Lee","link":"https://stackoverflow.com/users/9050965/lee"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":60308200,"answer_count":1,"score":1,"last_activity_date":1582160994,"creation_date":1582125973,"question_id":60303724,"share_link":"https://stackoverflow.com/q/60303724","body_markdown":"Would the Levenshtein (Edit Distance) have better time complexity in a native graph database such as Neo4j than the current limit of O(n*m)? If so, why?","link":"https://stackoverflow.com/questions/60303724/does-the-levenshtein-edit-distance-algorithm-perform-faster-than-onm-in-a-n","title":"Does the Levenshtein (Edit Distance) algorithm perform faster than O(n*m) in a native graph database?"},{"tags":["sorting","neo4j","cypher"],"comments":[{"owner":{"reputation":308,"user_id":12251717,"user_type":"registered","profile_image":"https://i.stack.imgur.com/2ImiE.jpg?s=128&g=1","display_name":"TheTeacher","link":"https://stackoverflow.com/users/12251717/theteacher"},"edited":false,"score":1,"creation_date":1582126324,"post_id":60303669,"comment_id":106671275,"link":"https://stackoverflow.com/questions/60303669/cypher-query-in-neo4j-to-order-by-some-data#comment106671275_60303669"},{"owner":{"reputation":33,"user_id":12303780,"user_type":"registered","profile_image":"https://graph.facebook.com/2795338507145908/picture?type=large","display_name":"Tsolakidis Konstantinos","link":"https://stackoverflow.com/users/12303780/tsolakidis-konstantinos"},"reply_to_user":{"reputation":308,"user_id":12251717,"user_type":"registered","profile_image":"https://i.stack.imgur.com/2ImiE.jpg?s=128&g=1","display_name":"TheTeacher","link":"https://stackoverflow.com/users/12251717/theteacher"},"edited":false,"score":0,"creation_date":1582126446,"post_id":60303669,"comment_id":106671364,"link":"https://stackoverflow.com/questions/60303669/cypher-query-in-neo4j-to-order-by-some-data#comment106671364_60303669"}],"answers":[{"tags":[],"owner":{"reputation":308,"user_id":12251717,"user_type":"registered","profile_image":"https://i.stack.imgur.com/2ImiE.jpg?s=128&g=1","display_name":"TheTeacher","link":"https://stackoverflow.com/users/12251717/theteacher"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1582126845,"creation_date":1582126845,"answer_id":60304005,"question_id":60303669,"share_link":"https://stackoverflow.com/a/60304005","body_markdown":"```\r\nMATCH (d:Drug) \r\nWHERE toLower(d.tradingName) CONTAINS toLower({0}) OR toLower(d.expire) CONTAINS \r\ntoLower({0}) \r\nWITH d , datetime(d.expire) as expiryDate\r\nRETURN (d)-[]-() ORDER BY expiryDate \r\n```","link":"https://stackoverflow.com/questions/60303669/cypher-query-in-neo4j-to-order-by-some-data/60304005#60304005","title":"Cypher Query in Neo4j to ORDER BY some data"},{"tags":[],"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582153703,"creation_date":1582153703,"answer_id":60310648,"question_id":60303669,"share_link":"https://stackoverflow.com/a/60310648","body_markdown":"This may be a slight improvement on @TheTeacher&#39;s fine answer.\r\n\r\nThe `=~` operator can be used with a regular expression to perform [case-insensitive comparisons](https://neo4j.com/docs/cypher-manual/4.0/clauses/where/#case-insensitive-regular-expressions). Also, `WITH` the clause is not needed.\r\n\r\n    WITH &quot;(?i).*&quot; + {0} + &quot;.*&quot; AS regex\r\n    MATCH (d:Drug)\r\n    WHERE d.tradingName =~ regex OR d.expire =~ regex\r\n    RETURN (d)--() ORDER BY datetime(d.expire)","link":"https://stackoverflow.com/questions/60303669/cypher-query-in-neo4j-to-order-by-some-data/60310648#60310648","title":"Cypher Query in Neo4j to ORDER BY some data"}],"owner":{"reputation":33,"user_id":12303780,"user_type":"registered","profile_image":"https://graph.facebook.com/2795338507145908/picture?type=large","display_name":"Tsolakidis Konstantinos","link":"https://stackoverflow.com/users/12303780/tsolakidis-konstantinos"},"last_editor":{"reputation":33,"user_id":12303780,"user_type":"registered","profile_image":"https://graph.facebook.com/2795338507145908/picture?type=large","display_name":"Tsolakidis Konstantinos","link":"https://stackoverflow.com/users/12303780/tsolakidis-konstantinos"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60304005,"answer_count":2,"score":0,"last_activity_date":1582153703,"creation_date":1582125831,"last_edit_date":1582126538,"question_id":60303669,"share_link":"https://stackoverflow.com/q/60303669","body_markdown":"I got a spring application with a query that looks like that.\r\n\r\n    MATCH (d:Drug) WHERE toLower(d.tradingName) CONTAINS toLower({0}) OR toLower(d.expire) CONTAINS \r\n    toLower({0}) RETURN (d)-[]-() ORDER BY d.expire\r\n\r\n\r\nd.expire is a string in my pojos so the query i posted sorts everyting alphabetical. Thats not what i want.\r\n\r\nHow is it possible to parse d.expire as a date and order the results as Dates ?","link":"https://stackoverflow.com/questions/60303669/cypher-query-in-neo4j-to-order-by-some-data","title":"Cypher Query in Neo4j to ORDER BY some data"},{"tags":["java","json","neo4j","spring-data-neo4j"],"comments":[{"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1582160930,"post_id":60299705,"comment_id":106685867,"link":"https://stackoverflow.com/questions/60299705/representing-nested-json-as-nodes-in-neo4j-sdn#comment106685867_60299705"}],"answers":[{"comments":[{"owner":{"reputation":361,"user_id":7972621,"user_type":"registered","profile_image":"https://i.stack.imgur.com/5FLJu.jpg?s=128&g=1","display_name":"Ankit Sharma","link":"https://stackoverflow.com/users/7972621/ankit-sharma"},"edited":false,"score":0,"creation_date":1582116027,"post_id":60300566,"comment_id":106664728,"link":"https://stackoverflow.com/questions/60299705/representing-nested-json-as-nodes-in-neo4j-sdn/60300566#comment106664728_60300566"},{"owner":{"reputation":718,"user_id":5881773,"user_type":"registered","accept_rate":0,"profile_image":"https://www.gravatar.com/avatar/479bdf67986817e8c9b23d53b020ba5c?s=128&d=identicon&r=PG&f=1","display_name":"Vipul","link":"https://stackoverflow.com/users/5881773/vipul"},"reply_to_user":{"reputation":361,"user_id":7972621,"user_type":"registered","profile_image":"https://i.stack.imgur.com/5FLJu.jpg?s=128&g=1","display_name":"Ankit Sharma","link":"https://stackoverflow.com/users/7972621/ankit-sharma"},"edited":false,"score":0,"creation_date":1582121073,"post_id":60300566,"comment_id":106667720,"link":"https://stackoverflow.com/questions/60299705/representing-nested-json-as-nodes-in-neo4j-sdn/60300566#comment106667720_60300566"},{"owner":{"reputation":361,"user_id":7972621,"user_type":"registered","profile_image":"https://i.stack.imgur.com/5FLJu.jpg?s=128&g=1","display_name":"Ankit Sharma","link":"https://stackoverflow.com/users/7972621/ankit-sharma"},"edited":false,"score":0,"creation_date":1582172572,"post_id":60300566,"comment_id":106688174,"link":"https://stackoverflow.com/questions/60299705/representing-nested-json-as-nodes-in-neo4j-sdn/60300566#comment106688174_60300566"},{"owner":{"reputation":718,"user_id":5881773,"user_type":"registered","accept_rate":0,"profile_image":"https://www.gravatar.com/avatar/479bdf67986817e8c9b23d53b020ba5c?s=128&d=identicon&r=PG&f=1","display_name":"Vipul","link":"https://stackoverflow.com/users/5881773/vipul"},"reply_to_user":{"reputation":361,"user_id":7972621,"user_type":"registered","profile_image":"https://i.stack.imgur.com/5FLJu.jpg?s=128&g=1","display_name":"Ankit Sharma","link":"https://stackoverflow.com/users/7972621/ankit-sharma"},"edited":false,"score":0,"creation_date":1582175672,"post_id":60300566,"comment_id":106688877,"link":"https://stackoverflow.com/questions/60299705/representing-nested-json-as-nodes-in-neo4j-sdn/60300566#comment106688877_60300566"}],"tags":[],"owner":{"reputation":718,"user_id":5881773,"user_type":"registered","accept_rate":0,"profile_image":"https://www.gravatar.com/avatar/479bdf67986817e8c9b23d53b020ba5c?s=128&d=identicon&r=PG&f=1","display_name":"Vipul","link":"https://stackoverflow.com/users/5881773/vipul"},"last_editor":{"reputation":718,"user_id":5881773,"user_type":"registered","accept_rate":0,"profile_image":"https://www.gravatar.com/avatar/479bdf67986817e8c9b23d53b020ba5c?s=128&d=identicon&r=PG&f=1","display_name":"Vipul","link":"https://stackoverflow.com/users/5881773/vipul"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582175645,"last_edit_date":1582175645,"creation_date":1582115865,"answer_id":60300566,"question_id":60299705,"share_link":"https://stackoverflow.com/a/60300566","body_markdown":"Hey one probable solution is like below\r\n\r\n    class curriculum{\r\n       @Realtionship(&quot;HAS_RACK_INFOS&quot;)\r\n       private List&lt;RackName&gt; rack_name_metainfoList;\r\n    }\r\n \r\n    class RackName{\r\n        @Realtionship(&quot;HAS_BOARDS&quot;)\r\n        private List&lt;Boards&gt; boards; //ICSE\r\n    }\r\nA Curriculam has a List of RanckName and further RackName has List of Boards.\r\n\r\n","link":"https://stackoverflow.com/questions/60299705/representing-nested-json-as-nodes-in-neo4j-sdn/60300566#60300566","title":"Representing nested JSON as nodes in neo4j (SDN)"}],"owner":{"reputation":361,"user_id":7972621,"user_type":"registered","profile_image":"https://i.stack.imgur.com/5FLJu.jpg?s=128&g=1","display_name":"Ankit Sharma","link":"https://stackoverflow.com/users/7972621/ankit-sharma"},"last_editor":{"reputation":361,"user_id":7972621,"user_type":"registered","profile_image":"https://i.stack.imgur.com/5FLJu.jpg?s=128&g=1","display_name":"Ankit Sharma","link":"https://stackoverflow.com/users/7972621/ankit-sharma"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1582175645,"creation_date":1582112933,"last_edit_date":1582114285,"question_id":60299705,"share_link":"https://stackoverflow.com/q/60299705","body_markdown":"Here is my json \r\n\r\n```json\r\n{\r\n\t&quot;curriculum&quot;: {\r\n\t\t&quot;default_language_id&quot;: 1,\r\n\t\t&quot;default_language_code&quot;: &quot;en&quot;,\r\n\t\t&quot;created_by&quot;: 1,\r\n\t\t&quot;depth_order&quot;: 0,\r\n\t\t&quot;layer_count&quot;: 3,\r\n\t\t&quot;rack_name_meta_info&quot;: [\r\n\t\t\t{\r\n\t\t\t\t&quot;name&quot;: {\r\n\t\t\t\t\t&quot;en&quot;: &quot;ICSE&quot;,\r\n\t\t\t\t\t&quot;hi&quot;: &quot;आईसीएसई&quot;\r\n\t\t\t\t},\r\n\t\t\t\t&quot;icon&quot;: &quot;icon/99.png&quot;,\r\n\t\t\t\t&quot;color&quot;: &quot;#23bd99&quot;\r\n\t\t\t}\r\n\t\t],\r\n\t\t&quot;ICSE&quot;: [\r\n\t\t\t{\r\n\t\t\t\t&quot;default_language_id&quot;: 1,\r\n\t\t\t\t&quot;default_language_code&quot;: &quot;en&quot;,\r\n\t\t\t\t&quot;depth_order&quot;: 0,\r\n\t\t\t\t&quot;rack_name_meta_info&quot;: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t&quot;name&quot;: {\r\n\t\t\t\t\t\t\t&quot;en&quot;: &quot;X&quot;,\r\n\t\t\t\t\t\t\t&quot;hi&quot;: &quot;भदसवां&quot;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t&quot;icon&quot;: &quot;icon/99.png&quot;,\r\n\t\t\t\t\t\t&quot;color&quot;: &quot;#23bd99&quot;\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n}\r\n```\r\n\r\nI want to represent this JSON as set of different nodes in Neo4j. \r\n\r\nHowever the nested components are not being displayed.\r\n\r\nThe ***rack_name_metainfo*** has a field of ***ICSE*** which further opens up to various other fields. \r\n\r\nI&#39;m not able to display such a nested relationship in Graph.\r\n\r\nIn my model class in which type do I keep the ***rack_name_meta_info*** ?","link":"https://stackoverflow.com/questions/60299705/representing-nested-json-as-nodes-in-neo4j-sdn","title":"Representing nested JSON as nodes in neo4j (SDN)"},{"tags":["c#","wpf","neo4j","controls","cypher"],"comments":[{"owner":{"reputation":111231,"user_id":7252182,"user_type":"registered","profile_image":"https://i.stack.imgur.com/LUgxG.png?s=128&g=1","display_name":"mm8","link":"https://stackoverflow.com/users/7252182/mm8"},"edited":false,"score":0,"creation_date":1582116502,"post_id":60298961,"comment_id":106665006,"link":"https://stackoverflow.com/questions/60298961/using-neo4j-as-data-source-for-a-wpf-autocomplete-box#comment106665006_60298961"},{"owner":{"reputation":177,"user_id":3091744,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/277365aa6e544c174a5e771c3f754b1b?s=128&d=identicon&r=PG&f=1","display_name":"CodeCase","link":"https://stackoverflow.com/users/3091744/codecase"},"reply_to_user":{"reputation":111231,"user_id":7252182,"user_type":"registered","profile_image":"https://i.stack.imgur.com/LUgxG.png?s=128&g=1","display_name":"mm8","link":"https://stackoverflow.com/users/7252182/mm8"},"edited":false,"score":0,"creation_date":1582121218,"post_id":60298961,"comment_id":106667791,"link":"https://stackoverflow.com/questions/60298961/using-neo4j-as-data-source-for-a-wpf-autocomplete-box#comment106667791_60298961"},{"owner":{"reputation":111231,"user_id":7252182,"user_type":"registered","profile_image":"https://i.stack.imgur.com/LUgxG.png?s=128&g=1","display_name":"mm8","link":"https://stackoverflow.com/users/7252182/mm8"},"edited":false,"score":0,"creation_date":1582121308,"post_id":60298961,"comment_id":106667844,"link":"https://stackoverflow.com/questions/60298961/using-neo4j-as-data-source-for-a-wpf-autocomplete-box#comment106667844_60298961"},{"owner":{"reputation":177,"user_id":3091744,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/277365aa6e544c174a5e771c3f754b1b?s=128&d=identicon&r=PG&f=1","display_name":"CodeCase","link":"https://stackoverflow.com/users/3091744/codecase"},"reply_to_user":{"reputation":111231,"user_id":7252182,"user_type":"registered","profile_image":"https://i.stack.imgur.com/LUgxG.png?s=128&g=1","display_name":"mm8","link":"https://stackoverflow.com/users/7252182/mm8"},"edited":false,"score":0,"creation_date":1582121832,"post_id":60298961,"comment_id":106668196,"link":"https://stackoverflow.com/questions/60298961/using-neo4j-as-data-source-for-a-wpf-autocomplete-box#comment106668196_60298961"}],"answers":[{"tags":[],"owner":{"reputation":111231,"user_id":7252182,"user_type":"registered","profile_image":"https://i.stack.imgur.com/LUgxG.png?s=128&g=1","display_name":"mm8","link":"https://stackoverflow.com/users/7252182/mm8"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1582121905,"creation_date":1582121905,"answer_id":60302391,"question_id":60298961,"share_link":"https://stackoverflow.com/a/60302391","body_markdown":"Don&#39;t forget to `await` your `async` method in the event handler (and add the `async` keyword to the event handler&#39;s signature):\r\n\r\n    private async void TextBox_KeyUp(object sender, KeyEventArgs e)\r\n    {\r\n        bool found = false;\r\n        var border = (resultStack.Parent as ScrollViewer).Parent as Border;\r\n        var data = await GetSuggestionsFromNeoAsync(); //&lt;--\r\n    ...","link":"https://stackoverflow.com/questions/60298961/using-neo4j-as-data-source-for-a-wpf-autocomplete-box/60302391#60302391","title":"Using neo4j as data source for a WPF Autocomplete Box"}],"owner":{"reputation":177,"user_id":3091744,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/277365aa6e544c174a5e771c3f754b1b?s=128&d=identicon&r=PG&f=1","display_name":"CodeCase","link":"https://stackoverflow.com/users/3091744/codecase"},"last_editor":{"reputation":177,"user_id":3091744,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/277365aa6e544c174a5e771c3f754b1b?s=128&d=identicon&r=PG&f=1","display_name":"CodeCase","link":"https://stackoverflow.com/users/3091744/codecase"},"comment_count":4,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":60302391,"answer_count":1,"score":0,"last_activity_date":1582192462,"creation_date":1582110335,"last_edit_date":1582192462,"question_id":60298961,"share_link":"https://stackoverflow.com/q/60298961","body_markdown":"I try to get a Autocomplete TextBox running with neo4j as Data Source, for this I need to get all founded elements returned as a List where I can &quot;Search&quot; inside. \r\n\r\nI have a List and I have a connection to query neo4j DB to get all persons by their name, a MessageBox is displaying ,just for testing, if we receive data but if I enter a letter in my Textbox my App just freezes.\r\n\r\nCode behind:\r\n\r\n    public partial class UserControlQueryDB : UserControl\r\n    {\r\n        public UserControlQueryDB()\r\n        {\r\n            InitializeComponent();\r\n            GetSuggestionsFromNeoAsync();\r\n        }\r\n\r\n        private async Task&lt;List&lt;string&gt;&gt; GetSuggestionsFromNeoAsync() {\r\n\r\n    IDriver driver = GraphDatabase.Driver(&quot;bolt://localhost:7687&quot;, AuthTokens.Basic(&quot;neo4j&quot;, &quot;neo4j&quot;));\r\n    IAsyncSession session = driver.AsyncSession(o =&gt; o.WithDatabase(&quot;neo4j&quot;));\r\n\r\n                var query2Neo = &quot;MATCH (n:Person) RETURN n.Name&quot;;\r\n\r\n                IResultCursor cursor = await session.RunAsync(query2Neo);\r\n                List&lt;string&gt; found = await cursor.ToListAsync(record =&gt; record[&quot;name&quot;].As&lt;string&gt;());\r\n\r\n                await cursor.ConsumeAsync();\r\n                await session.CloseAsync();\r\n                await driver.CloseAsync();\r\n\r\n            return found;\r\n        }\r\n\r\n        private void TextBox_KeyUp(object sender, KeyEventArgs e)\r\n        {\r\n            bool found = false;\r\n            var border = (resultStack.Parent as ScrollViewer).Parent as Border;\r\n            var data = GetSuggestionsFromNeoAsync();\r\n\r\n            MessageBox.Show(data);\r\n\r\n            string query = (sender as TextBox).Text;\r\n\r\n            if (query.Length == 0)\r\n            {\r\n                // Clear\r\n                resultStack.Children.Clear();\r\n                border.Visibility = Visibility.Collapsed;\r\n            }\r\n            else\r\n            {\r\n                border.Visibility = Visibility.Visible;\r\n            }\r\n\r\n            // Clear the list\r\n            resultStack.Children.Clear();\r\n\r\n            // Add the result\r\n            foreach (var obj in data.Result)\r\n            {\r\n                if (obj.ToLower().StartsWith(query.ToLower()))\r\n                {\r\n                    // The word starts with this... Autocomplete must work\r\n                    addItem(obj);\r\n                    found = true;\r\n                }\r\n            }\r\n\r\n            if (!found)\r\n            {\r\n                resultStack.Children.Add(new TextBlock() { Text = &quot;No results found.&quot; });\r\n            }\r\n        }\r\n\r\n        private void addItem(string text)\r\n        {\r\n            TextBlock block = new TextBlock();\r\n\r\n            // Add the text\r\n            block.Text = text;\r\n\r\n            // A little style...\r\n            block.Margin = new Thickness(2, 3, 2, 3);\r\n            block.Cursor = Cursors.Hand;\r\n\r\n            // Mouse events\r\n            block.MouseLeftButtonUp += (sender, e) =&gt;\r\n            {\r\n                textBox.Text = (sender as TextBlock).Text;\r\n            };\r\n\r\n            block.MouseEnter += (sender, e) =&gt;\r\n            {\r\n                TextBlock b = sender as TextBlock;\r\n                b.Background = Brushes.PeachPuff;\r\n            };\r\n\r\n            block.MouseLeave += (sender, e) =&gt;\r\n            {\r\n                TextBlock b = sender as TextBlock;\r\n                b.Background = Brushes.Transparent;\r\n            };\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\nThats the Xaml:\r\n\r\n            &lt;StackPanel Orientation=&quot;Horizontal&quot;&gt;\r\n            &lt;TextBox Width=&quot;300&quot; Padding=&quot;5, 3, 5, 3&quot; KeyUp=&quot;TextBox_KeyUp&quot; Name=&quot;textBox&quot; /&gt;\r\n            &lt;Border Width=&quot;298&quot; Height=&quot;150&quot; BorderBrush=&quot;Black&quot; BorderThickness=&quot;1&quot;&gt;\r\n                &lt;ScrollViewer VerticalScrollBarVisibility=&quot;Auto&quot;&gt;\r\n                    &lt;StackPanel Name=&quot;resultStack&quot;&gt;&lt;/StackPanel&gt;\r\n                &lt;/ScrollViewer&gt;\r\n            &lt;/Border&gt;\r\n        &lt;/StackPanel&gt;","link":"https://stackoverflow.com/questions/60298961/using-neo4j-as-data-source-for-a-wpf-autocomplete-box","title":"Using neo4j as data source for a WPF Autocomplete Box"},{"tags":["spring-boot","neo4j","neo4j-ogm"],"comments":[{"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1582149141,"post_id":60296275,"comment_id":106682587,"link":"https://stackoverflow.com/questions/60296275/how-to-execute-batch-get-query-in-neo4j-using-spring-boot#comment106682587_60296275"},{"owner":{"reputation":21,"user_id":12910395,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-uyIQKBqLKYw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reocyuU10e4OmG25Wl5EudyPh0cpQ/photo.jpg?sz=128","display_name":"Tecore Demo","link":"https://stackoverflow.com/users/12910395/tecore-demo"},"reply_to_user":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1582172138,"post_id":60296275,"comment_id":106688106,"link":"https://stackoverflow.com/questions/60296275/how-to-execute-batch-get-query-in-neo4j-using-spring-boot#comment106688106_60296275"}],"owner":{"reputation":21,"user_id":12910395,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-uyIQKBqLKYw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reocyuU10e4OmG25Wl5EudyPh0cpQ/photo.jpg?sz=128","display_name":"Tecore Demo","link":"https://stackoverflow.com/users/12910395/tecore-demo"},"last_editor":{"reputation":5157,"user_id":2650436,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/34ecacd077244d141a23c46ea094df5c?s=128&d=identicon&r=PG","display_name":"meistermeier","link":"https://stackoverflow.com/users/2650436/meistermeier"},"comment_count":2,"delete_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1582183952,"creation_date":1582102354,"last_edit_date":1582183952,"question_id":60296275,"share_link":"https://stackoverflow.com/q/60296275","body_markdown":"I want to get the connection level of multiple users using a single query in neo4j. so, currently, I&#39;m doing it by simply query multiple times but I want to execute it only for one time. but I don&#39;t know how to write batch get query in neo4j using spring boot.\r\n\r\nI&#39;m adding my modal class structure:\r\n\r\n    @NodeEntity(label = &quot;User&quot;)\r\n    public class Contact {\r\n\r\n      @Id\r\n      @GeneratedValue(strategy = UuidStrategy.class)\r\n      private String id;\r\n      private String id2;\r\n      private Long creationTs;\r\n      private Long modifiedTs;\r\n\r\n      @JsonIgnoreProperties(&quot;connectedFrom&quot;)\r\n      @Relationship( type = &quot;CONNECTED_TO&quot;, direction = Relationship.UNDIRECTED)\r\n      private Set&lt;ContactRelationship&gt; connections;\r\n\r\n      public Contact() {}\r\n\r\n      public Contact(String id2, Long creationTs, Long modifiedTs) {\r\n        this.id2 = id2;\r\n        this.creationTs = creationTs;\r\n        this.modifiedTs = modifiedTs;\r\n      }\r\n\r\n      public String getId() {\r\n        return id;\r\n      }\r\n\r\n      public void setId(String id) {\r\n        this.id = id;\r\n      }\r\n\r\n      public String getId2() {\r\n        return id2;\r\n      }\r\n\r\n      public void setId2(String id2) {\r\n        this.id2 = id2;\r\n      }\r\n\r\n      public Long getCreationTs() {\r\n        return creationTs;\r\n      }\r\n\r\n      public void setCreationTs(Long creationTs) {\r\n        this.creationTs = creationTs;\r\n      }\r\n\r\n      public Long getModifiedTs() {\r\n        return modifiedTs;\r\n      }\r\n\r\n      public void setModifiedTs(Long modifiedTs) {\r\n        this.modifiedTs = modifiedTs;\r\n      }\r\n\r\n      public Set&lt;ContactRelationship&gt; getConnections() {\r\n        return connections;\r\n      }\r\n\r\n      public void setConnections(Set&lt;ContactRelationship&gt; connections) {\r\n        this.connections = connections;\r\n      }\r\n\r\n\r\n      @Override\r\n      public String toString() {\r\n        return &quot;Contact{&quot; +\r\n                &quot;id=&#39;&quot; + id + &#39;\\&#39;&#39; +\r\n                &quot;, id2=&#39;&quot; + id2 + &#39;\\&#39;&#39; +\r\n                &quot;, creationTs=&quot; + creationTs +\r\n                &quot;, modifiedTs=&quot; + modifiedTs +\r\n                &quot;, connections=&quot; + connections +\r\n                &#39;}&#39;;\r\n      }\r\n    }","link":"https://stackoverflow.com/questions/60296275/how-to-execute-batch-get-query-in-neo4j-using-spring-boot","title":"How to execute batch get query in neo4j using spring boot"},{"tags":["r","neo4j"],"owner":{"reputation":11,"user_id":12856440,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/858cbe4b3fb99bad21672882e5497a02?s=128&d=identicon&r=PG&f=1","display_name":"Luan","link":"https://stackoverflow.com/users/12856440/luan"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1582094541,"creation_date":1582094541,"question_id":60294434,"share_link":"https://stackoverflow.com/q/60294434","body_markdown":"I am trying to use a r package neo4r conncet to neo4j.\r\n\r\nFrom remote machine I am able to connect the browser at the URL\r\n\r\n    http://&lt;my remote machine IP address&gt;:7474/browser\r\n\r\nHowever, I am fail to create a connection object with the following R code.\r\n\r\n    library(neo4r)\r\n    library(magrittr)\r\n    con &lt;- neo4r::neo4j_api$new(\r\n      url = &quot;http://&lt;my remote machine IP address&gt;:7474&quot;,\r\n      user = &quot;neo4j&quot;,\r\n      password = rstudioapi::askForPassword()\r\n    )\r\n\r\n    con$ping()\r\n    con$get_version()\r\n\r\nWhich gives me\r\n\r\n    &gt; con$get_version()\r\n    NULL\r\n    &gt; con$ping()\r\n    [1] 404\r\n\r\n\r\nI expect to have a 200 return from `con$ping()`, 404 stands for the url problem.\r\n\r\nI am not sure what is the problem results in the failure.\r\n\r\nI hope someone could give me some hint about this.\r\n\r\nThank you!\r\n\r\n\r\n-----------------------------------------------------------------------\r\nVersion information:\r\n\r\nneo4j community edition 4.0.0\r\n\r\nneo4j browser 4.0.1\r\n\r\nneo4r 0.1.3\r\n\r\n-----------------------------------------------------------------------\r\nR session information\r\n\r\n```\r\n&gt; sessionInfo()\r\nR version 3.6.2 (2019-12-12)\r\nPlatform: x86_64-pc-linux-gnu (64-bit)\r\nRunning under: Ubuntu 18.04 LTS\r\n\r\nMatrix products: default\r\nBLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.7.1\r\nLAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.7.1\r\n\r\nlocale:\r\n [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8        LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8   \r\n [6] LC_MESSAGES=C.UTF-8    LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C           LC_TELEPHONE=C        \r\n[11] LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C   \r\n\r\nattached base packages:\r\n[1] stats     graphics  grDevices utils     datasets  methods   base     \r\n\r\nother attached packages:\r\n[1] magrittr_1.5 neo4r_0.1.3 \r\n\r\nloaded via a namespace (and not attached):\r\n [1] Rcpp_1.0.3        compiler_3.6.2    pillar_1.4.3      later_1.0.0       tools_3.6.2       digest_0.6.24    \r\n [7] jsonlite_1.6.1    tibble_2.1.3      lifecycle_0.1.0   pkgconfig_2.0.3   rlang_0.4.4       shiny_1.4.0      \r\n[13] cli_2.0.1         rstudioapi_0.11   curl_4.3          fastmap_1.0.1     httr_1.4.1        dplyr_0.8.4      \r\n[19] vctrs_0.2.2       attempt_0.3.0     tidyselect_1.0.0  glue_1.3.1        data.table_1.12.8 R6_2.4.1         \r\n[25] fansi_0.4.1       purrr_0.3.3       tidyr_1.0.2       promises_1.1.0    htmltools_0.4.0   assertthat_0.2.1 \r\n[31] mime_0.9          xtable_1.8-4      httpuv_1.5.2      crayon_1.3.4     \r\n```\r\n\r\n-----------------------------------------------------------------------\r\nneo4j config file\r\n\r\n```\r\n#*****************************************************************\r\n# Network connector configuration\r\n#*****************************************************************\r\n\r\n# With default configuration Neo4j only accepts local connections.\r\n# To accept non-local connections, uncomment this line:\r\ndbms.connectors.default_listen_address=0.0.0.0\r\n\r\n# You can also choose a specific network interface, and configure a non-default\r\n# port for each connector, by setting their individual listen_address.\r\n\r\n# The address at which this server can be reached by its clients. This may be the server&#39;s IP address or DNS name, or\r\n# it may be the address of a reverse proxy which sits in front of the server. This setting may be overridden for\r\n# individual connectors below.\r\ndbms.connectors.default_advertised_address=localhost\r\n\r\n# You can also choose a specific advertised hostname or IP address, and\r\n# configure an advertised port for each connector, by setting their\r\n# individual advertised_address.\r\n\r\n# By default, encryption is turned off.\r\n# To turn on encryption, an ssl policy for the connector needs to be configured\r\n# Read more in SSL policy section in this file for how to define a SSL policy.\r\n\r\n# Bolt connector\r\ndbms.connector.bolt.enabled=true\r\n#dbms.connector.bolt.tls_level=DISABLED\r\ndbms.connector.bolt.listen_address=:7687\r\n\r\n# HTTP Connector. There can be zero or one HTTP connectors.\r\ndbms.connector.http.enabled=true\r\ndbms.connector.http.listen_address=:7474\r\n\r\n# HTTPS Connector. There can be zero or one HTTPS connectors.\r\ndbms.connector.https.enabled=false\r\ndbms.connector.https.listen_address=:7473\r\n\r\n# Number of Neo4j worker threads.\r\n#dbms.threads.worker_count=\r\n\r\n```","link":"https://stackoverflow.com/questions/60294434/why-neo4r-fail-to-create-a-conncetion-object","title":"Why neo4r fail to create a conncetion object?"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1582060109,"post_id":60288663,"comment_id":106644873,"link":"https://stackoverflow.com/questions/60288663/import-data-from-2-csv-files-in-neo4j#comment106644873_60288663"},{"owner":{"reputation":613,"user_id":7491982,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/c510ddd12aaa347166c6cabaeacedf5f?s=128&d=identicon&r=PG&f=1","display_name":"helen","link":"https://stackoverflow.com/users/7491982/helen"},"reply_to_user":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1582060401,"post_id":60288663,"comment_id":106645003,"link":"https://stackoverflow.com/questions/60288663/import-data-from-2-csv-files-in-neo4j#comment106645003_60288663"}],"answers":[{"tags":[],"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1582061119,"creation_date":1582061119,"answer_id":60289676,"question_id":60288663,"share_link":"https://stackoverflow.com/a/60289676","body_markdown":"Your second `WITH` clause does not contain `c`, so `c` becomes an unbound variable after that clause.\r\n\r\nChange this:\r\n\r\n    WITH srow.Fname AS first, srow.Lname AS last\r\n\r\nto this:\r\n\r\n    WITH c, srow.Fname AS first, srow.Lname AS last\r\n\r\n*By the way, your query will only work as you expect if `central.csv` contains just one data row (as it does currently).*","link":"https://stackoverflow.com/questions/60288663/import-data-from-2-csv-files-in-neo4j/60289676#60289676","title":"Import data from 2 csv files in neo4j"}],"owner":{"reputation":613,"user_id":7491982,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/c510ddd12aaa347166c6cabaeacedf5f?s=128&d=identicon&r=PG&f=1","display_name":"helen","link":"https://stackoverflow.com/users/7491982/helen"},"last_editor":{"reputation":613,"user_id":7491982,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/c510ddd12aaa347166c6cabaeacedf5f?s=128&d=identicon&r=PG&f=1","display_name":"helen","link":"https://stackoverflow.com/users/7491982/helen"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60289676,"answer_count":1,"score":0,"last_activity_date":1582061119,"creation_date":1582056418,"last_edit_date":1582060375,"question_id":60288663,"share_link":"https://stackoverflow.com/q/60288663","body_markdown":"As a continue to this [post][1] in which I completely explained what I&#39;m supposed to do, in case my central node is located in another .csv file, how can I import it in my graph? \r\n\r\nThe content of names.csv (2 columns: Lname &amp; Fname):\r\n\r\n    Lname,Fname\r\n    Brown,Helen\r\n    Right,Eliza\r\n    Green,Helen\r\n    Pink,Kate\r\n    Yellow,Helen\r\n\r\nThe content of central.csv (2 columns: central &amp; value):\r\n\r\n    central,value\r\n    cent1,10\r\n\r\n\r\n I tried something like this:\r\n\r\n    LOAD CSV WITH HEADERS FROM &#39;file:///central.csv&#39; AS frow\r\n    MERGE (c:center {name: frow.central})\r\n    WITH *\r\n    LOAD CSV WITH HEADERS FROM &#39;file:///names.csv&#39; AS srow\r\n    WITH srow.Fname AS first, srow.Lname AS last\r\n    MERGE (p:la {last: last})\r\n    MERGE (o:fi {first: first})\r\n    MERGE (c)-[r:CONTAINS {first:first}]-&gt;(o)\r\n    MERGE (o)-[rel:CONTAINS {first: first}]-&gt;(p)\r\n    RETURN count(o)\r\n\r\nbut it didn&#39;t work for me. It created the central node for me, but my central node is not connected to *first* nodes as it was supposed to. What&#39;s wrong. I wanted it to be like this:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/60187636/several-relationships-from-a-node-to-another-node\r\n  [2]: https://i.stack.imgur.com/KJ42R.png","link":"https://stackoverflow.com/questions/60288663/import-data-from-2-csv-files-in-neo4j","title":"Import data from 2 csv files in neo4j"},{"tags":["neo4j","cypher","neo4j-apoc"],"answers":[{"tags":[],"owner":{"reputation":23863,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1582058040,"creation_date":1582058040,"answer_id":60289036,"question_id":60286734,"share_link":"https://stackoverflow.com/a/60289036","body_markdown":"`maxLevel` is basically the depth of the expansion. `maxLevel:2` means up to two expansions from the starting node.\r\n\r\n`limit` limits the total results returned from the call, once this many results are found, then it will stop looking further.\r\n\r\nSo as an example, if we had a social graph, and you wanted to find the first 3 :Doctor nodes, within 10 expansions of you (this uses breadth first expansion by default), you might use something like:\r\n\r\n    MATCH (me:Person {id:12345})\r\n    CALL apoc.path.subgraphNodes(me, {maxLevel:10, limit:3, labelFilter:&#39;Doctor&#39;}) YIELD node\r\n    RETURN node\r\n\r\nAnd there might be thousands of :Doctor nodes within 10 hops, but because of the `limit:3`, once 3 are found it will stop trying to find more.","link":"https://stackoverflow.com/questions/60286734/what-does-parameters-limit-and-maxlevel-mean-in-neo4j-apoc-query/60289036#60289036","title":"What does parameters limit and maxLevel mean in Neo4j apoc query?"}],"owner":{"reputation":214,"user_id":11803945,"user_type":"registered","profile_image":"https://i.stack.imgur.com/cfspq.png?s=128&g=1","display_name":"thomask","link":"https://stackoverflow.com/users/11803945/thomask"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60289036,"answer_count":1,"score":0,"last_activity_date":1582058040,"creation_date":1582048056,"question_id":60286734,"share_link":"https://stackoverflow.com/q/60286734","body_markdown":"By reading the official Neo4j documentation, I can&#39;t understand what does the two parameters `limit` and `maxLevel` mean in a `apoc.path.subgraphnodes`.\r\n\r\nhttps://neo4j-contrib.github.io/neo4j-apoc-procedures/3.5/path-finding/path-expander/\r\n\r\nAnyone can help me ?\r\n\r\nThanks in advance","link":"https://stackoverflow.com/questions/60286734/what-does-parameters-limit-and-maxlevel-mean-in-neo4j-apoc-query","title":"What does parameters limit and maxLevel mean in Neo4j apoc query?"},{"tags":["spring-boot","google-cloud-platform","neo4j","spring-data-neo4j"],"comments":[{"owner":{"reputation":5157,"user_id":2650436,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/34ecacd077244d141a23c46ea094df5c?s=128&d=identicon&r=PG","display_name":"meistermeier","link":"https://stackoverflow.com/users/2650436/meistermeier"},"edited":false,"score":1,"creation_date":1582042208,"post_id":60283634,"comment_id":106636316,"link":"https://stackoverflow.com/questions/60283634/neo4j-connection-timed-out-in-spring-boot-2-2-4-but-not-in-2-0-5#comment106636316_60283634"},{"owner":{"reputation":914,"user_id":5985593,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/F23h9.png?s=128&g=1","display_name":"JC97","link":"https://stackoverflow.com/users/5985593/jc97"},"reply_to_user":{"reputation":5157,"user_id":2650436,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/34ecacd077244d141a23c46ea094df5c?s=128&d=identicon&r=PG","display_name":"meistermeier","link":"https://stackoverflow.com/users/2650436/meistermeier"},"edited":false,"score":0,"creation_date":1582046726,"post_id":60283634,"comment_id":106638722,"link":"https://stackoverflow.com/questions/60283634/neo4j-connection-timed-out-in-spring-boot-2-2-4-but-not-in-2-0-5#comment106638722_60283634"},{"owner":{"reputation":5157,"user_id":2650436,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/34ecacd077244d141a23c46ea094df5c?s=128&d=identicon&r=PG","display_name":"meistermeier","link":"https://stackoverflow.com/users/2650436/meistermeier"},"edited":false,"score":1,"creation_date":1582047294,"post_id":60283634,"comment_id":106639022,"link":"https://stackoverflow.com/questions/60283634/neo4j-connection-timed-out-in-spring-boot-2-2-4-but-not-in-2-0-5#comment106639022_60283634"},{"owner":{"reputation":5157,"user_id":2650436,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/34ecacd077244d141a23c46ea094df5c?s=128&d=identicon&r=PG","display_name":"meistermeier","link":"https://stackoverflow.com/users/2650436/meistermeier"},"edited":false,"score":0,"creation_date":1582058857,"post_id":60283634,"comment_id":106644223,"link":"https://stackoverflow.com/questions/60283634/neo4j-connection-timed-out-in-spring-boot-2-2-4-but-not-in-2-0-5#comment106644223_60283634"},{"owner":{"reputation":914,"user_id":5985593,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/F23h9.png?s=128&g=1","display_name":"JC97","link":"https://stackoverflow.com/users/5985593/jc97"},"reply_to_user":{"reputation":5157,"user_id":2650436,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/34ecacd077244d141a23c46ea094df5c?s=128&d=identicon&r=PG","display_name":"meistermeier","link":"https://stackoverflow.com/users/2650436/meistermeier"},"edited":false,"score":0,"creation_date":1582060541,"post_id":60283634,"comment_id":106645063,"link":"https://stackoverflow.com/questions/60283634/neo4j-connection-timed-out-in-spring-boot-2-2-4-but-not-in-2-0-5#comment106645063_60283634"},{"owner":{"reputation":5157,"user_id":2650436,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/34ecacd077244d141a23c46ea094df5c?s=128&d=identicon&r=PG","display_name":"meistermeier","link":"https://stackoverflow.com/users/2650436/meistermeier"},"edited":false,"score":0,"creation_date":1582061514,"post_id":60283634,"comment_id":106645434,"link":"https://stackoverflow.com/questions/60283634/neo4j-connection-timed-out-in-spring-boot-2-2-4-but-not-in-2-0-5#comment106645434_60283634"},{"owner":{"reputation":914,"user_id":5985593,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/F23h9.png?s=128&g=1","display_name":"JC97","link":"https://stackoverflow.com/users/5985593/jc97"},"reply_to_user":{"reputation":5157,"user_id":2650436,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/34ecacd077244d141a23c46ea094df5c?s=128&d=identicon&r=PG","display_name":"meistermeier","link":"https://stackoverflow.com/users/2650436/meistermeier"},"edited":false,"score":0,"creation_date":1582097300,"post_id":60283634,"comment_id":106654749,"link":"https://stackoverflow.com/questions/60283634/neo4j-connection-timed-out-in-spring-boot-2-2-4-but-not-in-2-0-5#comment106654749_60283634"},{"owner":{"reputation":335,"user_id":4375999,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e63498ebac98f8b1d4d45e3e06507d47?s=128&d=identicon&r=PG&f=1","display_name":"Braulio Baron","link":"https://stackoverflow.com/users/4375999/braulio-baron"},"edited":false,"score":0,"creation_date":1582329275,"post_id":60283634,"comment_id":106752801,"link":"https://stackoverflow.com/questions/60283634/neo4j-connection-timed-out-in-spring-boot-2-2-4-but-not-in-2-0-5#comment106752801_60283634"},{"owner":{"reputation":914,"user_id":5985593,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/F23h9.png?s=128&g=1","display_name":"JC97","link":"https://stackoverflow.com/users/5985593/jc97"},"reply_to_user":{"reputation":335,"user_id":4375999,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e63498ebac98f8b1d4d45e3e06507d47?s=128&d=identicon&r=PG&f=1","display_name":"Braulio Baron","link":"https://stackoverflow.com/users/4375999/braulio-baron"},"edited":false,"score":0,"creation_date":1582405683,"post_id":60283634,"comment_id":106769009,"link":"https://stackoverflow.com/questions/60283634/neo4j-connection-timed-out-in-spring-boot-2-2-4-but-not-in-2-0-5#comment106769009_60283634"},{"owner":{"reputation":914,"user_id":5985593,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/F23h9.png?s=128&g=1","display_name":"JC97","link":"https://stackoverflow.com/users/5985593/jc97"},"reply_to_user":{"reputation":5157,"user_id":2650436,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/34ecacd077244d141a23c46ea094df5c?s=128&d=identicon&r=PG","display_name":"meistermeier","link":"https://stackoverflow.com/users/2650436/meistermeier"},"edited":false,"score":0,"creation_date":1582560001,"post_id":60283634,"comment_id":106810263,"link":"https://stackoverflow.com/questions/60283634/neo4j-connection-timed-out-in-spring-boot-2-2-4-but-not-in-2-0-5#comment106810263_60283634"},{"owner":{"reputation":335,"user_id":4375999,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e63498ebac98f8b1d4d45e3e06507d47?s=128&d=identicon&r=PG&f=1","display_name":"Braulio Baron","link":"https://stackoverflow.com/users/4375999/braulio-baron"},"edited":false,"score":1,"creation_date":1582568229,"post_id":60283634,"comment_id":106814426,"link":"https://stackoverflow.com/questions/60283634/neo4j-connection-timed-out-in-spring-boot-2-2-4-but-not-in-2-0-5#comment106814426_60283634"},{"owner":{"reputation":914,"user_id":5985593,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/F23h9.png?s=128&g=1","display_name":"JC97","link":"https://stackoverflow.com/users/5985593/jc97"},"edited":false,"score":0,"creation_date":1582578859,"post_id":60283634,"comment_id":106818927,"link":"https://stackoverflow.com/questions/60283634/neo4j-connection-timed-out-in-spring-boot-2-2-4-but-not-in-2-0-5#comment106818927_60283634"},{"owner":{"reputation":3207,"user_id":1547989,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/20492a196bb034ad3aa7e05e593fede9?s=128&d=identicon&r=PG","display_name":"Michael Simons","link":"https://stackoverflow.com/users/1547989/michael-simons"},"edited":false,"score":0,"creation_date":1582634725,"post_id":60283634,"comment_id":106838258,"link":"https://stackoverflow.com/questions/60283634/neo4j-connection-timed-out-in-spring-boot-2-2-4-but-not-in-2-0-5#comment106838258_60283634"},{"owner":{"reputation":914,"user_id":5985593,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/F23h9.png?s=128&g=1","display_name":"JC97","link":"https://stackoverflow.com/users/5985593/jc97"},"edited":false,"score":0,"creation_date":1582796883,"post_id":60283634,"comment_id":106903500,"link":"https://stackoverflow.com/questions/60283634/neo4j-connection-timed-out-in-spring-boot-2-2-4-but-not-in-2-0-5#comment106903500_60283634"},{"owner":{"reputation":914,"user_id":5985593,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/F23h9.png?s=128&g=1","display_name":"JC97","link":"https://stackoverflow.com/users/5985593/jc97"},"edited":false,"score":0,"creation_date":1582798000,"post_id":60283634,"comment_id":106904113,"link":"https://stackoverflow.com/questions/60283634/neo4j-connection-timed-out-in-spring-boot-2-2-4-but-not-in-2-0-5#comment106904113_60283634"}],"answers":[{"tags":[],"owner":{"reputation":914,"user_id":5985593,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/F23h9.png?s=128&g=1","display_name":"JC97","link":"https://stackoverflow.com/users/5985593/jc97"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1582798732,"creation_date":1582798732,"answer_id":60430904,"question_id":60283634,"share_link":"https://stackoverflow.com/a/60430904","body_markdown":"My final setup (and solution) was to use only following dependencies:\r\n\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-data-neo4j&#39;\r\n    implementation &#39;org.neo4j.driver:neo4j-java-driver-spring-boot-starter:4.0.0.1&#39;\r\n\r\nAnd use following settings in the properties file:\r\n\r\n    org.neo4j.driver.uri=bolt://35.xx.xx.xx:7687\r\n    org.neo4j.driver.authentication.username=neo4j\r\n    org.neo4j.driver.authentication.password=neo4j\r\n    org.neo4j.driver.config.encrypted=false\r\n\r\nEncryption wasn&#39;t the problem, but the settings had to be set to `org.neo4j.driver` instead of the `org.springramework.boot` dependency. The springframework dependency is still needed to use `@Query` etc in the repositories, thats why I needed both.\r\n\r\n ","link":"https://stackoverflow.com/questions/60283634/neo4j-connection-timed-out-in-spring-boot-2-2-4-but-not-in-2-0-5/60430904#60430904","title":"Neo4J connection timed out in Spring Boot 2.2.4 but not in 2.0.5"}],"owner":{"reputation":914,"user_id":5985593,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/F23h9.png?s=128&g=1","display_name":"JC97","link":"https://stackoverflow.com/users/5985593/jc97"},"last_editor":{"reputation":914,"user_id":5985593,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/F23h9.png?s=128&g=1","display_name":"JC97","link":"https://stackoverflow.com/users/5985593/jc97"},"comment_count":15,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":60430904,"answer_count":1,"score":2,"last_activity_date":1582798732,"creation_date":1582037619,"last_edit_date":1582060528,"question_id":60283634,"share_link":"https://stackoverflow.com/q/60283634","body_markdown":"I&#39;m building a Spring Boot application with neo4j. I have an issue connecting to a deployed database when I&#39;m running on Spring Boot 2.2.4. In an other project with Spring Boot 2.0.5 it works, but when I upgrade that project to 2.2.4 it also breaks with the same exception.\r\n\r\nThe weird thing is that it also works on 2.2.4 locally when using a local Docker image.\r\n\r\nI get the following exception when I try to connect to a deployed neo4j instance in the cloud using an uri of the form **bolt://35.xx.xx.xx:7687** AND on Spring Boot 2.2.4:\r\n[![enter image description here][1]][1]\r\n\r\nIf I run my docker image and I change the connection uri to **bolt://localhost:7687** it also works perfectly fine on Spring Boot 2.2.4.\r\n\r\nEven in my gitlab CI/CD pipeline the test works fine using a service inside the pipeline, also with the same neo4j image.\r\n\r\nThis is my **build.gradle**:\r\n[![enter image description here][2]][2]\r\n\r\nAnd these are the versions effectively installed:\r\n[![enter image description here][3]][3]\r\n\r\nI also can always use browser to connect to my database that&#39;s why I assume that it has something to do with the versions instead of my cloud configuration.\r\n\r\nAnyone any idea what I have to change on my configuration?\r\n\r\nThanks in advance!\r\n\r\n-------------------------\r\n\r\nWe run following versions: \r\n\r\n - neo4j 3.5.14\r\n - Spring Boot 2.2.4\r\n - Java 11\r\n\r\n-----\r\n**EDIT 1**\r\nAs someone proposed, I also setup a very simplistic example application (https://neo4j.com/developer/java/) using just the neo4j driver v4 with my GCP instance of Neo4J. This works perfectly fine.\r\n\r\n-----\r\n**EDIT 2**\r\nMy application.properties looks like this:\r\n```\r\nspring.data.neo4j.uri=bolt://35.xxx.xxx.xxx:7687 # &lt;- in prod\r\nspring.data.neo4j.uri=bolt://localhost:7687 # &lt;- in dev\r\nspring.data.neo4j.uri=bolt://neo4j:7687 # &lt;- in CI/CD\r\nspring.data.neo4j.username=neo4j\r\nspring.data.neo4j.password=****\r\nspring.data.neo4j.embedded.enabled=false\r\n```\r\nThe different environments are splitted in seperate property files that set the spring active profile. Im always testing this with replacing the localhost one in the application-dev.properties to the public ip.\r\n\r\n  [1]: https://i.stack.imgur.com/XWZLl.png\r\n  [2]: https://i.stack.imgur.com/YHBpv.png\r\n  [3]: https://i.stack.imgur.com/sOo5J.png","link":"https://stackoverflow.com/questions/60283634/neo4j-connection-timed-out-in-spring-boot-2-2-4-but-not-in-2-0-5","title":"Neo4J connection timed out in Spring Boot 2.2.4 but not in 2.0.5"},{"tags":["rest","api","neo4j","graph-databases","appery.io"],"answers":[{"tags":[],"owner":{"reputation":1562,"user_id":297847,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/4e62bafdc03e428836e85b5b132c7016?s=128&d=identicon&r=PG&f=1","display_name":"Max Katz","link":"https://stackoverflow.com/users/297847/max-katz"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1582154394,"creation_date":1582154394,"answer_id":60310742,"question_id":60282939,"share_link":"https://stackoverflow.com/a/60310742","body_markdown":"You can do that as long as Neo4J database has a REST API. If it does, then you can make calls to it from an Appery app (from Server Code or API Express). Hope this helps. ","link":"https://stackoverflow.com/questions/60282939/is-it-possible-to-use-appery-to-access-data-from-neo4j-graph-database/60310742#60310742","title":"Is it possible to use Appery to access data from Neo4J Graph Database?"}],"owner":{"reputation":21,"user_id":11864285,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/75c4a4036886160f7099374b9bd1673a?s=128&d=identicon&r=PG&f=1","display_name":"AamirKhan","link":"https://stackoverflow.com/users/11864285/aamirkhan"},"last_editor":{"reputation":8766,"user_id":7879193,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-bVdcN0nQCio/AAAAAAAAAAI/AAAAAAAACfs/jPa4Dr_Nzbk/photo.jpg?sz=128","display_name":"Stanislav Kralin","link":"https://stackoverflow.com/users/7879193/stanislav-kralin"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60310742,"answer_count":1,"score":0,"last_activity_date":1582154394,"creation_date":1582035426,"last_edit_date":1582047604,"question_id":60282939,"share_link":"https://stackoverflow.com/q/60282939","body_markdown":"I have a web application that has to be linked with a graph database (Neo4J). Is it possible to read or write data to Neo4J using Appery?\r\n\r\nI have chosen Appery because I am a beginner when it comes to databases and Appery seems to be easy in using REST API, as well as there is a free trial. \r\n\r\nFeedback would be highly helpful. Thanks in advance. \r\n\r\nEdit: I am aware that Neo4J uses Cypher queries. I would like to know if Appery supports Cypher as well. \r\n\r\nSide note: The reason I am asking the question here without trying it out is because I dont have an active DB and my application is private due to my company&#39;s security policy ","link":"https://stackoverflow.com/questions/60282939/is-it-possible-to-use-appery-to-access-data-from-neo4j-graph-database","title":"Is it possible to use Appery to access data from Neo4J Graph Database?"},{"tags":["neo4j","cypher","neo4j-apoc"],"answers":[{"tags":[],"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582076475,"last_edit_date":1582076475,"creation_date":1582059531,"answer_id":60289360,"question_id":60281002,"share_link":"https://stackoverflow.com/a/60289360","body_markdown":"It seems you are encountering a possible neo4j bug when there are multiple [existential subqueries](https://neo4j.com/docs/cypher-manual/4.0/clauses/where/#existential-subqueries) in a boolean expression.\r\n\r\nThis query combines your two subqueries, and may work better for you:\r\n\r\n    MATCH (knowledgeEntry:KnowledgeEntry)-[relationship]-(:KnowledgeEntry)\r\n    WHERE EXISTS {\r\n      MATCH (knowledgeEntry)-[:CONTAINS]-&gt;(:KnowledgeRecord)-[:BASED_AT|RELEVANT_FOR_EMPLOYEES_WITH]-&gt;(x)\r\n      WHERE\r\n        (x:OrganizationalUnit AND x.id IN $organizationalUnitIds) OR\r\n        (x:Location AND x.id IN $locationIds)\r\n    }\r\n    RETURN relationship, knowledgeEntry;","link":"https://stackoverflow.com/questions/60281002/neo4j-cypher-conditional-where-statement-depending-on-parameter/60289360#60289360","title":"Neo4J Cypher conditional where statement depending on parameter"}],"owner":{"reputation":524,"user_id":8478684,"user_type":"registered","accept_rate":75,"profile_image":"https://lh4.googleusercontent.com/-s4wDkeKDlG0/AAAAAAAAAAI/AAAAAAAAAnY/O7igOjoiWio/photo.jpg?sz=128","display_name":"Timo Jokinen","link":"https://stackoverflow.com/users/8478684/timo-jokinen"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1582076475,"creation_date":1582029200,"question_id":60281002,"share_link":"https://stackoverflow.com/q/60281002","body_markdown":"I&#39;m trying to write a query that takes four parameters which are all lists of ids and which should filter the results.\r\n\r\nI have nodes called KnowledgeEntry which have multiple KnowledgeRecords attached to them\r\n\r\n    (:KnowledgeEntry)-[:CONTAINS]-&gt;(:KnowledgeRecord)\r\n\r\nKnowledgeRecords each have four types of relations to nodes of type Location, Community, Function or OrganizationalUnit which all have an id attribute.\r\n\r\nI want to retrieve all KnowledgeEntries if they have one or more KnowledgeRecords that have a relation to Location, Community, Function or OU where id matches one of the items in the given list (parameter)\r\n\r\nThis is what I came up with so far:\r\n\r\n    MATCH (knowledgeEntry:KnowledgeEntry)-[relationship]-(:KnowledgeEntry)\r\n    WHERE EXISTS {\r\n        MATCH (knowledgeEntry)-[:CONTAINS]-&gt;(:KnowledgeRecord)-[:BASED_AT]-&gt;(loc:Location)\r\n        WHERE loc.id IN $filters.locationIds\r\n    }\r\n    \r\n    RETURN relationship, knowledgeEntry;\r\n\r\nThis only works if all parameters used are set. If for example $filters.locationIds has no entries or is null the where statement should be ignored. I tried this with CASE statement and apoc.when but had no success.\r\n\r\nWhen adding an OR EXISTS for e.g OrganizationalUnit I get an error &quot;There should be at least one pattern expression&quot;\r\n\r\n    MATCH (knowledgeEntry:KnowledgeEntry)-[relationship]-(:KnowledgeEntry)\r\n    WHERE EXISTS {\r\n        MATCH (knowledgeEntry)-[:CONTAINS]-&gt;(:KnowledgeRecord)-[:BASED_AT]-&gt;(loc:Location)\r\n        WHERE loc.id IN $locationIds\r\n    }\r\n    \r\n    OR EXISTS {\r\n        MATCH (knowledgeEntry)-[:CONTAINS]-&gt;(:KnowledgeRecord)-[:RELEVANT_FOR_EMPLOYEES_WITH]-&gt;(ou:OrganizationalUnit)\r\n        WHERE ou.id IN $organizationalUnitIds\r\n    }\r\n    \r\n    RETURN relationship, knowledgeEntry;","link":"https://stackoverflow.com/questions/60281002/neo4j-cypher-conditional-where-statement-depending-on-parameter","title":"Neo4J Cypher conditional where statement depending on parameter"},{"tags":["python","neo4j","bolt"],"answers":[{"tags":[],"owner":{"reputation":177,"user_id":6247361,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/tRo5b.jpg?s=128&g=1","display_name":"Michael Porter","link":"https://stackoverflow.com/users/6247361/michael-porter"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1582625026,"creation_date":1582625026,"answer_id":60391952,"question_id":60280945,"share_link":"https://stackoverflow.com/a/60391952","body_markdown":"So the issue turned out to be that the Neo4j instance is behind a load balancer that only accepts HTTP requests. You have to change ports and add your own cert to make it work. ","link":"https://stackoverflow.com/questions/60280945/neo4j-connection-failing-bitnami-aws/60391952#60391952","title":"Neo4j connection failing - Bitnami AWS"}],"owner":{"reputation":177,"user_id":6247361,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/tRo5b.jpg?s=128&g=1","display_name":"Michael Porter","link":"https://stackoverflow.com/users/6247361/michael-porter"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60391952,"answer_count":1,"score":0,"last_activity_date":1582625026,"creation_date":1582028973,"question_id":60280945,"share_link":"https://stackoverflow.com/q/60280945","body_markdown":"I&#39;ve trying to connect to a remote Neo4j instance via the python driver. I&#39;m using python 3.7 and the most up to date version of the driver. I have no issues connecting via the browser and I get this:\r\n```\r\nbolt://&lt;address&gt;:7687\r\n```\r\nNo issues but when I try the same address with the driver I get:\r\n```\r\nneobolt.exceptions.ServiceUnavailable: \r\nCannot to connect to Bolt service on (&#39;&lt;address&gt;&#39;, 7687) \r\n(looks like HTTP)\r\n```\r\nConf settings are:\r\n```\r\ndbms.connectors.default_listen_address=0.0.0.0\r\ndbms.connector.bolt.enabled=true\r\ndbms.connector.bolt.listen_address=0.0.0.0:7687\r\n```\r\n\r\nAnyone else run into this?","link":"https://stackoverflow.com/questions/60280945/neo4j-connection-failing-bitnami-aws","title":"Neo4j connection failing - Bitnami AWS"},{"tags":["neo4j","apache-kafka","apache-kafka-connect"],"comments":[{"owner":{"reputation":104595,"user_id":2308683,"user_type":"registered","accept_rate":90,"profile_image":"https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG","display_name":"cricket_007","link":"https://stackoverflow.com/users/2308683/cricket-007"},"edited":false,"score":0,"creation_date":1582021219,"post_id":60276963,"comment_id":106623916,"link":"https://stackoverflow.com/questions/60276963/neo4j-sink-connector-configuration-to-add#comment106623916_60276963"},{"owner":{"reputation":1,"user_id":3694114,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/3b4830289a802d9b34291699b68b121f?s=128&d=identicon&r=PG&f=1","display_name":"user3694114","link":"https://stackoverflow.com/users/3694114/user3694114"},"reply_to_user":{"reputation":104595,"user_id":2308683,"user_type":"registered","accept_rate":90,"profile_image":"https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG","display_name":"cricket_007","link":"https://stackoverflow.com/users/2308683/cricket-007"},"edited":false,"score":0,"creation_date":1582797075,"post_id":60276963,"comment_id":106903611,"link":"https://stackoverflow.com/questions/60276963/neo4j-sink-connector-configuration-to-add#comment106903611_60276963"}],"answers":[{"tags":[],"owner":{"reputation":13490,"user_id":350613,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/2bded62396ea66c84bd10e91c718dea9?s=128&d=identicon&r=PG","display_name":"Robin Moffatt","link":"https://stackoverflow.com/users/350613/robin-moffatt"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1582019744,"creation_date":1582019744,"answer_id":60278126,"question_id":60276963,"share_link":"https://stackoverflow.com/a/60278126","body_markdown":"You&#39;re using the JsonConverter in your `key` too, so need to specify `schemas.enable` there as well: \r\n\r\n```\r\ncurl -X PUT http://localhost:8083/connectors/Neo4j-Sink-Connect-book/config -H &quot;Content-Type: application/json&quot; -d &#39;{\r\n    &quot;topics&quot;: &quot;pls.bookneo&quot;,\r\n    &quot;connector.class&quot;: &quot;streams.kafka.connect.sink.Neo4jSinkConnector&quot;,\r\n    &quot;key.converter&quot;:&quot;org.apache.kafka.connect.json.JsonConverter&quot;,\r\n    &quot;key.converter.schemas.enable&quot;: &quot;false&quot;,\r\n    &quot;value.converter&quot;:&quot;org.apache.kafka.connect.json.JsonConverter&quot;,\r\n    &quot;value.converter.schemas.enable&quot;: &quot;false&quot;,\r\n    &quot;neo4j.server.uri&quot;: &quot;bolt://localhost:7687&quot;,\r\n    &quot;neo4j.authentication.basic.username&quot;: &quot;neo4j&quot;,\r\n    &quot;neo4j.authentication.basic.password&quot;: &quot;*****&quot;\r\n\r\n}&#39;\r\n```\r\n\r\nTo learn more about converters see https://www.confluent.io/blog/kafka-connect-deep-dive-converters-serialization-explained/","link":"https://stackoverflow.com/questions/60276963/neo4j-sink-connector-configuration-to-add/60278126#60278126","title":"neo4j sink connector configuration to add"}],"owner":{"reputation":1,"user_id":3694114,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/3b4830289a802d9b34291699b68b121f?s=128&d=identicon&r=PG&f=1","display_name":"user3694114","link":"https://stackoverflow.com/users/3694114/user3694114"},"last_editor":{"reputation":1,"user_id":3694114,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/3b4830289a802d9b34291699b68b121f?s=128&d=identicon&r=PG&f=1","display_name":"user3694114","link":"https://stackoverflow.com/users/3694114/user3694114"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1582797291,"creation_date":1582015770,"last_edit_date":1582797291,"question_id":60276963,"share_link":"https://stackoverflow.com/q/60276963","body_markdown":"I am facing the below error.while adding the neo4j sink connector in confluent platform.\r\n\r\n&gt; Caused by: org.apache.kafka.connect.errors.DataException:\r\n&gt; JsonConverter with schemas.enable requires &quot;schema&quot; and &quot;payload&quot;\r\n&gt; fields and may not contain additional fields. If you are trying to\r\n&gt; deserialize plain JSON data, set schemas.enable=false in your\r\n&gt; converter configuration. \tat\r\n&gt; org.apache.kafka.connect.json.JsonConverter.toConnectData(JsonConverter.java:359)\r\n\r\nplease check the below configuration part:\r\n```\r\ncurl -X PUT http://localhost:8083/connectors/Neo4j-Sink-Connect-book/config -H &quot;Content-Type: application/json&quot; -d &#39;{\r\n\r\n    &quot;topics&quot;: &quot;pls.bookneo&quot;,\r\n    &quot;connector.class&quot;: &quot;streams.kafka.connect.sink.Neo4jSinkConnector&quot;,\r\n\t&quot;key.converter&quot;:&quot;org.apache.kafka.connect.json.JsonConverter&quot;,\r\n\t&quot;value.converter&quot;:&quot;org.apache.kafka.connect.json.JsonConverter&quot;,\r\n\t&quot;value.converter.schemas.enable&quot;: &quot;false&quot;,\r\n    &quot;neo4j.server.uri&quot;: &quot;bolt://localhost:7687&quot;,\r\n    &quot;neo4j.authentication.basic.username&quot;: &quot;neo4j&quot;,\r\n    &quot;neo4j.authentication.basic.password&quot;: &quot;*****&quot;\r\n\r\n}&#39;\r\n```\r\n\r\nUpdated changes as follows :\r\ncurl -X PUT http://localhost:8083/connectors/Neo4j-Sink-Connect-book/config -H &quot;Content-Type: application/json&quot; -d &#39;{\r\n\r\n    &quot;topics&quot;: &quot;pulseTest.bookneo&quot;,\r\n    &quot;connector.class&quot;: &quot;streams.kafka.connect.sink.Neo4jSinkConnector&quot;,\r\n\t&quot;key.converter.schema.registry.url&quot;: &quot;http://localhost:8081&quot;, \r\n\t&quot;value.converter.schema.registry.url&quot;: &quot;http://localhost:8081&quot;, \r\n\t&quot;key.converter&quot;: &quot;org.apache.kafka.connect.storage.StringConverter&quot;,\r\n\t&quot;value.converter&quot;: &quot;io.confluent.connect.avro.AvroConverter&quot;,\r\n\t&quot;key.converter.schemas.enable&quot;:&quot;false&quot;,\r\n\t&quot;value.converter.schemas.enable&quot;:&quot;true&quot;,\r\n    &quot;neo4j.server.uri&quot;: &quot;bolt://localhost:7687&quot;,\r\n    &quot;neo4j.authentication.basic.username&quot;: &quot;neo4j&quot;,\r\n    &quot;neo4j.authentication.basic.password&quot;: &quot;pulse&quot;,\r\n    &quot;neo4j.encryption.enabled&quot;: false,\r\n    &quot;neo4j.topic.cdc.schema&quot;: &quot;pulseTest.bookneo&quot;\r\n\r\n\t\r\n}&#39;\r\n\r\nnow facing the issue :\r\n\r\nCaused by: org.apache.kafka.connect.errors.DataException: Failed to deserialize data for topic pulseTest.bookneo to Avro: \r\n\tat io.confluent.connect.avro.AvroConverter.toConnectData(AvroConverter.java:110)\r\n\tat org.apache.kafka.connect.storage.Converter.toConnectData(Converter.java:86)\r\n\tat org.apache.kafka.connect.runtime.WorkerSinkTask.lambda$convertAndTransformRecord$2(WorkerSinkTask.java:488)\r\n\tat org.apache.kafka.connect.runtime.errors.RetryWithToleranceOperator.execAndRetry(RetryWithToleranceOperator.java:128)\r\n\tat org.apache.kafka.connect.runtime.errors.RetryWithToleranceOperator.execAndHandleError(RetryWithToleranceOperator.java:162)\r\n\t... 13 more\r\nCaused by: org.apache.kafka.common.errors.SerializationException: Unknown magic byte!\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/60276963/neo4j-sink-connector-configuration-to-add","title":"neo4j sink connector configuration to add"},{"tags":["neo4j","cypher","constraints","shortest-path"],"answers":[{"tags":[],"owner":{"reputation":171,"user_id":12205676,"user_type":"registered","profile_image":"https://i.stack.imgur.com/nePIV.jpg?s=128&g=1","display_name":"Nathan Smith","link":"https://stackoverflow.com/users/12205676/nathan-smith"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582158756,"creation_date":1582158756,"answer_id":60311309,"question_id":60275762,"share_link":"https://stackoverflow.com/a/60311309","body_markdown":"Try the graph algorithms library. https://neo4j.com/docs/graph-algorithms/current/labs-algorithms/shortest-path/\r\n\r\n```\r\n//1.\r\nMATCH (start:node {name: &#39;1&#39;}), (end:node {name: &#39;4&#39;})\r\nCALL algo.shortestPath.stream(start, end, &#39;cost&#39;, {\r\n  nodeQuery:&#39;MATCH (n:node) RETURN id(n) as id&#39;,\r\n  relationshipQuery:&#39;MATCH (n:node)-[r:edge]-&gt;(m:node) WHERE r.Property1=&quot;P1&quot; and r.Property2=&quot;P2&quot; RETURN id(n) AS source, id(m) AS target, r.cost AS weight&#39;,\r\n    graph: &#39;cypher&#39;, duplicateRelationships: &#39;min&#39;})\r\nYIELD nodeId, cost\r\nRETURN algo.asNode(nodeId).name AS name, cost;\r\n\r\n//2.\r\nMATCH (start:node {name: &#39;1&#39;}), (end:node {name: &#39;4&#39;})\r\nCALL algo.shortestPath.stream(start, end, &#39;cost&#39;, {\r\n  nodeQuery:&#39;MATCH (n:node) RETURN id(n) as id&#39;,\r\n  relationshipQuery:&#39;MATCH (n:node)-[r:edge]-&gt;(m:node) WHERE r.Property1=&quot;P1&quot; RETURN id(n) AS source, id(m) AS target, r.cost AS weight&#39;,\r\n    graph: &#39;cypher&#39;, duplicateRelationships: &#39;min&#39;})\r\nYIELD nodeId, cost\r\nRETURN algo.asNode(nodeId).name AS name, cost;\r\n\r\n//3.\r\nMATCH (start:node {name: &#39;1&#39;}), (end:node {name: &#39;4&#39;})\r\nCALL algo.shortestPath.stream(start, end, &#39;cost&#39;, {\r\n  nodeQuery:&#39;MATCH (n:node) RETURN id(n) as id&#39;,\r\n  relationshipQuery:&#39;MATCH (n:node)-[r:edge]-&gt;(m:node) WHERE r.Property2=&quot;P2&quot; RETURN id(n) AS source, id(m) AS target, r.cost AS weight&#39;,\r\n    graph: &#39;cypher&#39;, duplicateRelationships: &#39;min&#39;})\r\nYIELD nodeId, cost\r\nRETURN algo.asNode(nodeId).name AS name, cost;\r\n\r\n//4.\r\nMATCH (start:node {name: &#39;1&#39;}), (end:node {name: &#39;4&#39;})\r\nCALL algo.shortestPath.stream(start, end, &#39;cost&#39;, {\r\n  nodeQuery:&#39;MATCH (n:node) RETURN id(n) as id&#39;,\r\n  relationshipQuery:&#39;MATCH (n:node)-[r:edge]-&gt;(m:node) WHERE r.Property1=&quot;P1&quot; or r.Property2 = &quot;P2&quot; RETURN id(n) AS source, id(m) AS target, r.cost AS weight&#39;,\r\n    graph: &#39;cypher&#39;, duplicateRelationships: &#39;min&#39;})\r\nYIELD nodeId, cost\r\nRETURN algo.asNode(nodeId).name AS name, cost;\r\n\r\n//5.\r\nMATCH (start:node {name: &#39;1&#39;}), (end:node {name: &#39;4&#39;})\r\nCALL algo.shortestPath.stream(start, end, &#39;cost&#39;, {\r\n  nodeQuery:&#39;MATCH (n:node) RETURN id(n) as id&#39;,\r\n  relationshipQuery:&#39;MATCH (n:node)-[r:edge]-&gt;(m:node) WHERE  coalesce(r.Property1, &quot;P2&quot;)&lt;&gt;&quot;P1&quot; RETURN id(n) AS source, id(m) AS target, r.cost AS weight&#39;,\r\n    graph: &#39;cypher&#39;, duplicateRelationships: &#39;min&#39;})\r\nYIELD nodeId, cost\r\nRETURN algo.asNode(nodeId).name AS name, cost;\r\n","link":"https://stackoverflow.com/questions/60275762/relationship-constraints-on-weighted-shortest-path-in-neo4j-cypher/60311309#60311309","title":"Relationship Constraints on weighted shortest path in neo4j cypher"}],"owner":{"reputation":165,"user_id":6709526,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/06c93ae0092c49989ba226f3acc9dec6?s=128&d=identicon&r=PG&f=1","display_name":"AJAY HAYAGREEVE","link":"https://stackoverflow.com/users/6709526/ajay-hayagreeve"},"last_editor":{"reputation":165,"user_id":6709526,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/06c93ae0092c49989ba226f3acc9dec6?s=128&d=identicon&r=PG&f=1","display_name":"AJAY HAYAGREEVE","link":"https://stackoverflow.com/users/6709526/ajay-hayagreeve"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1582158756,"creation_date":1582010757,"last_edit_date":1582015397,"question_id":60275762,"share_link":"https://stackoverflow.com/q/60275762","body_markdown":"I am experimenting with neo4j. \r\nI have a graph like this.\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ql3p9.png\r\n\r\n\r\nThe query to create the above graph:\r\n\r\n    merge (:node{name : &#39;1&#39;});\r\n    merge (:node{name : &#39;2&#39;});\r\n    merge (:node{name : &#39;3&#39;});\r\n    merge (:node{name : &#39;4&#39;});\r\n    merge (:node{name : &#39;5&#39;});\r\n    merge (:node{name : &#39;6&#39;});\r\n    merge (:node{name : &#39;7&#39;});\r\n    merge (:node{name : &#39;8&#39;});\r\n    \r\n    match (n1:node{name : &#39;1&#39;}), (n2:node{name : &#39;2&#39;}) merge (n1) -[:edge{cost : 100, Property1:&#39;P1&#39;, Property2: &#39;P2&#39;}]-&gt; (n2)\r\n    match (n1:node{name : &#39;2&#39;}), (n2:node{name : &#39;3&#39;}) merge (n1) -[:edge{cost : 100, Property1:&#39;P1&#39;, Property2: &#39;P2&#39;}]-&gt; (n2)\r\n    match (n1:node{name : &#39;3&#39;}), (n2:node{name : &#39;4&#39;}) merge (n1) -[:edge{cost : 200, Property1:&#39;P1&#39;, Property2: &#39;P2&#39;}]-&gt; (n2)\r\n    match (n1:node{name : &#39;1&#39;}), (n2:node{name : &#39;5&#39;}) merge (n1) -[:edge{cost : 40, Property1:&#39;P1&#39;}]-&gt; (n2)\r\n    match (n1:node{name : &#39;5&#39;}), (n2:node{name : &#39;6&#39;}) merge (n1) -[:edge{cost : 50, Property1:&#39;P1&#39;}]-&gt; (n2)\r\n    match (n1:node{name : &#39;6&#39;}), (n2:node{name : &#39;4&#39;}) merge (n1) -[:edge{cost : 60, Property1:&#39;P1&#39;}]-&gt; (n2)\r\n    match (n1:node{name : &#39;1&#39;}), (n2:node{name : &#39;7&#39;}) merge (n1) -[:edge{cost : 60, Property2: &#39;P2&#39;}]-&gt; (n2)\r\n    match (n1:node{name : &#39;7&#39;}), (n2:node{name : &#39;8&#39;}) merge (n1) -[:edge{cost : 60, Property2: &#39;P2&#39;}]-&gt; (n2)\r\n    match (n1:node{name : &#39;6&#39;}), (n2:node{name : &#39;8&#39;}) merge (n1) -[:edge{cost : 20, Property1:&#39;P1&#39;}]-&gt; (n2)\r\n    match (n1:node{name : &#39;8&#39;}), (n2:node{name : &#39;4&#39;}) merge (n1) -[:edge{cost : 20, Property2: &#39;P2&#39;}]-&gt; (n2)\r\n\r\nI want the answer to the following queries.\r\n\r\n1. Shortest path between 1 to 4 where relationship property : Property1 = &#39;P1&#39; and relationship property : Property2 = &#39;P2&#39; ( Cost : 400, 1 -&gt; 2 -&gt; 3 -&gt; 4)\r\n\r\n2. Shortest path between 1 to 4 where relationship property : Property1 = &#39;P1&#39; (Cost : 150, 1 -&gt; 5 -&gt; 6 -&gt; 4). Here the path (1 -&gt; 2 -&gt; 3 -&gt; 4) is also valid, but since its cost is large, it is not the answer. \r\n\r\n3. Shortest path between 1 to 4 where relationship property : Property2 = &#39;P2&#39; (Cost : 140, 1 -&gt; 7 -&gt; 8 -&gt; 4). Again here the path (1 -&gt; 2 -&gt; 3 -&gt; 4) is also valid, but since its cost is large, it is not the answer. \r\n\r\n4. Shortest path between 1 to 4 where relationship property : Property1 = &#39;P1&#39; or relationship property : Property2 = &#39;P2&#39; ( Cost : 130, 1 -&gt; 5 -&gt; 6 -&gt; 8 -&gt; 4). Here any path is valid, but the above path is the optimal. \r\n\r\n5. Shortest path between 1 to 4 where relationship property : Property1 != &#39;P1&#39;. (Cost : 140, 1 -&gt; 7 -&gt; 8 -&gt; 4). \r\n\r\n\r\nHere, Property1 can be anything and Property2 also can be anything (not necessarily &#39;P1&#39; and &#39;P2&#39; respectively.). In all cases, if there is an edge whose relationship property Property1 = &#39;P3&#39;, then that edge should be considered for optimal path. \r\n\r\nSuppose if I want to filter based on the node condition too (like node having Property = &#39;P5&#39;) along with relationship condition, can this be done ?\r\n\r\nAm using cypher query language. \r\n\r\nA good search on the internet gives only giving constraints on non weighted graph (https://stackoverflow.com/questions/17631953/cypher-shortest-path-with-constraint) \r\n","link":"https://stackoverflow.com/questions/60275762/relationship-constraints-on-weighted-shortest-path-in-neo4j-cypher","title":"Relationship Constraints on weighted shortest path in neo4j cypher"},{"tags":["grails","groovy","neo4j"],"comments":[{"owner":{"reputation":1433,"user_id":2209885,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/132faba9e60f4ce1d83f29de29128da4?s=128&d=identicon&r=PG","display_name":"erichelgeson","link":"https://stackoverflow.com/users/2209885/erichelgeson"},"edited":false,"score":0,"creation_date":1582035337,"post_id":60275241,"comment_id":106632073,"link":"https://stackoverflow.com/questions/60275241/grails-neo4j-run-app-giving-compilation-fails#comment106632073_60275241"},{"owner":{"reputation":37,"user_id":6229841,"user_type":"registered","profile_image":"https://graph.facebook.com/10153718166207874/picture?type=large","display_name":"Vamsi Krishna Reddy","link":"https://stackoverflow.com/users/6229841/vamsi-krishna-reddy"},"reply_to_user":{"reputation":1433,"user_id":2209885,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/132faba9e60f4ce1d83f29de29128da4?s=128&d=identicon&r=PG","display_name":"erichelgeson","link":"https://stackoverflow.com/users/2209885/erichelgeson"},"edited":false,"score":0,"creation_date":1582081212,"post_id":60275241,"comment_id":106650312,"link":"https://stackoverflow.com/questions/60275241/grails-neo4j-run-app-giving-compilation-fails#comment106650312_60275241"},{"owner":{"reputation":1433,"user_id":2209885,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/132faba9e60f4ce1d83f29de29128da4?s=128&d=identicon&r=PG","display_name":"erichelgeson","link":"https://stackoverflow.com/users/2209885/erichelgeson"},"edited":false,"score":0,"creation_date":1582120896,"post_id":60275241,"comment_id":106667612,"link":"https://stackoverflow.com/questions/60275241/grails-neo4j-run-app-giving-compilation-fails#comment106667612_60275241"},{"owner":{"reputation":37,"user_id":6229841,"user_type":"registered","profile_image":"https://graph.facebook.com/10153718166207874/picture?type=large","display_name":"Vamsi Krishna Reddy","link":"https://stackoverflow.com/users/6229841/vamsi-krishna-reddy"},"reply_to_user":{"reputation":1433,"user_id":2209885,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/132faba9e60f4ce1d83f29de29128da4?s=128&d=identicon&r=PG","display_name":"erichelgeson","link":"https://stackoverflow.com/users/2209885/erichelgeson"},"edited":false,"score":0,"creation_date":1582153088,"post_id":60275241,"comment_id":106683949,"link":"https://stackoverflow.com/questions/60275241/grails-neo4j-run-app-giving-compilation-fails#comment106683949_60275241"}],"owner":{"reputation":37,"user_id":6229841,"user_type":"registered","profile_image":"https://graph.facebook.com/10153718166207874/picture?type=large","display_name":"Vamsi Krishna Reddy","link":"https://stackoverflow.com/users/6229841/vamsi-krishna-reddy"},"last_editor":{"reputation":37,"user_id":6229841,"user_type":"registered","profile_image":"https://graph.facebook.com/10153718166207874/picture?type=large","display_name":"Vamsi Krishna Reddy","link":"https://stackoverflow.com/users/6229841/vamsi-krishna-reddy"},"comment_count":4,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1582153240,"creation_date":1582008440,"last_edit_date":1582153240,"question_id":60275241,"share_link":"https://stackoverflow.com/q/60275241","body_markdown":"I am trying to learn grails by following this link (https://guides.grails.org/neo4j-movies/guide/index.html) on neo4j graph database. I am trying to compile the grails project after adding necessary modifications as per the link but I am receiving the following error when doing grails run-app. I like to know if the error is because of the link&#39;s code or some other internal groovy error. Here is the stacktrace:\r\n\r\nhere are the files:\r\nMovieController.groovy\r\n```\r\npackage neo4j.movies\r\n\r\n\r\nimport grails.rest.*\r\nimport grails.converters.*\r\nimport groovy.transform.CompileStatic\r\n\r\n@CompileStatic\r\nclass MovieController {\r\n\tstatic responseFormats = [&#39;json&#39;, &#39;xml&#39;]\r\n        MovieService movieService\r\n\r\n    MovieController() {}\r\n\t\r\n    def index() { }\r\n\r\n    def show(String title) {\r\n        respond movieService.find(title)\r\n    }\r\n}\r\n\r\n```\r\nMovieService.groovy\r\n```\r\npackage neo4j.movies\r\n\r\nimport grails.gorm.services.Service\r\nimport groovy.transform.CompileDynamic\r\nimport groovy.transform.CompileStatic\r\n\r\n@SuppressWarnings([&#39;UnusedVariable&#39;, &#39;SpaceAfterOpeningBrace&#39;, &#39;SpaceBeforeClosingBrace&#39;])\r\n@CompileStatic\r\n@Service(Movie)\r\nclass MovieService {\r\n\r\n    MovieService() {}\r\n\r\n    def serviceMethod() {\r\n\r\n    }\r\n\r\n    @Join(&#39;cast&#39;)\r\n    abstract Movie find(String title)\r\n}\r\n\r\n```\r\n\r\n```\r\n2020-02-20 04:26:52.043 ERROR --- [           main] o.s.b.f.s.DefaultListableBeanFactory     : Destroy method on bean with name &#39;org.springframework.context.annotation.internalScheduledAnnotationProcessor&#39; threw an exception\r\n\r\njava.lang.IllegalStateException: ApplicationEventMulticaster not initialized - call &#39;refresh&#39; before multicasting events via the context: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@54db99: startup date [Thu Feb 20 04:26:49 IST 2020]; root of context hierarchy\r\n        at org.springframework.context.support.AbstractApplicationContext.getApplicationEventMulticaster(AbstractApplicationContext.java:414)\r\n        at org.springframework.context.support.ApplicationListenerDetector.postProcessBeforeDestruction(ApplicationListenerDetector.java:97)\r\n        at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:253)\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:578)\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:554)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingleton(DefaultListableBeanFactory.java:961)\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:523)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons(DefaultListableBeanFactory.java:968)\r\n        at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1030)\r\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:556)\r\n        at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122)\r\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:693)\r\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:360)\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:303)\r\n        at grails.boot.GrailsApp.run(GrailsApp.groovy:83)\r\n        at grails.boot.GrailsApp.run(GrailsApp.groovy:388)\r\n        at grails.boot.GrailsApp.run(GrailsApp.groovy:375)\r\n        at grails.boot.GrailsApp$run.call(Unknown Source)\r\n        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:48)\r\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:113)\r\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:133)\r\n        at neo4j.movies.Application.main(Application.groovy:8)\r\n\r\n2020-02-20 04:26:52.047 ERROR --- [           main] o.s.b.f.s.DefaultListableBeanFactory     : Destroy method on bean with name &#39;org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor&#39; threw an exception\r\n\r\njava.lang.IllegalStateException: ApplicationEventMulticaster not initialized - call &#39;refresh&#39; before multicasting events via the context: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@54db99: startup date [Thu Feb 20 04:26:49 IST 2020]; root of context hierarchy\r\n        at org.springframework.context.support.AbstractApplicationContext.getApplicationEventMulticaster(AbstractApplicationContext.java:414)\r\n        at org.springframework.context.support.ApplicationListenerDetector.postProcessBeforeDestruction(ApplicationListenerDetector.java:97)\r\n        at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:253)\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:578)\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:554)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingleton(DefaultListableBeanFactory.java:961)\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:523)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons(DefaultListableBeanFactory.java:968)\r\n        at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1030)\r\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:556)\r\n        at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122)\r\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:693)\r\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:360)\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:303)\r\n        at grails.boot.GrailsApp.run(GrailsApp.groovy:83)\r\n        at grails.boot.GrailsApp.run(GrailsApp.groovy:388)\r\n        at grails.boot.GrailsApp.run(GrailsApp.groovy:375)\r\n        at grails.boot.GrailsApp$run.call(Unknown Source)\r\n        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:48)\r\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:113)\r\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:133)\r\n        at neo4j.movies.Application.main(Application.groovy:8)\r\n\r\n2020-02-20 04:26:52.047 ERROR --- [           main] o.s.b.f.s.DefaultListableBeanFactory     : Destroy method on bean with name &#39;grailsApplicationPostProcessor&#39; threw an exception\r\n\r\njava.lang.IllegalStateException: ApplicationEventMulticaster not initialized - call &#39;refresh&#39; before multicasting events via the context: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@54db99: startup date [Thu Feb 20 04:26:49 IST 2020]; root of context hierarchy\r\n        at org.springframework.context.support.AbstractApplicationContext.getApplicationEventMulticaster(AbstractApplicationContext.java:414)\r\n        at org.springframework.context.support.ApplicationListenerDetector.postProcessBeforeDestruction(ApplicationListenerDetector.java:97)\r\n        at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:253)\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:578)\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:554)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingleton(DefaultListableBeanFactory.java:961)\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:523)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons(DefaultListableBeanFactory.java:968)\r\n        at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1030)\r\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:556)\r\n        at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122)\r\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:693)\r\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:360)\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:303)\r\n        at grails.boot.GrailsApp.run(GrailsApp.groovy:83)\r\n        at grails.boot.GrailsApp.run(GrailsApp.groovy:388)\r\n        at grails.boot.GrailsApp.run(GrailsApp.groovy:375)\r\n        at grails.boot.GrailsApp$run.call(Unknown Source)\r\n        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:48)\r\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:113)\r\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:133)\r\n        at neo4j.movies.Application.main(Application.groovy:8)\r\n\r\n2020-02-20 04:26:52.047 ERROR --- [           main] o.s.b.f.s.DefaultListableBeanFactory     : Destroy method on bean with name &#39;org.springframework.boot.autoconfigure.internalCachingMetadataReaderFactory&#39; threw an exception\r\n\r\njava.lang.IllegalStateException: ApplicationEventMulticaster not initialized - call &#39;refresh&#39; before multicasting events via the context: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@54db99: startup date [Thu Feb 20 04:26:49 IST 2020]; root of context hierarchy\r\n        at org.springframework.context.support.AbstractApplicationContext.getApplicationEventMulticaster(AbstractApplicationContext.java:414)\r\n        at org.springframework.context.support.ApplicationListenerDetector.postProcessBeforeDestruction(ApplicationListenerDetector.java:97)\r\n        at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:253)\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:578)\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:554)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingleton(DefaultListableBeanFactory.java:961)\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:523)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons(DefaultListableBeanFactory.java:968)\r\n        at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1030)\r\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:556)\r\n        at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122)\r\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:693)\r\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:360)\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:303)\r\n        at grails.boot.GrailsApp.run(GrailsApp.groovy:83)\r\n        at grails.boot.GrailsApp.run(GrailsApp.groovy:388)\r\n        at grails.boot.GrailsApp.run(GrailsApp.groovy:375)\r\n        at grails.boot.GrailsApp$run.call(Unknown Source)\r\n        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:48)\r\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:113)\r\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:133)\r\n        at neo4j.movies.Application.main(Application.groovy:8)\r\n\r\n2020-02-20 04:26:52.063 ERROR --- [           main] o.s.boot.SpringApplication               : Application startup failed\r\n\r\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;persistenceExceptionTranslationPostProcessor&#39; defined in class path resource [org/springframework/boot/autoconfigure/dao/PersistenceExceptionTranslationAutoConfiguration.class]: Unsatisfied dependency expressed through method &#39;persistenceExceptionTranslationPostProcessor&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;neo4jDatastoreServiceRegistry&#39;: Cannot resolve reference to bean &#39;neo4jDatastore&#39; while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;neo4jDatastore&#39;: Bean instantiation via constructor failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.grails.datastore.gorm.neo4j.Neo4jDatastore]: Constructor threw exception; nested exception is org.grails.datastore.mapping.model.DatastoreConfigurationException: Embedded Neo4j server was configured but &#39;neo4j-harness&#39; classes not found on classpath.\r\n        at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:749)\r\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:467)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1173)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1067)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:513)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\r\n        at org.springframework.context.support.PostProcessorRegistrationDelegate.registerBeanPostProcessors(PostProcessorRegistrationDelegate.java:223)\r\n        at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:703)\r\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:528)\r\n        at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122)\r\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:693)\r\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:360)\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:303)\r\n        at grails.boot.GrailsApp.run(GrailsApp.groovy:83)\r\n        at grails.boot.GrailsApp.run(GrailsApp.groovy:388)\r\n        at grails.boot.GrailsApp.run(GrailsApp.groovy:375)\r\n        at grails.boot.GrailsApp$run.call(Unknown Source)\r\n        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:48)\r\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:113)\r\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:133)\r\n        at neo4j.movies.Application.main(Application.groovy:8)\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;neo4jDatastoreServiceRegistry&#39;: Cannot resolve reference to bean &#39;neo4jDatastore&#39; while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;neo4jDatastore&#39;: Bean instantiation via constructor failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.grails.datastore.gorm.neo4j.Neo4jDatastore]: Constructor threw exception; nested exception is org.grails.datastore.mapping.model.DatastoreConfigurationException: Embedded Neo4j server was configured but &#39;neo4j-harness&#39; classes not found on classpath.\r\n        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:359)\r\n        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:108)\r\n        at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:648)\r\n        at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:145)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1193)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1095)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getSingletonFactoryBeanForTypeCheck(AbstractAutowireCapableBeanFactory.java:923)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getTypeForFactoryBean(AbstractAutowireCapableBeanFactory.java:804)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.isTypeMatch(AbstractBeanFactory.java:558)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doGetBeanNamesForType(DefaultListableBeanFactory.java:432)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:395)\r\n        at org.springframework.beans.factory.BeanFactoryUtils.beanNamesForTypeIncludingAncestors(BeanFactoryUtils.java:220)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1267)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1101)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1066)\r\n        at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:835)\r\n        at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:741)\r\n        ... 24 common frames omitted\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;neo4jDatastore&#39;: Bean instantiation via constructor failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.grails.datastore.gorm.neo4j.Neo4jDatastore]: Constructor threw exception; nested exception is org.grails.datastore.mapping.model.DatastoreConfigurationException: Embedded Neo4j server was configured but &#39;neo4j-harness&#39; classes not found on classpath.\r\n        at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:279)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1193)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1095)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:513)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)\r\n        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:351)\r\n        ... 40 common frames omitted\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.grails.datastore.gorm.neo4j.Neo4jDatastore]: Constructor threw exception; nested exception is org.grails.datastore.mapping.model.DatastoreConfigurationException: Embedded Neo4j server was configured but &#39;neo4j-harness&#39; classes not found on classpath.\r\n        at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:154)\r\n        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:122)\r\n        at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:271)\r\n        ... 49 common frames omitted\r\nCaused by: org.grails.datastore.mapping.model.DatastoreConfigurationException: Embedded Neo4j server was configured but &#39;neo4j-harness&#39; classes not found on classpath.\r\n        at org.grails.datastore.gorm.neo4j.connections.Neo4jConnectionSourceFactory.create(Neo4jConnectionSourceFactory.java:85)\r\n        at org.grails.datastore.gorm.neo4j.connections.Neo4jConnectionSourceFactory.create(Neo4jConnectionSourceFactory.java:30)\r\n        at org.grails.datastore.mapping.core.connections.AbstractConnectionSourceFactory.create(AbstractConnectionSourceFactory.java:64)\r\n        at org.grails.datastore.mapping.core.connections.AbstractConnectionSourceFactory.create(AbstractConnectionSourceFactory.java:52)\r\n        at org.grails.datastore.mapping.core.connections.ConnectionSourcesInitializer.create(ConnectionSourcesInitializer.groovy:24)\r\n        at org.grails.datastore.gorm.neo4j.Neo4jDatastore.&lt;init&gt;(Neo4jDatastore.java:228)\r\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n        at org.springsource.loaded.ri.ReflectiveInterceptor.jlrConstructorNewInstance(ReflectiveInterceptor.java:1075)\r\n        at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:142)\r\n\r\n```","link":"https://stackoverflow.com/questions/60275241/grails-neo4j-run-app-giving-compilation-fails","title":"Grails neo4j run-app giving compilation fails"},{"tags":["spring-boot","neo4j"],"owner":{"reputation":21,"user_id":11223207,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-kbX2VtT9DF4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re9vNAXeY0qgSAuQ23FkH5l3s6jGA/mo/photo.jpg?sz=128","display_name":"Brecht Pallemans","link":"https://stackoverflow.com/users/11223207/brecht-pallemans"},"last_editor":{"reputation":55,"user_id":11551569,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c74b69c0e08ebc8746bb034b09e1969c?s=128&d=identicon&r=PG&f=1","display_name":"Alexandre","link":"https://stackoverflow.com/users/11551569/alexandre"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1582166190,"creation_date":1581964239,"last_edit_date":1582166190,"question_id":60268504,"share_link":"https://stackoverflow.com/q/60268504","body_markdown":"I am using neo4j for a project and I have a google cloud instance of neo4j running. \r\nUsing the bolt protocol I can connect with this instance through the neo4j browser.\r\nIn the project, it works to have a local connection running on my laptop, but when I use the same bolt connection uri as I use in the browser for my cloud instance I get this error: \r\n\r\n    org.neo4j.driver.exceptions.ServiceUnavailableException: Connection to the database terminated. Please ensure that your database is listening on the correct host and port and that you have compatible encryption settings both on Neo4j server and driver. Note that the default encryption setting has changed in Neo4j 4.0.\r\n\r\nClearly, it has something to do with the encryption settings. But I haven&#39;t, after hours of searching the internet for a solution, came closer to it. Dependencies are managed in gradle and the spring boot version is 2.2.4.RELEASE: \r\n\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n\r\n    runtimeOnly(&#39;org.springframework.cloud:spring-cloud-gcp-starter-sql-postgresql:1.2.1.RELEASE&#39;)\r\n    runtimeOnly(&#39;com.h2database:h2&#39;)\r\n\r\n    compileOnly &#39;org.projectlombok:lombok&#39;\r\n    annotationProcessor &#39;org.projectlombok:lombok&#39;\r\n\r\n    testImplementation(&#39;org.springframework.boot:spring-boot-starter-test&#39;)\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-data-neo4j&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-data-rest&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-devtools&#39;\r\n    compile &#39;org.neo4j:neo4j:4.0.0&#39;\r\n    compile &#39;org.neo4j:neo4j-ogm-bolt-driver&#39;\r\n\r\napplication.properties looks like this\r\n\r\n    spring.data.neo4j.uri=bolt://34.76.157.40:7687\r\n    spring.data.neo4j.username=neo4j\r\n    spring.data.neo4j.password=******\r\n\r\nI have tried to set back the version of neo4j, since we do not specifically need 4.0.0, but this does not work. There is no config class in my project, and this issue is not related to the annotations I believe since it works locally.\r\n\r\nAnyone who encountered the same issue or might help? ","link":"https://stackoverflow.com/questions/60268504/cannot-connect-from-spring-boot-starter-data-neo4j-to-cloud-hosted-neo4j-server","title":"Cannot connect from spring-boot-starter-data-neo4j to cloud hosted neo4j server"},{"tags":["graph","neo4j","cypher","shortest-path","gtfs"],"answers":[{"comments":[{"owner":{"reputation":1,"user_id":6347425,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c2eb98eeca712366d3f38b7614ad7f7e?s=128&d=identicon&r=PG&f=1","display_name":"Guminator","link":"https://stackoverflow.com/users/6347425/guminator"},"edited":false,"score":0,"creation_date":1582016884,"post_id":60264113,"comment_id":106621441,"link":"https://stackoverflow.com/questions/60263187/how-find-shortest-path-in-transport-connection-by-using-cypher-query-neo4j-ove/60264113#comment106621441_60264113"},{"owner":{"reputation":308,"user_id":12251717,"user_type":"registered","profile_image":"https://i.stack.imgur.com/2ImiE.jpg?s=128&g=1","display_name":"TheTeacher","link":"https://stackoverflow.com/users/12251717/theteacher"},"reply_to_user":{"reputation":1,"user_id":6347425,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c2eb98eeca712366d3f38b7614ad7f7e?s=128&d=identicon&r=PG&f=1","display_name":"Guminator","link":"https://stackoverflow.com/users/6347425/guminator"},"edited":false,"score":0,"creation_date":1582023734,"post_id":60264113,"comment_id":106625543,"link":"https://stackoverflow.com/questions/60263187/how-find-shortest-path-in-transport-connection-by-using-cypher-query-neo4j-ove/60264113#comment106625543_60264113"},{"owner":{"reputation":1,"user_id":6347425,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c2eb98eeca712366d3f38b7614ad7f7e?s=128&d=identicon&r=PG&f=1","display_name":"Guminator","link":"https://stackoverflow.com/users/6347425/guminator"},"edited":false,"score":0,"creation_date":1582026642,"post_id":60264113,"comment_id":106627163,"link":"https://stackoverflow.com/questions/60263187/how-find-shortest-path-in-transport-connection-by-using-cypher-query-neo4j-ove/60264113#comment106627163_60264113"}],"tags":[],"owner":{"reputation":308,"user_id":12251717,"user_type":"registered","profile_image":"https://i.stack.imgur.com/2ImiE.jpg?s=128&g=1","display_name":"TheTeacher","link":"https://stackoverflow.com/users/12251717/theteacher"},"last_editor":{"reputation":308,"user_id":12251717,"user_type":"registered","profile_image":"https://i.stack.imgur.com/2ImiE.jpg?s=128&g=1","display_name":"TheTeacher","link":"https://stackoverflow.com/users/12251717/theteacher"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582023610,"last_edit_date":1582023610,"creation_date":1581947961,"answer_id":60264113,"question_id":60263187,"share_link":"https://stackoverflow.com/a/60264113","body_markdown":"```\r\nmatch (from:Stop {code:&#39;VBR&#39;}),(to:Stop {code:&#39;VIR&#39;})\r\nwith from,to\r\nmatch p = allshortestpaths((from)-[*]-&gt;(to)) // here you needed you give the direction to make sure paths are from &#39;VBR&#39; to &#39;VIR&#39;\r\nwhere NONE (x in relationships(p) where type(x)=&quot;OPERATES&quot;)\r\nreturn p\r\nlimit 10;\r\n```\r\nNext , if you want to see the nodes in the path , then you can use the nodes(p)\r\n\r\n```\r\nmatch (from:Stop {code:&#39;VBR&#39;}),(to:Stop {code:&#39;VIR&#39;})\r\nwith from,to\r\nmatch p = allshortestpaths((from)-[*]-&gt;(to)) \r\nwhere NONE (x in relationships(p) where type(x)=&quot;OPERATES&quot;)\r\nAND ALL(node in nodes WHERE node = from OR node = to OR YOUR CONDTION ON TRANSFER NODE)\r\nlimit 10\r\n```","link":"https://stackoverflow.com/questions/60263187/how-find-shortest-path-in-transport-connection-by-using-cypher-query-neo4j-ove/60264113#60264113","title":"How find shortest path in transport connection by using Cypher query (neo4j) over GTFS data?"}],"owner":{"reputation":1,"user_id":6347425,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c2eb98eeca712366d3f38b7614ad7f7e?s=128&d=identicon&r=PG&f=1","display_name":"Guminator","link":"https://stackoverflow.com/users/6347425/guminator"},"last_editor":{"reputation":1,"user_id":6347425,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c2eb98eeca712366d3f38b7614ad7f7e?s=128&d=identicon&r=PG&f=1","display_name":"Guminator","link":"https://stackoverflow.com/users/6347425/guminator"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1582023610,"creation_date":1581944929,"last_edit_date":1581945315,"question_id":60263187,"share_link":"https://stackoverflow.com/q/60263187","body_markdown":"I am new in neo4j, I created a graph following this [steps][1], based on a data model from GTFS. I would like to find all the shortest indirect routes in the graph (with transfers).\r\n[Data model of graph database][2] contains 4 entities: Route, Trip, Stop, Stoptime. Here is a screenshot of [db.scheme()][3]. \r\n\r\nBased on [query][4] which wrote Bruggen, I modified it for my use:\r\n\r\n    MATCH \r\n    (from:Stop {code:&#39;VBR&#39;})--(st_from:Stoptime),\r\n    (to:Stop {code:&#39;VIR&#39;})--(st_to:Stoptime),\r\n    p1=((st_from)-[:PRECEDES*]-&gt;(st_midway_arr:Stoptime)),\r\n    (st_midway_arr)--(midway:Stop),\r\n    (midway)--(st_midway_dep:Stoptime),\r\n    p2=((st_midway_dep)-[:PRECEDES*]-&gt;(st_to))\r\n    WHERE\r\n    st_from.departure_time &gt; &#39;00:00&#39;\r\n    AND st_from.departure_time &lt; &#39;23:00&#39;\r\n    AND st_midway_arr.arrival_time &gt; st_from.departure_time\r\n    AND st_midway_dep.departure_time &gt; st_midway_arr.arrival_time\r\n    AND st_to.arrival_time &gt; st_midway_dep.departure_time\r\n    RETURN\r\n    from,st_from,to,st_to,p1,p2,midway\r\n    order by (st_to.arrival_time_int-st_from.departure_time_int) ASC\r\n    limit 1;\r\n\r\nThis query is not using the shortest path, and it **takes in average 30s to find a path, but the output of the query is good**.\r\n\r\nSo I tried to write another query, with method allshortestpaths, it really fast (0,3s). But it returns me also trips which run in a different direction (VIR -&gt; VBR)... another problem is the timing od that connection.  \r\n\r\n**Could you help me, how to access to the transfer node (Station) when I am using allshortestpath method?** I want to write a condition for timing and stop_sequence to be sure that&#39;s the right direction. \r\n\r\n    match (from:Stop {code:&#39;VBR&#39;}),(to:Stop {code:&#39;VIR&#39;})\r\n    with from,to\r\n    match p = allshortestpaths((from)-[*]-(to))\r\n    where NONE (x in relationships(p) where type(x)=&quot;OPERATES&quot;)\r\n    return p\r\n    limit 10;\r\n\r\n  [1]: http://blog.bruggen.com/2015/11/loading-general-transport-feed-spec.html\r\n  [2]: https://i.stack.imgur.com/es1oN.png\r\n  [3]: https://i.stack.imgur.com/mrobf.png\r\n  [4]: https://gist.github.com/rvanbruggen/9f6efa3f426ee6ce724f","link":"https://stackoverflow.com/questions/60263187/how-find-shortest-path-in-transport-connection-by-using-cypher-query-neo4j-ove","title":"How find shortest path in transport connection by using Cypher query (neo4j) over GTFS data?"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":171,"user_id":12205676,"user_type":"registered","profile_image":"https://i.stack.imgur.com/nePIV.jpg?s=128&g=1","display_name":"Nathan Smith","link":"https://stackoverflow.com/users/12205676/nathan-smith"},"edited":false,"score":0,"creation_date":1581954831,"post_id":60259648,"comment_id":106600845,"link":"https://stackoverflow.com/questions/60259648/iterating-on-all-files-of-a-directory-from-neo4j#comment106600845_60259648"},{"owner":{"reputation":135,"user_id":5341632,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c004273daf4cad48c5abbbfe13fcab9c?s=128&d=identicon&r=PG&f=1","display_name":"Bruno C","link":"https://stackoverflow.com/users/5341632/bruno-c"},"reply_to_user":{"reputation":171,"user_id":12205676,"user_type":"registered","profile_image":"https://i.stack.imgur.com/nePIV.jpg?s=128&g=1","display_name":"Nathan Smith","link":"https://stackoverflow.com/users/12205676/nathan-smith"},"edited":false,"score":0,"creation_date":1581957858,"post_id":60259648,"comment_id":106602441,"link":"https://stackoverflow.com/questions/60259648/iterating-on-all-files-of-a-directory-from-neo4j#comment106602441_60259648"}],"owner":{"reputation":135,"user_id":5341632,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c004273daf4cad48c5abbbfe13fcab9c?s=128&d=identicon&r=PG&f=1","display_name":"Bruno C","link":"https://stackoverflow.com/users/5341632/bruno-c"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1581932627,"creation_date":1581932627,"question_id":60259648,"share_link":"https://stackoverflow.com/q/60259648","body_markdown":"How can I access the filesystem from a Neo4j script?\r\nI need to call apoc.load.json on all the files contained in a directory ...\r\n\r\nso the pseudo code should be\r\n```\r\nget list of files in  directory\r\nUNWIND list of files AS filename\r\ncall apoc.json.load (filename) YIELD value\r\nWITH value\r\nblah blah\r\nRETURN\r\n```\r\n","link":"https://stackoverflow.com/questions/60259648/iterating-on-all-files-of-a-directory-from-neo4j","title":"iterating on all files of a directory from neo4j"},{"tags":["spring-boot","neo4j","graph-databases"],"answers":[{"comments":[{"owner":{"reputation":21,"user_id":12910395,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-uyIQKBqLKYw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reocyuU10e4OmG25Wl5EudyPh0cpQ/photo.jpg?sz=128","display_name":"Tecore Demo","link":"https://stackoverflow.com/users/12910395/tecore-demo"},"edited":false,"score":0,"creation_date":1581943510,"post_id":60261875,"comment_id":106594442,"link":"https://stackoverflow.com/questions/60256433/how-to-get-leveldepth-number-of-two-connected-nodes-in-neo4j/60261875#comment106594442_60261875"},{"owner":{"reputation":1210,"user_id":1734996,"user_type":"registered","accept_rate":85,"profile_image":"https://i.stack.imgur.com/MaqL4.png?s=128&g=1","display_name":"Graphileon","link":"https://stackoverflow.com/users/1734996/graphileon"},"reply_to_user":{"reputation":21,"user_id":12910395,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-uyIQKBqLKYw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reocyuU10e4OmG25Wl5EudyPh0cpQ/photo.jpg?sz=128","display_name":"Tecore Demo","link":"https://stackoverflow.com/users/12910395/tecore-demo"},"edited":false,"score":1,"creation_date":1581958997,"post_id":60261875,"comment_id":106603076,"link":"https://stackoverflow.com/questions/60256433/how-to-get-leveldepth-number-of-two-connected-nodes-in-neo4j/60261875#comment106603076_60261875"},{"owner":{"reputation":21,"user_id":12910395,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-uyIQKBqLKYw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reocyuU10e4OmG25Wl5EudyPh0cpQ/photo.jpg?sz=128","display_name":"Tecore Demo","link":"https://stackoverflow.com/users/12910395/tecore-demo"},"edited":false,"score":0,"creation_date":1582007081,"post_id":60261875,"comment_id":106617163,"link":"https://stackoverflow.com/questions/60256433/how-to-get-leveldepth-number-of-two-connected-nodes-in-neo4j/60261875#comment106617163_60261875"}],"tags":[],"owner":{"reputation":1210,"user_id":1734996,"user_type":"registered","accept_rate":85,"profile_image":"https://i.stack.imgur.com/MaqL4.png?s=128&g=1","display_name":"Graphileon","link":"https://stackoverflow.com/users/1734996/graphileon"},"last_editor":{"reputation":1210,"user_id":1734996,"user_type":"registered","accept_rate":85,"profile_image":"https://i.stack.imgur.com/MaqL4.png?s=128&g=1","display_name":"Graphileon","link":"https://stackoverflow.com/users/1734996/graphileon"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581977513,"last_edit_date":1581977513,"creation_date":1581940459,"answer_id":60261875,"question_id":60256433,"share_link":"https://stackoverflow.com/a/60261875","body_markdown":"it would be something like this\r\n\r\n    // get all persons  (or users)\r\n    MATCH (p:Person) \r\n\r\n    // create a set of unique combinations , assuring that you do\r\n    // not do double work\r\n    WITH COLLECT(p) AS personList\r\n    UNWIND personList AS personA\r\n    UNWIND personList AS personB\r\n\r\n    WITH personA,personB\r\n    WHERE id(personA) &lt; id(personB)\r\n\r\n    // find the shortest path between any two nodes\r\n    MATCH path=shortestPath( (personA)-[:LINKED_TO*]-(personB) )\r\n\r\n    // return the distance  ( = path length) between the two nodes\r\n    RETURN personA.name AS nameA,\r\n           personB.name AS nameB,\r\n           CASE WHEN length(path) &gt; 3 THEN &#39;3+&#39;\r\n                ELSE toString(length(path))\r\n           END AS distance","link":"https://stackoverflow.com/questions/60256433/how-to-get-leveldepth-number-of-two-connected-nodes-in-neo4j/60261875#60261875","title":"How to get level(depth) number of two connected nodes in neo4j"},{"comments":[{"owner":{"reputation":21,"user_id":12910395,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-uyIQKBqLKYw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reocyuU10e4OmG25Wl5EudyPh0cpQ/photo.jpg?sz=128","display_name":"Tecore Demo","link":"https://stackoverflow.com/users/12910395/tecore-demo"},"edited":false,"score":0,"creation_date":1582092902,"post_id":60269102,"comment_id":106653229,"link":"https://stackoverflow.com/questions/60256433/how-to-get-leveldepth-number-of-two-connected-nodes-in-neo4j/60269102#comment106653229_60269102"}],"tags":[],"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1581967203,"creation_date":1581967203,"answer_id":60269102,"question_id":60256433,"share_link":"https://stackoverflow.com/a/60269102","body_markdown":"To find the shortest &quot;connection level&quot; between *2 specific people*, just get the shortest path and add 1:\r\n\r\n    MATCH path = shortestpath((p1:Person)-[*..]-(p2:Person))\r\n    WHERE p1.id = 1 AND p2.id = 2\r\n    RETURN LENGTH(path) + 1 AS level\r\n\r\n*NOTE: You may want to put a reasonable upper bound on the [variable-length relationship](https://neo4j.com/docs/developer-manual/3.4/cypher/clauses/match/#varlength-rels) pattern (e.g., `[*..6]`) to avoid having the query taking too long or running out of memory in a large DB). You should probably ignore very distant connections anyway.*","link":"https://stackoverflow.com/questions/60256433/how-to-get-leveldepth-number-of-two-connected-nodes-in-neo4j/60269102#60269102","title":"How to get level(depth) number of two connected nodes in neo4j"}],"owner":{"reputation":21,"user_id":12910395,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-uyIQKBqLKYw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reocyuU10e4OmG25Wl5EudyPh0cpQ/photo.jpg?sz=128","display_name":"Tecore Demo","link":"https://stackoverflow.com/users/12910395/tecore-demo"},"last_editor":{"reputation":471,"user_id":12823412,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AAuE7mAUhGEz52PW4HY9zZUewzRt8UrYvNXYaQNYXzjH=k-s128=k-s128","display_name":"AVANISH RAJBHAR","link":"https://stackoverflow.com/users/12823412/avanish-rajbhar"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":60269102,"answer_count":2,"score":1,"last_activity_date":1581977513,"creation_date":1581917687,"last_edit_date":1581943257,"question_id":60256433,"share_link":"https://stackoverflow.com/q/60256433","body_markdown":"I&#39;m using neo4j as a graph database to store user&#39;s connections detail into this. here I want to show the level of one user with respect to another user in their connections like Linkedin. for example- first layer connection, second layer connection, third layer and above the third layer shows 3+. but I don&#39;t know how this happens using neo4j. i searched for this but couldn&#39;t find any solution for this. if anybody knows about this then please help me to implement this functionality.","link":"https://stackoverflow.com/questions/60256433/how-to-get-leveldepth-number-of-two-connected-nodes-in-neo4j","title":"How to get level(depth) number of two connected nodes in neo4j"},{"tags":["bash","neo4j"],"comments":[{"owner":{"reputation":81523,"user_id":89817,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/df253c3b6533949ea94f31f328f3e769?s=128&d=identicon&r=PG","display_name":"Gordon Davisson","link":"https://stackoverflow.com/users/89817/gordon-davisson"},"edited":false,"score":0,"creation_date":1581890825,"post_id":60252870,"comment_id":106578425,"link":"https://stackoverflow.com/questions/60252870/the-2nd-command-is-not-executed-before-terminating-the-previous-one#comment106578425_60252870"},{"owner":{"reputation":129,"user_id":10266998,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-gxYzaoeZZIw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaN23vgIemWoxVoYoxZ3T-Ef0FuNtQ/mo/photo.jpg?sz=128","display_name":"Pablo","link":"https://stackoverflow.com/users/10266998/pablo"},"reply_to_user":{"reputation":4296,"user_id":939457,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/684743552cfefe5dafb67424d5e6ddec?s=128&d=identicon&r=PG","display_name":"Sorin","link":"https://stackoverflow.com/users/939457/sorin"},"edited":false,"score":0,"creation_date":1581891451,"post_id":60252870,"comment_id":106578547,"link":"https://stackoverflow.com/questions/60252870/the-2nd-command-is-not-executed-before-terminating-the-previous-one#comment106578547_60252870"}],"answers":[{"tags":[],"owner":{"reputation":3757,"user_id":2908599,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Df1FU.jpg?s=128&g=1","display_name":"Romeo Ninov","link":"https://stackoverflow.com/users/2908599/romeo-ninov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581925207,"creation_date":1581925207,"answer_id":60257845,"question_id":60252870,"share_link":"https://stackoverflow.com/a/60257845","body_markdown":"As it it mentioned in first answer in the Q/A you should exec the commands on this way:\r\n\r\n    #!/bin/bash\r\n    ./bin/neo4j console &amp;\r\n    ./bin/cypher-shell -u neo4j -p 123456 --file cypher.ex1\r\n\r\nThis will run `./bin/neo4j console` in background. So you need to take care about this process and stop it in case of need:\r\n\r\n    PID=$(jobs -l |awk &#39;{print $2}&#39;)\r\n    kill $PID\r\n\r\n","link":"https://stackoverflow.com/questions/60252870/the-2nd-command-is-not-executed-before-terminating-the-previous-one/60257845#60257845","title":"The 2nd command is not executed before terminating the previous one"}],"owner":{"reputation":129,"user_id":10266998,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-gxYzaoeZZIw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaN23vgIemWoxVoYoxZ3T-Ef0FuNtQ/mo/photo.jpg?sz=128","display_name":"Pablo","link":"https://stackoverflow.com/users/10266998/pablo"},"last_editor":{"reputation":129,"user_id":10266998,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-gxYzaoeZZIw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaN23vgIemWoxVoYoxZ3T-Ef0FuNtQ/mo/photo.jpg?sz=128","display_name":"Pablo","link":"https://stackoverflow.com/users/10266998/pablo"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1581925207,"creation_date":1581884649,"last_edit_date":1581891611,"question_id":60252870,"share_link":"https://stackoverflow.com/q/60252870","body_markdown":"I&#39;m very new to bash. I&#39;m running a bash script. It is supposed to start Neo4j and then execute a series of queries located in a file called &quot;cypher.ex1&quot;. Here is the code:\r\n\r\n    #!/bin/bash\r\n    ./bin/neo4j console\r\n    ./bin/cypher-shell -u neo4j -p 123456 --file cypher.ex1\r\n\r\nIn order to use Cypher-shell, we should start the Neo4j service first. So, this line: \r\n\r\n    ./bin/neo4j console\r\n\r\nstarts the Neo4j, so that cypher-shell can be used using the following line:\r\n\r\n    ./bin/cypher-shell -u neo4j -p 123456 --file cypher.ex1\r\n\r\nThe problem is that since `./bin/neo4j console` starts the Neo4j service, the next command (`./bin/cypher-shell -u neo4j -p 123456 --file cypher.ex1`) is not executed unless I press the &quot;Ctrl + C&quot;. If I press &quot;Ctrl + C&quot;, the Neo4j service will be stopped and the following command will not be executed too (I get &quot;connection refused&quot; error). What should I do in order to start the Neo4j service and then run the cypher shell in this bash script?\r\n\r\nI tried the solutions given in https://stackoverflow.com/questions/26040212/run-a-command-in-background-and-another-command-in-frontground-in-the-same-line. None of them worked for me. For example, When I execute the code with &quot;(command1 &amp;); command2&quot; (As it was suggested in the proposed topic), my script is executed 2 times automatically. The first time command2 is executed and since the command1 is not executed I get &quot;connection refused&quot; error; The second time command1 is executed and command2 is not executed.","link":"https://stackoverflow.com/questions/60252870/the-2nd-command-is-not-executed-before-terminating-the-previous-one","title":"The 2nd command is not executed before terminating the previous one"},{"tags":["sql","node.js","spring","neo4j","graphql"],"answers":[{"comments":[{"owner":{"reputation":83,"user_id":3511426,"user_type":"registered","accept_rate":0,"profile_image":"https://www.gravatar.com/avatar/e468d8f60dbd69379fe394223b9ccb6c?s=128&d=identicon&r=PG&f=1","display_name":"Apurv","link":"https://stackoverflow.com/users/3511426/apurv"},"edited":false,"score":0,"creation_date":1581908191,"post_id":60253405,"comment_id":106581474,"link":"https://stackoverflow.com/questions/60252869/querying-multiple-data-sources-together/60253405#comment106581474_60253405"},{"owner":{"reputation":66,"user_id":951699,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/bd6ebb17237741d546ae99a477c81fe5?s=128&d=identicon&r=PG","display_name":"ANDREI FOMITCHEV","link":"https://stackoverflow.com/users/951699/andrei-fomitchev"},"reply_to_user":{"reputation":83,"user_id":3511426,"user_type":"registered","accept_rate":0,"profile_image":"https://www.gravatar.com/avatar/e468d8f60dbd69379fe394223b9ccb6c?s=128&d=identicon&r=PG&f=1","display_name":"Apurv","link":"https://stackoverflow.com/users/3511426/apurv"},"edited":false,"score":0,"creation_date":1582069587,"post_id":60253405,"comment_id":106647834,"link":"https://stackoverflow.com/questions/60252869/querying-multiple-data-sources-together/60253405#comment106647834_60253405"},{"owner":{"reputation":83,"user_id":3511426,"user_type":"registered","accept_rate":0,"profile_image":"https://www.gravatar.com/avatar/e468d8f60dbd69379fe394223b9ccb6c?s=128&d=identicon&r=PG&f=1","display_name":"Apurv","link":"https://stackoverflow.com/users/3511426/apurv"},"edited":false,"score":0,"creation_date":1582138600,"post_id":60253405,"comment_id":106677775,"link":"https://stackoverflow.com/questions/60252869/querying-multiple-data-sources-together/60253405#comment106677775_60253405"}],"tags":[],"owner":{"reputation":66,"user_id":951699,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/bd6ebb17237741d546ae99a477c81fe5?s=128&d=identicon&r=PG","display_name":"ANDREI FOMITCHEV","link":"https://stackoverflow.com/users/951699/andrei-fomitchev"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1581888632,"creation_date":1581888632,"answer_id":60253405,"question_id":60252869,"share_link":"https://stackoverflow.com/a/60253405","body_markdown":"CREATE DATABASE LINK dblink1 \r\n   CONNECT TO user1 IDENTIFIED BY password1 USING &#39;connect1&#39;;\r\n\r\nCREATE DATABASE LINK dblink2 \r\n   CONNECT TO user2 IDENTIFIED BY password2 USING &#39;connect2&#39;;\r\n\r\nselect * from table1@dblink1 AS t1, table2@dblink2 AS t2 where t1.userid=t2.userid and t2.duration &gt; 2000;\r\n\r\nNote: DB Link should be created once, select could be repeated many times.\r\n\r\nCREATE DATABASE LINK has many options, but I hope the idea helps.\r\n","link":"https://stackoverflow.com/questions/60252869/querying-multiple-data-sources-together/60253405#60253405","title":"Querying multiple Data Sources together"},{"comments":[{"owner":{"reputation":83,"user_id":3511426,"user_type":"registered","accept_rate":0,"profile_image":"https://www.gravatar.com/avatar/e468d8f60dbd69379fe394223b9ccb6c?s=128&d=identicon&r=PG&f=1","display_name":"Apurv","link":"https://stackoverflow.com/users/3511426/apurv"},"edited":false,"score":0,"creation_date":1582138686,"post_id":60291103,"comment_id":106677816,"link":"https://stackoverflow.com/questions/60252869/querying-multiple-data-sources-together/60291103#comment106677816_60291103"}],"tags":[],"owner":{"reputation":66,"user_id":951699,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/bd6ebb17237741d546ae99a477c81fe5?s=128&d=identicon&r=PG","display_name":"ANDREI FOMITCHEV","link":"https://stackoverflow.com/users/951699/andrei-fomitchev"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582070092,"creation_date":1582070092,"answer_id":60291103,"question_id":60252869,"share_link":"https://stackoverflow.com/a/60291103","body_markdown":"You can find NoSQL connection here: [NoSQL connection][1]\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/database/other-databases/nosql-database/cookbook/index.html","link":"https://stackoverflow.com/questions/60252869/querying-multiple-data-sources-together/60291103#60291103","title":"Querying multiple Data Sources together"}],"owner":{"reputation":83,"user_id":3511426,"user_type":"registered","accept_rate":0,"profile_image":"https://www.gravatar.com/avatar/e468d8f60dbd69379fe394223b9ccb6c?s=128&d=identicon&r=PG&f=1","display_name":"Apurv","link":"https://stackoverflow.com/users/3511426/apurv"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1582070092,"creation_date":1581884649,"question_id":60252869,"share_link":"https://stackoverflow.com/q/60252869","body_markdown":"We have multiple data sources, which have more than a billion records in different tables, most of them are Oracle SQL data sources along with a few NoSQL solutions. The primary fields have different names in different sources. SQL Queries can only join tables in a particular data source. Writing REST API&#39;s and stitching data in each API is not possible as our queries are dynamic and might change over time. \r\n\r\nHow can we tackle this problem, Can GraphQL servers help us stitch multiple data sources and query each with different conditions?\r\n\r\nWhat we seek is a query language that can query across data sources, stitch them together based on certain conditions like join queries and return us the resultset.\r\n\r\n    Table 1(Oracle SQL server 1):-\r\n\r\n    |username | age | tenant |\r\n     abc        56    US\r\n     xyz        32    IN\r\n    \r\n\r\n\r\n    Table 2 (Oracle SQL server 2):-\r\n\r\n    |userid | config | duration |\r\n     abc     {..json.}    2100s\r\n\r\n    the query could be like:- \r\n    select * from table1, table2 where table1.userid=table2.username and duration&gt;2000s\r\n\r\n","link":"https://stackoverflow.com/questions/60252869/querying-multiple-data-sources-together","title":"Querying multiple Data Sources together"},{"tags":["java","neo4j","java-8","graph-databases","jqassistant"],"comments":[{"owner":{"reputation":996,"user_id":2912200,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/92ac21b3d6cf9ba453c81d98e37892cb?s=128&d=identicon&r=PG&f=1","display_name":"Dirk Mahler","link":"https://stackoverflow.com/users/2912200/dirk-mahler"},"edited":false,"score":0,"creation_date":1581886155,"post_id":60250402,"comment_id":106577294,"link":"https://stackoverflow.com/questions/60250402/neo4j-error-starting-graphdatabasefacadefactory#comment106577294_60250402"}],"owner":{"reputation":177,"user_id":6911906,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f0670273cdcd36ee6541cc0f6cb47b1f?s=128&d=identicon&r=PG&f=1","display_name":"user538578964","link":"https://stackoverflow.com/users/6911906/user538578964"},"last_editor":{"reputation":177,"user_id":6911906,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f0670273cdcd36ee6541cc0f6cb47b1f?s=128&d=identicon&r=PG&f=1","display_name":"user538578964","link":"https://stackoverflow.com/users/6911906/user538578964"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1581870063,"creation_date":1581869146,"last_edit_date":1581870063,"question_id":60250402,"share_link":"https://stackoverflow.com/q/60250402","body_markdown":"I am using JQAssistant to scan an artifact which will insert data into a Neo4J database. This Neo4J is persisted on disk on the following location: `&lt;JQAssistant_Location&gt;\\store\\`. The files at this location can be seen in the attached screenshot.[![Neo4J Store directory][1]][1]\r\n\r\nI am writing a separate application which will **READ** data from this store:\r\n\r\n    String storeLoc = &quot;&lt;JQAssistant_Location&gt;\\store&quot;\r\n    GraphDatabaseFactory graphDatabaseFactory = new GraphDatabaseFactory();\r\n    graphDb = graphDatabaseFactory.newEmbeddedDatabase(new File(storeLoc)); // an exception is thrown at this line\r\n    LOGGER.info(String.format(&quot;Using store at [ %s ]&quot;, storeLoc));\r\n\r\nWhen inspecting the exception thrown at the above mentioned line, I can see the following `cause`: \r\n\r\n    org.neo4j.kernel.lifecycle.LifecycleException: Component &#39;org.neo4j.kernel.impl.proc.Procedures@3aacd128&#39; was \r\n    successfully initialized, but failed to start. Please see the attached cause exception \r\n    &quot;class com.google.common.collect.MapMakerInternalMap$StrongKeyStrongValueSegment cannot access its \r\n    superclass com.google.common.collect.MapMakerInternalMap$Segment&quot;.\r\n\r\nI have added the following Neo4J dependency in my POM:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.neo4j&lt;/groupId&gt;\r\n        &lt;artifactId&gt;neo4j&lt;/artifactId&gt;\r\n        &lt;version&gt;3.5.8&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThe full stack trace of the error is below:\r\n\r\n    \tjava.lang.RuntimeException: Error starting org.neo4j.graphdb.facade.GraphDatabaseFacadeFactory, C:\\Projects\\folder1\\folder2\\folder3\\jqassistant\r\n\t\t\tat org.neo4j.graphdb.facade.GraphDatabaseFacadeFactory.initFacade(GraphDatabaseFacadeFactory.java:230)\r\n\t\t\tat org.neo4j.graphdb.facade.GraphDatabaseFacadeFactory.newFacade(GraphDatabaseFacadeFactory.java:146)\r\n\t\t\tat org.neo4j.graphdb.factory.GraphDatabaseFactory.newDatabase(GraphDatabaseFactory.java:133)\r\n\t\t\tat org.neo4j.graphdb.factory.GraphDatabaseFactory.newEmbeddedDatabase(GraphDatabaseFactory.java:122)\r\n\t\t\tat org.neo4j.graphdb.factory.GraphDatabaseFactory$EmbeddedDatabaseCreator.newDatabase(GraphDatabaseFactory.java:178)\r\n\t\t\tat org.neo4j.graphdb.factory.GraphDatabaseBuilder.newGraphDatabase(GraphDatabaseBuilder.java:210)\r\n\t\t\tat org.neo4j.graphdb.factory.GraphDatabaseFactory.newEmbeddedDatabase(GraphDatabaseFactory.java:79)\r\n\t\t\tat com.example.application.extractors.architecure.data.factories.jqa.impl.JqaFileConnector.init(JqaFileConnector.java:31)\r\n\t\t\tat com.example.application.extractors.architecure.data.impl.JQAssistantDataExtractor.start(JQAssistantDataExtractor.java:44)\r\n\t\t\tat com.example.application.models.interfaces.extractors.Initializer.processRequirements(Initializer.java:31)\r\n\t\t\tat com.example.application.extractors.architecure.data.ArchitectureExtractionInitializer.beginExtraction(ArchitectureExtractionInitializer.java:34)\r\n\t\t\tat com.example.application.core.Runner.beginExtraction(Runner.java:69)\r\n\t\t\tat com.example.application.server.controllers.ScanController.startScan(ScanController.java:16)\r\n\t\t\tat spark.RouteImpl$1.handle(RouteImpl.java:72)\r\n\t\t\tat spark.http.matching.Routes.execute(Routes.java:61)\r\n\t\t\tat spark.http.matching.MatcherFilter.doFilter(MatcherFilter.java:134)\r\n\t\t\tat spark.embeddedserver.jetty.JettyHandler.doHandle(JettyHandler.java:50)\r\n\t\t\tat org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1671)\r\n\t\t\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:144)\r\n\t\t\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)\r\n\t\t\tat org.eclipse.jetty.server.Server.handle(Server.java:505)\r\n\t\t\tat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:370)\r\n\t\t\tat org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:267)\r\n\t\t\tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:305)\r\n\t\t\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103)\r\n\t\t\tat org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:117)\r\n\t\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:698)\r\n\t\t\tat org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:804)\r\n\t\t\tat java.lang.Thread.run(Thread.java:748)\r\n\t\tCaused by: org.neo4j.kernel.lifecycle.LifecycleException: Component &#39;org.neo4j.kernel.impl.proc.Procedures@3aacd128&#39; was successfully initialized, but failed to start. Please see the attached cause exception &quot;class com.google.common.collect.MapMakerInternalMap$StrongKeyStrongValueSegment cannot access its superclass com.google.common.collect.MapMakerInternalMap$Segment&quot;.\r\n\t\t\tat org.neo4j.kernel.lifecycle.LifeSupport$LifecycleInstance.start(LifeSupport.java:473)\r\n\t\t\tat org.neo4j.kernel.lifecycle.LifeSupport.start(LifeSupport.java:111)\r\n\t\t\tat org.neo4j.graphdb.facade.GraphDatabaseFacadeFactory.initFacade(GraphDatabaseFacadeFactory.java:225)\r\n\t\t\t... 28 more\r\n\t\tCaused by: java.lang.IllegalAccessError: class com.google.common.collect.MapMakerInternalMap$StrongKeyStrongValueSegment cannot access its superclass com.google.common.collect.MapMakerInternalMap$Segment\r\n\t\t\tat java.lang.ClassLoader.defineClass1(Native Method)\r\n\t\t\tat java.lang.ClassLoader.defineClass(ClassLoader.java:763)\r\n\t\t\tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\r\n\t\t\tat java.net.URLClassLoader.defineClass(URLClassLoader.java:468)\r\n\t\t\tat java.net.URLClassLoader.access$100(URLClassLoader.java:74)\r\n\t\t\tat java.net.URLClassLoader$1.run(URLClassLoader.java:369)\r\n\t\t\tat java.net.URLClassLoader$1.run(URLClassLoader.java:363)\r\n\t\t\tat java.security.AccessController.doPrivileged(Native Method)\r\n\t\t\tat java.net.URLClassLoader.findClass(URLClassLoader.java:362)\r\n\t\t\tat java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n\t\t\tat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n\t\t\tat java.lang.Class.getDeclaredMethods0(Native Method)\r\n\t\t\tat java.lang.Class.privateGetDeclaredMethods(Class.java:2701)\r\n\t\t\tat java.lang.Class.getDeclaredMethods(Class.java:1975)\r\n\t\t\tat org.neo4j.kernel.impl.proc.ProcedureJarLoader$1.fetchNextOrNull(ProcedureJarLoader.java:166)\r\n\t\t\tat org.neo4j.kernel.impl.proc.ProcedureJarLoader$1.fetchNextOrNull(ProcedureJarLoader.java:138)\r\n\t\t\tat org.neo4j.collection.PrefetchingRawIterator.peek(PrefetchingRawIterator.java:50)\r\n\t\t\tat org.neo4j.collection.PrefetchingRawIterator.hasNext(PrefetchingRawIterator.java:36)\r\n\t\t\tat org.neo4j.kernel.impl.proc.ProcedureJarLoader.loadProcedures(ProcedureJarLoader.java:111)\r\n\t\t\tat org.neo4j.kernel.impl.proc.ProcedureJarLoader.loadProceduresFromDir(ProcedureJarLoader.java:85)\r\n\t\t\tat org.neo4j.kernel.impl.proc.Procedures.start(Procedures.java:323)\r\n\t\t\tat org.neo4j.kernel.lifecycle.LifeSupport$LifecycleInstance.start(LifeSupport.java:452)\r\n\r\nThanks\r\n\r\n  [1]: https://i.stack.imgur.com/CoOWr.png","link":"https://stackoverflow.com/questions/60250402/neo4j-error-starting-graphdatabasefacadefactory","title":"Neo4J error starting GraphDatabaseFacadeFactory"},{"tags":["neo4j","stored-functions"],"answers":[{"tags":[],"owner":{"reputation":171,"user_id":12205676,"user_type":"registered","profile_image":"https://i.stack.imgur.com/nePIV.jpg?s=128&g=1","display_name":"Nathan Smith","link":"https://stackoverflow.com/users/12205676/nathan-smith"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581954331,"creation_date":1581954331,"answer_id":60265945,"question_id":60248924,"share_link":"https://stackoverflow.com/a/60265945","body_markdown":"Take a look at the custom functions and procedures available in the apoc library. \r\n\r\nhttps://neo4j.com/docs/labs/apoc/current/cypher-execution/cypher-based-procedures-functions/\r\n\r\n```\r\nCALL apoc.custom.asProcedure(&#39;answer&#39;,&#39;RETURN 42 as answer&#39;)\r\n```\r\n\r\n```\r\nCALL custom.answer() YIELD row RETURN row.answer\r\n```\r\n\r\n","link":"https://stackoverflow.com/questions/60248924/what-is-neo4j-closest-feature-to-sql-stored-functions/60265945#60265945","title":"What is neo4j closest feature to sql stored functions?"}],"owner":{"reputation":3254,"user_id":3127111,"user_type":"registered","accept_rate":61,"profile_image":"https://www.gravatar.com/avatar/d3ff7efc0f2c56fb332a0a8dfa4c6305?s=128&d=identicon&r=PG&f=1","display_name":"watery","link":"https://stackoverflow.com/users/3127111/watery"},"comment_count":0,"delete_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1581954331,"creation_date":1581859344,"question_id":60248924,"share_link":"https://stackoverflow.com/q/60248924","body_markdown":"I&#39;m new to neo4j and graph databases in general.\r\n\r\nGiven a complex Cypher query, that I don&#39;t want to store inside the application (or several applications), but keep centralized, what options are left to me?\r\n\r\nIn a SQL database I would use a stored function. Are UDF function the way to go in neo4j?\r\nFrom the docs it seems to me that they&#39;re more a way to extend the database functionality by being able to access the graph internals, but I&#39;ve just started studying them.\r\n","link":"https://stackoverflow.com/questions/60248924/what-is-neo4j-closest-feature-to-sql-stored-functions","title":"What is neo4j closest feature to sql stored functions?"},{"tags":["neo4j","cypher-shell"],"owner":{"reputation":129,"user_id":10266998,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-gxYzaoeZZIw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaN23vgIemWoxVoYoxZ3T-Ef0FuNtQ/mo/photo.jpg?sz=128","display_name":"Pablo","link":"https://stackoverflow.com/users/10266998/pablo"},"last_editor":{"reputation":129,"user_id":10266998,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-gxYzaoeZZIw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaN23vgIemWoxVoYoxZ3T-Ef0FuNtQ/mo/photo.jpg?sz=128","display_name":"Pablo","link":"https://stackoverflow.com/users/10266998/pablo"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1581925309,"creation_date":1581839959,"last_edit_date":1581925309,"question_id":60246544,"share_link":"https://stackoverflow.com/q/60246544","body_markdown":"I&#39;m able to run a series of queries successfully using Cypher-shell in Neo4j. For example I have put my queries inside a file called &quot;cypher.ex1&quot;:\r\n\r\n    LOAD CSV WITH HEADERS FROM &#39;file:///names.csv&#39; AS row\r\n    WITH row.Fname AS first, row.Lname AS last\r\n    MERGE (p:la {last: last})\r\n    MERGE (o:fi {first: first})\r\n    MERGE (c:central {name: &quot;central node&quot;})\r\n    MERGE (c)-[r:CONTAINS {first:first}]-&gt;(o)-[rel:CONTAINS {first: first}]-&gt;(p)\r\n    RETURN count(o);\r\n\r\nand execute it using:\r\n\r\n    neo4j@neo4j&gt; :source cypher.ex1\r\n\r\nThe problem is that when I want to display the created nodes and relationships, I execute another file containing:\r\n\r\n    MATCH (c:central)-[r:CONTAINS]-&gt;(o:fi)-[rel:CONTAINS]-&gt;(p:la)\r\n    RETURN c, r, o, rel, p\r\n\r\nusing this command:\r\n\r\n    neo4j@neo4j&gt; :source cypher.ex2\r\n\r\nI see the result written in plain text in cypher-shell window. I wanted to know whether there is a way to display the results in the Neo4j browser as well. I mean upon executing the second cypher script (cypher.ex2), the result should be automatically shown in the neo4j browser as a graph.\r\n\r\nInstead of manually inserting query in Neo4j browser such as:\r\n\r\n    MATCH (n) RETURN n\r\n\r\nto view the created nodes or graph, I want the queries that I have executed through Cypher-shell automatically become visible as a visual graph in the Neo4j browser. Is it possible? Is there any way to do this using Cypher-shell?\r\n","link":"https://stackoverflow.com/questions/60246544/automatically-display-the-cypher-shell-output-in-the-neo4j-browser","title":"Automatically display the Cypher-shell output in the Neo4j browser"},{"tags":["java","datetime","neo4j","cypher","neo4j-apoc"],"comments":[{"owner":{"reputation":46418,"user_id":5772882,"user_type":"registered","profile_image":"https://i.stack.imgur.com/58mlb.png?s=128&g=1","display_name":"Ole V.V.","link":"https://stackoverflow.com/users/5772882/ole-v-v"},"edited":false,"score":0,"creation_date":1581832914,"post_id":60244387,"comment_id":106564475,"link":"https://stackoverflow.com/questions/60244387/neo4j-getting-the-systems-datetime-containing-micro-or-nano-seconds-with-cypher#comment106564475_60244387"},{"owner":{"reputation":19,"user_id":5719050,"user_type":"registered","accept_rate":25,"profile_image":"https://www.gravatar.com/avatar/61f3acd141c129ae82c55854dec77dd1?s=128&d=identicon&r=PG&f=1","display_name":"Jesperrekuh","link":"https://stackoverflow.com/users/5719050/jesperrekuh"},"reply_to_user":{"reputation":46418,"user_id":5772882,"user_type":"registered","profile_image":"https://i.stack.imgur.com/58mlb.png?s=128&g=1","display_name":"Ole V.V.","link":"https://stackoverflow.com/users/5772882/ole-v-v"},"edited":false,"score":0,"creation_date":1581869162,"post_id":60244387,"comment_id":106572363,"link":"https://stackoverflow.com/questions/60244387/neo4j-getting-the-systems-datetime-containing-micro-or-nano-seconds-with-cypher#comment106572363_60244387"}],"answers":[{"tags":[],"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582166476,"creation_date":1582166476,"answer_id":60312160,"question_id":60244387,"share_link":"https://stackoverflow.com/a/60312160","body_markdown":"The [temporal instants](https://neo4j.com/docs/cypher-manual/current/syntax/temporal/#cypher-temporal-accessing-components-temporal-instants) `DateTime`, `LocalDateTime`, `Time`, and `LocalTime` support the `microsecond` and `nanosecond` fields. Those fields can be set when using the appropriate temporal function to create an instant.\r\n\r\nFor example:\r\n\r\n    RETURN datetime({year:1984, month:11, day:11, hour:12, minute:31, second:14, nanosecond: 645876123, timezone:&#39;Europe/Stockholm&#39;})\r\n\r\nIn addition, if you have an epoch time with microsecond (or nanosecond) precision that you want to store, just break it down into 2 parts: its epoch seconds, and the remaining microseconds (or nanoseconds). With those 2 parts, you can create a `DateTime` as illustrated here (assuming `secs`, `micros`, and `nanos` are passed as [parameter](https://neo4j.com/docs/cypher-manual/current/syntax/parameters/)s):\r\n\r\n    RETURN datetime({epochSeconds: $secs, microsecond: $micros})\r\n\r\nor\r\n\r\n    RETURN datetime({epochSeconds: $secs, nanosecond: $nanos})\r\n","link":"https://stackoverflow.com/questions/60244387/neo4j-getting-the-systems-datetime-containing-micro-or-nano-seconds-with-cypher/60312160#60312160","title":"Neo4j getting the system&#39;s datetime containing micro or nano seconds with cypher"}],"owner":{"reputation":19,"user_id":5719050,"user_type":"registered","accept_rate":25,"profile_image":"https://www.gravatar.com/avatar/61f3acd141c129ae82c55854dec77dd1?s=128&d=identicon&r=PG&f=1","display_name":"Jesperrekuh","link":"https://stackoverflow.com/users/5719050/jesperrekuh"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1582166476,"creation_date":1581812337,"question_id":60244387,"share_link":"https://stackoverflow.com/q/60244387","body_markdown":"In neo4j I know how to get the current datetime as in now() with milliseconds precision, however I would like to be able to store microseconds or nanoseconds. Is there a way to achieve this via apoc, or adjusting my system time. I was reading about the &#39;limitations&#39; of java Date and Calendar only storing .SSS ?\r\n\r\n    CREATE (l:LogEvent{\r\n            eventID : &#39;I01&#39;\r\n            , dt : System.nanoTime({timezone:&#39;UTC&#39;})\r\n            });","link":"https://stackoverflow.com/questions/60244387/neo4j-getting-the-systems-datetime-containing-micro-or-nano-seconds-with-cypher","title":"Neo4j getting the system&#39;s datetime containing micro or nano seconds with cypher"},{"tags":["neo4j","cypher"],"answers":[{"tags":[],"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1581761009,"last_edit_date":1581761009,"creation_date":1581760437,"answer_id":60237622,"question_id":60237237,"share_link":"https://stackoverflow.com/a/60237622","body_markdown":"You must only use a semicolon at the end of a Cypher *statement*, not at the end of every clause.\r\n\r\nA Cypher statement usually has a `RETURN` clause at the end, but it can also end with a clause that writes to the DB (e.g., a `CREATE` clause) if there is nothing that needs to be returned.\r\n\r\nIn your particular file, you really only have a single Cypher statement, so delete all the semicolons except the last one.\r\n","link":"https://stackoverflow.com/questions/60237237/cannot-execute-scripts-through-cypher-shell/60237622#60237622","title":"cannot execute scripts through cypher-shell"}],"owner":{"reputation":129,"user_id":10266998,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-gxYzaoeZZIw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaN23vgIemWoxVoYoxZ3T-Ef0FuNtQ/mo/photo.jpg?sz=128","display_name":"Pablo","link":"https://stackoverflow.com/users/10266998/pablo"},"last_editor":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60237622,"answer_count":1,"score":0,"last_activity_date":1581761018,"creation_date":1581756895,"last_edit_date":1581761018,"question_id":60237237,"share_link":"https://stackoverflow.com/q/60237237","body_markdown":"I&#39;m trying to execute these queries within Cypher-shell environment:\r\n\r\n    LOAD CSV WITH HEADERS FROM &#39;file:///names.csv&#39; AS row\r\n    WITH row.Fname AS first, row.Lname AS last\r\n    MERGE (p:la {last: last})\r\n    MERGE (o:fi {first: first})\r\n    MERGE (c:central {name: &quot;central node&quot;})\r\n    MERGE (c)-[r:CONTAINS {first:first}]-&gt;(o)-[rel:CONTAINS {first: first}]-&gt;(p)\r\n    RETURN count(o)\r\n\r\nI have saved these queries inside a file named &quot;cypher.ex1&quot; and I&#39;m using this command to execute it:\r\n\r\n    neo4j@neo4j&gt; :source cypher.ex1\r\n\r\nbut nothing happens. I added &quot;;&quot; to the end of all queries like this:\r\n\r\n    LOAD CSV WITH HEADERS FROM &#39;file:///names.csv&#39; AS row;\r\n\r\n    WITH row.Fname AS first, row.Lname AS last;\r\n\r\n    MERGE (p:la {last: last});\r\n\r\n    MERGE (o:fi {first: first});\r\n\r\n    MERGE (c:central {name: &quot;central node&quot;});\r\n\r\n    MERGE (c)-[r:CONTAINS {first:first}]-&gt;(o)-[rel:CONTAINS {first: first}]-&gt;(p);\r\n\r\n    RETURN count(o);\r\n\r\nI receive this error:\r\n\r\n    Query cannot conclude with LOAD CSV (must be RETURN or an update clause) (line 2, column 60 (offset: 60))\r\n    &quot;LOAD CSV WITH HEADERS FROM &#39;file:///subdomainIP.csv&#39; AS row;&quot;\r\n\r\nWhat&#39;s wrong?","link":"https://stackoverflow.com/questions/60237237/cannot-execute-scripts-through-cypher-shell","title":"cannot execute scripts through cypher-shell"},{"tags":["kubernetes","neo4j","kubernetes-statefulset"],"comments":[{"owner":{"reputation":4985,"user_id":1839482,"user_type":"registered","accept_rate":19,"profile_image":"https://i.stack.imgur.com/3iGrN.jpg?s=128&g=1","display_name":"Arghya Sadhu","link":"https://stackoverflow.com/users/1839482/arghya-sadhu"},"edited":false,"score":0,"creation_date":1581753149,"post_id":60236808,"comment_id":106548318,"link":"https://stackoverflow.com/questions/60236808/neo4j-pods-logs-neo4j-invalid-username#comment106548318_60236808"}],"answers":[{"comments":[{"owner":{"reputation":610,"user_id":11901958,"user_type":"registered","profile_image":"https://i.stack.imgur.com/lZz1d.png?s=128&g=1","display_name":"rabello","link":"https://stackoverflow.com/users/11901958/rabello"},"edited":false,"score":0,"creation_date":1581934955,"post_id":60238497,"comment_id":106590071,"link":"https://stackoverflow.com/questions/60236808/neo4j-pods-logs-neo4j-invalid-username/60238497#comment106590071_60238497"},{"owner":{"reputation":31,"user_id":7350333,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Qbfka.jpg?s=128&g=1","display_name":"Raff","link":"https://stackoverflow.com/users/7350333/raff"},"reply_to_user":{"reputation":610,"user_id":11901958,"user_type":"registered","profile_image":"https://i.stack.imgur.com/lZz1d.png?s=128&g=1","display_name":"rabello","link":"https://stackoverflow.com/users/11901958/rabello"},"edited":false,"score":1,"creation_date":1581951201,"post_id":60238497,"comment_id":106598787,"link":"https://stackoverflow.com/questions/60236808/neo4j-pods-logs-neo4j-invalid-username/60238497#comment106598787_60238497"}],"tags":[],"owner":{"reputation":31,"user_id":7350333,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Qbfka.jpg?s=128&g=1","display_name":"Raff","link":"https://stackoverflow.com/users/7350333/raff"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1581767555,"creation_date":1581767555,"answer_id":60238497,"question_id":60236808,"share_link":"https://stackoverflow.com/a/60238497","body_markdown":"I found out I had mismatched quotes:\r\n\r\n`“neo4j/${NEO4J_SECRETS_PASSWORD}”` \r\n\r\nWhich is different from this `&quot;neo4j/${NEO4J_SECRETS_PASSWORD&quot;`.","link":"https://stackoverflow.com/questions/60236808/neo4j-pods-logs-neo4j-invalid-username/60238497#60238497","title":"Neo4J: Pods logs Neo4j Invalid Username"}],"owner":{"reputation":31,"user_id":7350333,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Qbfka.jpg?s=128&g=1","display_name":"Raff","link":"https://stackoverflow.com/users/7350333/raff"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1581767555,"creation_date":1581752168,"question_id":60236808,"share_link":"https://stackoverflow.com/q/60236808","body_markdown":"Has anyone deployed a Neo4J graph DB or any stateful application to Kubernetes using Helm Charts? I have this task that requires me to deploy a Neo4J graph DB to Kubernetes.\r\n\r\n**Issue**: The Pod keeps on crashing as it cannot get the username provided, and throws the following logs even when the username is provided:\r\n*Invalid username, it must be neo4j* when you run **kubectl logs neo4j-chart-0**  command. What am I doing wrong?\r\n\r\n    command:\r\n          - &quot;/bin/bash&quot;\r\n          - &quot;-c&quot;\r\n          - |\r\n            export NEO4J_dbms_connectors_default__advertised__address=$(hostname -f)\r\n            export NEO4J_causal__clustering_discovery__advertised__address=$(hostname -f):5000\r\n            export NEO4J_causal__clustering_transaction__advertised__address=$(hostname -f):6000\r\n            export NEO4J_causal__clustering_raft__advertised__address=$(hostname -f):7000\r\n\r\n            if [ &quot;${AUTH_ENABLED:-}&quot; == &quot;true&quot; ]; then\r\n              export NEO4J_AUTH=“neo4j/${NEO4J_SECRETS_PASSWORD}”\r\n            else\r\n              export NEO4J_AUTH=“none”\r\n            fi\r\n\r\n            exec /docker-entrypoint.sh &quot;neo4j&quot;","link":"https://stackoverflow.com/questions/60236808/neo4j-pods-logs-neo4j-invalid-username","title":"Neo4J: Pods logs Neo4j Invalid Username"},{"tags":["neo4j","cypher","neo4j-apoc"],"comments":[{"owner":{"reputation":135,"user_id":5341632,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c004273daf4cad48c5abbbfe13fcab9c?s=128&d=identicon&r=PG&f=1","display_name":"Bruno C","link":"https://stackoverflow.com/users/5341632/bruno-c"},"edited":false,"score":0,"creation_date":1581932319,"post_id":60235018,"comment_id":106588746,"link":"https://stackoverflow.com/questions/60235018/neo4j-apoc-load-json-load-all-files-from-a-directory#comment106588746_60235018"}],"owner":{"reputation":135,"user_id":5341632,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c004273daf4cad48c5abbbfe13fcab9c?s=128&d=identicon&r=PG&f=1","display_name":"Bruno C","link":"https://stackoverflow.com/users/5341632/bruno-c"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1581764401,"answer_count":0,"score":1,"last_activity_date":1581726680,"creation_date":1581726680,"question_id":60235018,"share_link":"https://stackoverflow.com/q/60235018","body_markdown":"In Neo4j, How can I call apoc.load.json on all files that are in a directory?\r\nIs there any cypher command to interact with the system directory?\r\nOr si there apoc function/procedure?","link":"https://stackoverflow.com/questions/60235018/neo4j-apoc-load-json-load-all-files-from-a-directory","closed_reason":"Off-topic","title":"neo4j apoc.load.json: load all files from a directory"},{"tags":["neo4j","cypher-shell"],"answers":[{"comments":[{"owner":{"reputation":129,"user_id":10266998,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-gxYzaoeZZIw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaN23vgIemWoxVoYoxZ3T-Ef0FuNtQ/mo/photo.jpg?sz=128","display_name":"Pablo","link":"https://stackoverflow.com/users/10266998/pablo"},"edited":false,"score":0,"creation_date":1581753373,"post_id":60234582,"comment_id":106548358,"link":"https://stackoverflow.com/questions/60233417/nothing-happens-when-using-cypher-shell-for-executing-scripts/60234582#comment106548358_60234582"},{"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":129,"user_id":10266998,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-gxYzaoeZZIw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaN23vgIemWoxVoYoxZ3T-Ef0FuNtQ/mo/photo.jpg?sz=128","display_name":"Pablo","link":"https://stackoverflow.com/users/10266998/pablo"},"edited":false,"score":0,"creation_date":1581759919,"post_id":60234582,"comment_id":106549574,"link":"https://stackoverflow.com/questions/60233417/nothing-happens-when-using-cypher-shell-for-executing-scripts/60234582#comment106549574_60234582"}],"tags":[],"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1581760067,"last_edit_date":1581760067,"creation_date":1581721851,"answer_id":60234582,"question_id":60233417,"share_link":"https://stackoverflow.com/a/60234582","body_markdown":"You are trying to execute this command line:\r\n\r\n    cat cypher.ex1 | bin/cypher.shell -u neo4j - 123456\r\n\r\nfrom *within* the `cypher.shell` environment. That will not work, since `cypher.shell` only supports Cypher statements and a limited set of commands (use the `:help` command to see what is available).\r\n\r\nThe reason nothing happened for you (not even an error) is because `cypher.shell` did not see a colon (&#39;:&#39;) at the start of your command line, so it assumed that you were entering a Cypher statement and was waiting (forever) for the ending semicolon (&#39;;&#39;) before parsing it.\r\n\r\nIf you want to execute that exact command line, you have to execute it *outside* of `cypher-shell` (when it is not running).\r\n\r\nHowever, if you really do want to perform the equivalent action from *within* the `cypher.shell` environment, you can use its `:source` command. For example:\r\n\r\n    :source cypher.ex1\r\n\r\nThe default location for the source file is the &quot;current working directory&quot;, which is the directory you were in when you launched `cypher.shell`. If the file is elsewhere, you can specify the relative path of the file from the current working directory as the `:source` argument.","link":"https://stackoverflow.com/questions/60233417/nothing-happens-when-using-cypher-shell-for-executing-scripts/60234582#60234582","title":"Nothing happens when using Cypher-shell for executing scripts"}],"owner":{"reputation":129,"user_id":10266998,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-gxYzaoeZZIw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaN23vgIemWoxVoYoxZ3T-Ef0FuNtQ/mo/photo.jpg?sz=128","display_name":"Pablo","link":"https://stackoverflow.com/users/10266998/pablo"},"last_editor":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1581760067,"creation_date":1581713793,"last_edit_date":1581720123,"question_id":60233417,"share_link":"https://stackoverflow.com/q/60233417","body_markdown":"I&#39;m trying to execute a series of Cypher queries using Cypher shell according to [here][1]. I have created a file called &quot;cypher.ex1&quot; and placed it into import and bin folder. Here is its content:\r\n\r\n    MATCH (n) RETURN n;\r\n    \r\n    MATCH (batman:Person {name: &#39;Bruce Wayne&#39;}) RETURN batman;\r\n\r\nI&#39;m trying to execute it using:\r\n\r\n    $neo4j-home&gt; cat cypher.ex1 | bin/cypher-shell -u neo4j -p 123456 --format plain\r\n\r\nbut when I run this, nothing happens and after waiting for a long time with no output, I need to press &quot;CTRL + C&quot; to terminate the command. Here is an screenshot of the problem:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nIn fact, cypher-shell works fine for one line commands, but not for scripts. What&#39;s wrong?\r\n\r\n\r\n  [1]: https://neo4j.com/docs/operations-manual/current/tools/cypher-shell/\r\n  [2]: https://i.stack.imgur.com/HDIbb.png","link":"https://stackoverflow.com/questions/60233417/nothing-happens-when-using-cypher-shell-for-executing-scripts","title":"Nothing happens when using Cypher-shell for executing scripts"},{"tags":["java","neo4j"],"owner":{"reputation":3630,"user_id":710955,"user_type":"registered","accept_rate":77,"profile_image":"https://i.stack.imgur.com/GvorM.png?s=128&g=1","display_name":"LeMoussel","link":"https://stackoverflow.com/users/710955/lemoussel"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1581703916,"creation_date":1581703916,"question_id":60231539,"share_link":"https://stackoverflow.com/q/60231539","body_markdown":"I am getting unwanted log info message from neo4j java driver like following\r\n\r\n    f&#233;vr. 14, 2020 7:03:19 PM org.neo4j.driver.internal.logging.JULogger info\r\n    INFOS: Closing driver instance 848409667\r\n    f&#233;vr. 14, 2020 7:03:19 PM org.neo4j.driver.internal.logging.JULogger info\r\n    INFOS: Closing connection pool towards localhost:7687\r\n\r\nHow can I suppress log INFO message? Or how can I set level to WARN for neo4j java driver logging?","link":"https://stackoverflow.com/questions/60231539/how-to-disable-log-info-level-message-for-neo4j-java-driver","title":"How to disable log info level message for neo4j java driver?"},{"tags":["neo4j"],"answers":[{"comments":[{"owner":{"reputation":5,"user_id":10492074,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-TeMsZn0Cbd4/AAAAAAAAAAI/AAAAAAAAAKE/67QWmzdYWvs/photo.jpg?sz=128","display_name":"Brian Carlisle","link":"https://stackoverflow.com/users/10492074/brian-carlisle"},"edited":false,"score":0,"creation_date":1581716655,"post_id":60233278,"comment_id":106542796,"link":"https://stackoverflow.com/questions/60231427/neo4j-what-is-the-fastest-structure-when-you-have-3-main-entities/60233278#comment106542796_60233278"},{"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":5,"user_id":10492074,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-TeMsZn0Cbd4/AAAAAAAAAAI/AAAAAAAAAKE/67QWmzdYWvs/photo.jpg?sz=128","display_name":"Brian Carlisle","link":"https://stackoverflow.com/users/10492074/brian-carlisle"},"edited":false,"score":0,"creation_date":1581716976,"post_id":60233278,"comment_id":106542882,"link":"https://stackoverflow.com/questions/60231427/neo4j-what-is-the-fastest-structure-when-you-have-3-main-entities/60233278#comment106542882_60233278"},{"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":5,"user_id":10492074,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-TeMsZn0Cbd4/AAAAAAAAAAI/AAAAAAAAAKE/67QWmzdYWvs/photo.jpg?sz=128","display_name":"Brian Carlisle","link":"https://stackoverflow.com/users/10492074/brian-carlisle"},"edited":false,"score":0,"creation_date":1581717872,"post_id":60233278,"comment_id":106543191,"link":"https://stackoverflow.com/questions/60231427/neo4j-what-is-the-fastest-structure-when-you-have-3-main-entities/60233278#comment106543191_60233278"},{"owner":{"reputation":5,"user_id":10492074,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-TeMsZn0Cbd4/AAAAAAAAAAI/AAAAAAAAAKE/67QWmzdYWvs/photo.jpg?sz=128","display_name":"Brian Carlisle","link":"https://stackoverflow.com/users/10492074/brian-carlisle"},"edited":false,"score":0,"creation_date":1581720050,"post_id":60233278,"comment_id":106543739,"link":"https://stackoverflow.com/questions/60231427/neo4j-what-is-the-fastest-structure-when-you-have-3-main-entities/60233278#comment106543739_60233278"},{"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":5,"user_id":10492074,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-TeMsZn0Cbd4/AAAAAAAAAAI/AAAAAAAAAKE/67QWmzdYWvs/photo.jpg?sz=128","display_name":"Brian Carlisle","link":"https://stackoverflow.com/users/10492074/brian-carlisle"},"edited":false,"score":0,"creation_date":1581720977,"post_id":60233278,"comment_id":106543975,"link":"https://stackoverflow.com/questions/60231427/neo4j-what-is-the-fastest-structure-when-you-have-3-main-entities/60233278#comment106543975_60233278"},{"owner":{"reputation":5,"user_id":10492074,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-TeMsZn0Cbd4/AAAAAAAAAAI/AAAAAAAAAKE/67QWmzdYWvs/photo.jpg?sz=128","display_name":"Brian Carlisle","link":"https://stackoverflow.com/users/10492074/brian-carlisle"},"edited":false,"score":0,"creation_date":1582056219,"post_id":60233278,"comment_id":106643048,"link":"https://stackoverflow.com/questions/60231427/neo4j-what-is-the-fastest-structure-when-you-have-3-main-entities/60233278#comment106643048_60233278"}],"tags":[],"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1581713787,"last_edit_date":1581713787,"creation_date":1581713155,"answer_id":60233278,"question_id":60231427,"share_link":"https://stackoverflow.com/a/60233278","body_markdown":"Approach 1 has several major drawbacks. All data about a &quot;service&quot; (which I assume is a company that provides services) would have to be duplicated in every associated `service` relationship. That wastes storage space in the DB. Also, if you wanted to find all the customers for a specific service (regardless of zip code), you&#39;d have to scan every `service` relationship.\r\n\r\nApproach 2 introduces an extra &quot;service area&quot; layer to the data model that seems to provide no advantage and just makes processing your use case more complicated and slower.\r\n\r\nApproach 3 (in which I assume every &quot;service&quot; has a unique node) should be the way to go. There is no data duplication, and no scanning is needed to find the desired customers (whether you start from a zip code, or from a service).\r\n","link":"https://stackoverflow.com/questions/60231427/neo4j-what-is-the-fastest-structure-when-you-have-3-main-entities/60233278#60233278","title":"Neo4J what is the fastest structure when you have 3 main entities?"}],"owner":{"reputation":5,"user_id":10492074,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-TeMsZn0Cbd4/AAAAAAAAAAI/AAAAAAAAAKE/67QWmzdYWvs/photo.jpg?sz=128","display_name":"Brian Carlisle","link":"https://stackoverflow.com/users/10492074/brian-carlisle"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60233278,"answer_count":1,"score":0,"last_activity_date":1581713787,"creation_date":1581703430,"question_id":60231427,"share_link":"https://stackoverflow.com/q/60231427","body_markdown":"Say you have zip codes, services and customers. Given a zip and service, I want to find the corresponding customers as fast as possible.\r\n\r\nOptions:\r\n\r\n 1. Customers are connected to zips via a &quot;service&quot; relationship. this seems like the smallest version, search for a particular zip and only one type of relationship (the targeted service)\r\n 2. Customers are connected to service areas, which point to different zips and services. Here we search for all service areas that point to the targeted service and the targeted zip.\r\n 3. Zips each connect to a service node unique to them, which are then connected to customers. so when you search, you go to the zip you want, go to the service, then anything connected to there is what you want (this feels like i may be overly hand holding for neo4J)\r\n\r\nDo these different versions have different performance? I am having trouble understanding the theoretical difference in search formats in Neo4J. 2 is an example where the results are limited on two sides at once, where for 1 and 3, you can travel linearly on the graph as you filter, does that make a difference?\r\n\r\nThanks,\r\nBrian","link":"https://stackoverflow.com/questions/60231427/neo4j-what-is-the-fastest-structure-when-you-have-3-main-entities","title":"Neo4J what is the fastest structure when you have 3 main entities?"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":9,"user_id":6163997,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b20dbd03f5c25188e567cc4e8e3b880e?s=128&d=identicon&r=PG&f=1","display_name":"Daniel Schr&#246;der","link":"https://stackoverflow.com/users/6163997/daniel-schr%c3%b6der"},"edited":false,"score":0,"creation_date":1581694228,"post_id":60228496,"comment_id":106533697,"link":"https://stackoverflow.com/questions/60228496/return-large-subgraphs-from-a-list-of-ids-in-cypher-neo4j#comment106533697_60228496"}],"answers":[{"comments":[{"owner":{"reputation":9839,"user_id":4187346,"user_type":"registered","profile_image":"https://i.stack.imgur.com/uSe1J.png?s=128&g=1","display_name":"Dave Bennett","link":"https://stackoverflow.com/users/4187346/dave-bennett"},"edited":false,"score":0,"creation_date":1581701345,"post_id":60230372,"comment_id":106537161,"link":"https://stackoverflow.com/questions/60228496/return-large-subgraphs-from-a-list-of-ids-in-cypher-neo4j/60230372#comment106537161_60230372"},{"owner":{"reputation":9,"user_id":6163997,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b20dbd03f5c25188e567cc4e8e3b880e?s=128&d=identicon&r=PG&f=1","display_name":"Daniel Schr&#246;der","link":"https://stackoverflow.com/users/6163997/daniel-schr%c3%b6der"},"reply_to_user":{"reputation":9839,"user_id":4187346,"user_type":"registered","profile_image":"https://i.stack.imgur.com/uSe1J.png?s=128&g=1","display_name":"Dave Bennett","link":"https://stackoverflow.com/users/4187346/dave-bennett"},"edited":false,"score":0,"creation_date":1581712370,"post_id":60230372,"comment_id":106541228,"link":"https://stackoverflow.com/questions/60228496/return-large-subgraphs-from-a-list-of-ids-in-cypher-neo4j/60230372#comment106541228_60230372"}],"tags":[],"owner":{"reputation":9,"user_id":6163997,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b20dbd03f5c25188e567cc4e8e3b880e?s=128&d=identicon&r=PG&f=1","display_name":"Daniel Schr&#246;der","link":"https://stackoverflow.com/users/6163997/daniel-schr%c3%b6der"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581698543,"creation_date":1581698543,"answer_id":60230372,"question_id":60228496,"share_link":"https://stackoverflow.com/a/60230372","body_markdown":"I have divided the query into two different queries. The first one fetched the nodes \r\n\r\n    MATCH (a:XXX:YYYY) \r\n    WHERE a.uid IN [9999, 5555, 7777, 99999, ...] \r\n    RETURN a AS node\r\n\r\nand the second \r\n\r\n    MATCH (n:Uid)\r\n    WHERE n.uid IN [9999, 5555, 7777, 99999, ...]\r\n    WITH collect(n) AS nds\r\n    UNWIND nds AS n1\r\n    MATCH (n1)-[r]-(n2)\r\n    WHERE n2 IN nds\r\n    RETURN r AS relation\r\n\r\nthe edges. For some reason, it gets very slow when I try to combine the two and get the list of edges and the list of nodes. The overall solution is not very satisfying but at least I was able to archive an acceptable performance.   ","link":"https://stackoverflow.com/questions/60228496/return-large-subgraphs-from-a-list-of-ids-in-cypher-neo4j/60230372#60230372","title":"Return large subgraphs from a list of Ids in Cypher (Neo4j)"},{"tags":[],"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581717546,"creation_date":1581717546,"answer_id":60234057,"question_id":60228496,"share_link":"https://stackoverflow.com/a/60234057","body_markdown":"This is a simpler and more efficient version of your own answer:\r\n\r\n    WITH [9999, 5555, 7777, 99999, ...] AS wanted\r\n    MATCH (n:Uid)-[r]-&gt;(n2)\r\n    WHERE n.uid IN wanted AND n2 IN wanted\r\n    RETURN r AS relation\r\n\r\nIf you pass in `wanted` as a [parameter](https://neo4j.com/docs/cypher-manual/current/syntax/parameters/), the query would then be:\r\n\r\n    MATCH (n:Uid)-[r]-&gt;(n2)\r\n    WHERE n.uid IN $wanted AND n2 IN $wanted\r\n    RETURN r AS relation","link":"https://stackoverflow.com/questions/60228496/return-large-subgraphs-from-a-list-of-ids-in-cypher-neo4j/60234057#60234057","title":"Return large subgraphs from a list of Ids in Cypher (Neo4j)"}],"owner":{"reputation":9,"user_id":6163997,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b20dbd03f5c25188e567cc4e8e3b880e?s=128&d=identicon&r=PG&f=1","display_name":"Daniel Schr&#246;der","link":"https://stackoverflow.com/users/6163997/daniel-schr%c3%b6der"},"last_editor":{"reputation":9839,"user_id":4187346,"user_type":"registered","profile_image":"https://i.stack.imgur.com/uSe1J.png?s=128&g=1","display_name":"Dave Bennett","link":"https://stackoverflow.com/users/4187346/dave-bennett"},"comment_count":1,"delete_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1581717546,"creation_date":1581691412,"last_edit_date":1581698056,"question_id":60228496,"share_link":"https://stackoverflow.com/q/60228496","body_markdown":"I have a question regarding the use of the Neo4j client for Java. I have a graph with about 120.000.000 nodes and 1.000.000.000 edges. From this graph, I want to extract subgraphs (average size about 500 nodes). For this purpose, I have created an index on the Id fields of the nodes.\r\nThe queries look like this\r\n\r\n    MATCH (a:XXX:YYYY) \r\n    WHERE a.uid IN [9999, 5555, 7777, 99999, ...] \r\n    RETURN a AS blablubb\r\n\r\nAt the moment I am looking for the edges with a second query that looks like this\r\n\r\n    MATCH (a::XXX:YYYY)-[r:ZZZZ]-(b::XXX:YYYY)\r\n    WHERE a.uid IN [9999, 5555, 7777, 99999, ...]\r\n    AND b.uid IN [9999, 5555, 7777, 99999, ...]\r\n\r\nThis is very very slow especially when the subgraphs get bigger.\r\nMy question now is how can I connect the two queries to get both the edges and the nodes of the subgraph at once. I know that there is a faster solution because the Neo4j browser gives me a\r\na visualization for\r\n\r\n    MATCH (a:XXX:YYYY) \r\n    WHERE a.uid IN [9999, 5555, 7777, 99999, ...] \r\n    RETURN a AS blablubb\r\n\r\nwhich contains all edges.\r\n\r\nthank you very much for your help","link":"https://stackoverflow.com/questions/60228496/return-large-subgraphs-from-a-list-of-ids-in-cypher-neo4j","title":"Return large subgraphs from a list of Ids in Cypher (Neo4j)"},{"tags":["c#","wpf","neo4j"],"comments":[{"owner":{"reputation":99330,"user_id":1136211,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/ecd80cd7d5927902f3af471fa0353836?s=128&d=identicon&r=PG","display_name":"Clemens","link":"https://stackoverflow.com/users/1136211/clemens"},"edited":false,"score":1,"creation_date":1581682172,"post_id":60226067,"comment_id":106527483,"link":"https://stackoverflow.com/questions/60226067/query-neo4j-and-return-found-nodes-with-net-driver-in-wpf-app#comment106527483_60226067"}],"answers":[{"tags":[],"owner":{"reputation":111231,"user_id":7252182,"user_type":"registered","profile_image":"https://i.stack.imgur.com/LUgxG.png?s=128&g=1","display_name":"mm8","link":"https://stackoverflow.com/users/7252182/mm8"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1581685642,"creation_date":1581685642,"answer_id":60226957,"question_id":60226067,"share_link":"https://stackoverflow.com/a/60226957","body_markdown":"`GetSuggestionsFromNeoAsync` is an asynchronous method. This mean that it will return when it hits an `await` and execute the remainder of the method when the `Task` being awaited has completed. \r\n\r\nSo when you call `GetSuggestionsFromNeoAsync` from your `showREsults` method, it runs synchronously until the `IResultCursor cursor = await session.RunAsync(query2Neo)` line and then returns, whereupon the `MessageBox` is shown. Please refer to the [docs](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/async/task-asynchronous-programming-model) for more information about what happens in an async method.\r\n\r\nIf you want to display the `MessageBox` when the `GetSuggestionsFromNeoAsync` has completed, you should await the async method. For you to be able to do this, you need to add the `async` keyword to the signature of the `showREsults` method. You should also change its return type to `Task` and add the *Async suffix to its name:\r\n\r\n    private static async Task ShowResultsAsync()\r\n    {\r\n        var found = await GetSuggestionsFromNeoAsync(&quot;Name&quot;);\r\n        MessageBox.Show(&quot;Person found Entry: &quot; + found.Name);\r\n    }","link":"https://stackoverflow.com/questions/60226067/query-neo4j-and-return-found-nodes-with-net-driver-in-wpf-app/60226957#60226957","title":"Query Neo4j and return found Nodes with Net Driver in WPF App"}],"owner":{"reputation":177,"user_id":3091744,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/277365aa6e544c174a5e771c3f754b1b?s=128&d=identicon&r=PG&f=1","display_name":"CodeCase","link":"https://stackoverflow.com/users/3091744/codecase"},"last_editor":{"reputation":177,"user_id":3091744,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/277365aa6e544c174a5e771c3f754b1b?s=128&d=identicon&r=PG&f=1","display_name":"CodeCase","link":"https://stackoverflow.com/users/3091744/codecase"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":60226957,"answer_count":1,"score":1,"last_activity_date":1581690665,"creation_date":1581682046,"last_edit_date":1581690665,"question_id":60226067,"share_link":"https://stackoverflow.com/q/60226067","body_markdown":"I like to search in my neo4j db with a string and get all Nodes as results back to handle them later in an AutosuggestBox.\r\n\r\nFirst throw was to bring up a connection and query then the db to return my Nodes. \r\n\r\nNow Im having trouble to return each found Node with its attribute called Name if its match, im always getting strange results in my messagebaox where I try to check my returned Nodes:\r\n\r\n\r\n            private static async Task&lt;List&lt;string&gt;&gt; GetSuggestionsFromNeoAsync(string currentInput) {\r\n\r\n                IDriver driver = GraphDatabase.Driver(&quot;bolt://localhost:7687&quot;, AuthTokens.Basic(&quot;neo4j&quot;, &quot;neo4j&quot;));\r\n                IAsyncSession session = driver.AsyncSession(o =&gt; o.WithDatabase(&quot;neo4j&quot;));\r\n\r\n                var query2Neo = &quot;Match (p:Person { Name:&#39;&quot; + currentInput + &quot;&#39;}) RETURN p.samAccountName as name&quot;;\r\n\r\n                IResultCursor cursor = await session.RunAsync(query2Neo);\r\n                List&lt;string&gt; people = await cursor.ToListAsync(record =&gt; record[&quot;Name&quot;].As&lt;string&gt;());\r\n\r\n                await cursor.ConsumeAsync();\r\n\r\n                await driver.CloseAsync();\r\n                return people;\r\n        }\r\n\r\n\r\n\r\n\r\nIve tryed to setup that Query to get Reults like from: https://github.com/neo4j/neo4j-dotnet-driver\r\nBut most exmaples are for neo4j v3 with the Client.\r\n\r\nthank you and best regards\r\n\r\nupdate with working code:\r\n\r\n            private static async Task ShowResultsAsync()\r\n        {\r\n            var found = await GetSuggestionsFromNeoAsync(&quot;Name&quot;);\r\n            if (found.Count &gt; 0)\r\n            {\r\n                //enumerate the inner list\r\n                foreach (var item in found)\r\n                {\r\n                    //output the actual item\r\n                    MessageBox.Show(&quot;Person found Entry: &quot; + item);\r\n                }\r\n            }\r\n            else {\r\n                MessageBox.Show(&quot;Person not found&quot;);\r\n\r\n            }\r\n\r\n        }","link":"https://stackoverflow.com/questions/60226067/query-neo4j-and-return-found-nodes-with-net-driver-in-wpf-app","title":"Query Neo4j and return found Nodes with Net Driver in WPF App"},{"tags":["neo4j"],"answers":[{"comments":[{"owner":{"reputation":129,"user_id":10266998,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-gxYzaoeZZIw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaN23vgIemWoxVoYoxZ3T-Ef0FuNtQ/mo/photo.jpg?sz=128","display_name":"Pablo","link":"https://stackoverflow.com/users/10266998/pablo"},"edited":false,"score":0,"creation_date":1581628171,"post_id":60216457,"comment_id":106510681,"link":"https://stackoverflow.com/questions/60215586/running-queries-using-bash-script/60216457#comment106510681_60216457"}],"tags":[],"owner":{"reputation":41,"user_id":10798114,"user_type":"registered","profile_image":"https://i.stack.imgur.com/qQTy3.jpg?s=128&g=1","display_name":"Onyr","link":"https://stackoverflow.com/users/10798114/onyr"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581627917,"creation_date":1581627917,"answer_id":60216457,"question_id":60215586,"share_link":"https://stackoverflow.com/a/60216457","body_markdown":"Since you seem really lost, a good start is always to have a look at the [doc][1]. Everything you could possibly wonder is explainer there. Try to search the internet a bit when something seems wrong.\r\n\r\n&gt; &quot;Cypher is a declarative query language for graphs. For more details, see the Cypher Manual. The recommended way of programmatically interacting with the database is either through the official drivers or using the Java API.&quot; (From the doc, Introduction\r\n\r\nApparently, you don&#39;t even need to use bash which is old school and not very handy to use unless you already know very well what you are doing. You can use the Java API instead if you know this language. \r\n\r\n[Here][2] you will even find how to use drivers to use it with the popular JavaScript!\r\n\r\nYou should precise your question.\r\n\r\n\r\n  [1]: https://neo4j.com/docs/operations-manual/current/\r\n  [2]: https://neo4j.com/docs/driver-manual/4.0/get-started/#driver-get-started-installation","link":"https://stackoverflow.com/questions/60215586/running-queries-using-bash-script/60216457#60216457","title":"running queries using bash script"},{"tags":[],"owner":{"reputation":23863,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1581633056,"creation_date":1581633056,"answer_id":60217467,"question_id":60215586,"share_link":"https://stackoverflow.com/a/60217467","body_markdown":"Neo4j includes [cypher-shell](https://neo4j.com/docs/operations-manual/current/tools/cypher-shell/), a command line tool that you can use to connect to Neo4j and execute queries.\r\n\r\nRather than invoking this in an interactive way, you can execute cypher directly when issuing the command to run cypher-shell, and you can also pipe in a file with cypher commands to execute, and also supply parameters to use when executing the cypher. Provided that the CSV file is in an accessible location (should be in the import folder under your neo4j home folder), you can supply the parameter of the file name, and use that parameter in the cypher query provided when executing cypher-shell.","link":"https://stackoverflow.com/questions/60215586/running-queries-using-bash-script/60217467#60217467","title":"running queries using bash script"}],"owner":{"reputation":129,"user_id":10266998,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-gxYzaoeZZIw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaN23vgIemWoxVoYoxZ3T-Ef0FuNtQ/mo/photo.jpg?sz=128","display_name":"Pablo","link":"https://stackoverflow.com/users/10266998/pablo"},"last_editor":{"reputation":129,"user_id":10266998,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-gxYzaoeZZIw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaN23vgIemWoxVoYoxZ3T-Ef0FuNtQ/mo/photo.jpg?sz=128","display_name":"Pablo","link":"https://stackoverflow.com/users/10266998/pablo"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60217467,"answer_count":2,"score":0,"last_activity_date":1581633056,"creation_date":1581624048,"last_edit_date":1581628267,"question_id":60215586,"share_link":"https://stackoverflow.com/q/60215586","body_markdown":"I need to run Neo4j on Kali linux, use a bash script to start it and run my intended Cypher queries. Is it possible? If so, would you please tell me how can I do this? I didn&#39;t find anything about this. All I have done is this:\r\n\r\n    sudo apt-get install neo4j\r\n\r\nwhich has installed neo4j on my Kali. What should I do next?\r\n\r\nTo further clarify my question: I have a bash script which produces a .csv file. Now I want to use this .csv file to create a graph in neo4j. I want to know whether there is any way that after creating the .csv file in my bash script to run the neo4j through the same bash script and create the graph through the query I have written for .csv file.","link":"https://stackoverflow.com/questions/60215586/running-queries-using-bash-script","title":"running queries using bash script"},{"tags":["neo4j","cypher"],"answers":[{"tags":[],"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1581631091,"last_edit_date":1581631091,"creation_date":1581624106,"answer_id":60215599,"question_id":60215273,"share_link":"https://stackoverflow.com/a/60215599","body_markdown":"You can use the [aggregating function](https://neo4j.com/docs/developer-manual/current/cypher/functions/aggregating/) `COUNT` to find the number of distinct `Event` nodes that have a `HAS_CASE` relationship directed at each `Case` node.\r\n\r\nFor example:\r\n\r\n    MATCH (c:Case)\r\n    OPTIONAL MATCH (c)&lt;-[:HAS_CASE]-(e:Event)\r\n    RETURN c, COUNT(DISTINCT e);\r\n\r\nThe second `MATCH` is `OPTIONAL` so that you will still get a result for  `Case` nodes that have no associated events.\r\n\r\n*NOTE: The `DISTINCT` option is only needed if it is possible for a `Case` node to have multiple `HAS_CASE` relationships with the same `Event` node instance.*","link":"https://stackoverflow.com/questions/60215273/how-to-loop-through-nodes-for-a-specific-label-and-show-how-many-distinct-nodes/60215599#60215599","title":"How to loop through nodes for a specific label and show how many distinct nodes connect to it (Neo4j)"}],"owner":{"reputation":227,"user_id":11650363,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0a47b903f3ea8e34e162930b1f55caec?s=128&d=identicon&r=PG&f=1","display_name":"Hongli Bu","link":"https://stackoverflow.com/users/11650363/hongli-bu"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60215599,"answer_count":1,"score":0,"last_activity_date":1581631091,"creation_date":1581622518,"question_id":60215273,"share_link":"https://stackoverflow.com/q/60215273","body_markdown":"Hi I am using neo4j as my db. I want to do this thing in neo4j browser: given a label (e.g. Case), find out for every node that belongs to this label, how many distinct node(belongs to the other Label) connect it.\r\n\r\nI was trying this:\r\n```\r\nMATCH (e1:Event) - [hc1:HAS_CASE] -&gt; (c:Case) &lt;- [hc2 :HAS_CASE] - (e2:Event) WHERE e1.eventId &lt;&gt; e2.eventId RETURN c\r\n```\r\nto list all the c that has two distinct nodes connecting to it.\r\n\r\nBut every time I ran this, neo4j browser crashed. I am thinking this query might be very memory and time consuming. So what should it do to achieve this?","link":"https://stackoverflow.com/questions/60215273/how-to-loop-through-nodes-for-a-specific-label-and-show-how-many-distinct-nodes","title":"How to loop through nodes for a specific label and show how many distinct nodes connect to it (Neo4j)"},{"tags":["java","spring","spring-boot","maven","neo4j"],"comments":[{"owner":{"reputation":183,"user_id":8383744,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/cad9d89972b1591bbe384f23a88b51d5?s=128&d=identicon&r=PG&f=1","display_name":"C2H50H","link":"https://stackoverflow.com/users/8383744/c2h50h"},"edited":false,"score":0,"creation_date":1581625282,"post_id":60214385,"comment_id":106509414,"link":"https://stackoverflow.com/questions/60214385/lots-of-dependences-went-to-point-could-not-find-class-org-neo4j-ogm-session-s#comment106509414_60214385"},{"owner":{"reputation":1,"user_id":12894076,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0f7aece0f131aca2fd6e76c6b5119478?s=128&d=identicon&r=PG&f=1","display_name":"WildTurbo","link":"https://stackoverflow.com/users/12894076/wildturbo"},"reply_to_user":{"reputation":183,"user_id":8383744,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/cad9d89972b1591bbe384f23a88b51d5?s=128&d=identicon&r=PG&f=1","display_name":"C2H50H","link":"https://stackoverflow.com/users/8383744/c2h50h"},"edited":false,"score":0,"creation_date":1582031235,"post_id":60214385,"comment_id":106629737,"link":"https://stackoverflow.com/questions/60214385/lots-of-dependences-went-to-point-could-not-find-class-org-neo4j-ogm-session-s#comment106629737_60214385"}],"owner":{"reputation":1,"user_id":12894076,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0f7aece0f131aca2fd6e76c6b5119478?s=128&d=identicon&r=PG&f=1","display_name":"WildTurbo","link":"https://stackoverflow.com/users/12894076/wildturbo"},"comment_count":2,"delete_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1581618630,"creation_date":1581618630,"question_id":60214385,"share_link":"https://stackoverflow.com/q/60214385","body_markdown":"Its chat bot on telegram api. Wanted to add registration and users bd. Done all by some guide. Had no errors with import while writing. But in Run started getting lots of errors:\r\n\r\nFirst was: Caused by: java.lang.IllegalArgumentException: Could not find class [org.springframework.data.mongodb.MongoDbFactory]\r\nI added it.\r\n\r\nThen: org.springframework.data.jdbc.repository.config.JdbcRepositoryConfigExtensio - it was also added.\r\n\r\nThen: org.neo4j/neo4j-ogm was also added ... aaand thats how i got to point where nothing works cause there is   [           main] o.s.boot.SpringApplication               : Application run failed\r\n\r\norg.springframework.beans.factory.BeanDefinitionStoreException: Failed to parse configuration class [Main]; nested exception is java.lang.IllegalArgumentException: Could not find class [org.neo4j.ogm.session.SessionFactory] - and there is no &quot;SessionFactory&quot; on Maven.\r\n\r\nWhat should I add to have help?\r\n\r\nMy main is:\r\n```import org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.scheduling.annotation.EnableScheduling;\r\nimport org.telegram.telegrambots.ApiContextInitializer;\r\n\r\n@SpringBootApplication\r\n@EnableScheduling\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        ApiContextInitializer.init();\r\n        SpringApplication.run(Main.class, args);\r\n    }\r\n}\r\n ```\r\n\r\n\r\n\r\nMy pom.xml:\r\n ```&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n  &lt;groupId&gt;WTG_tgbot&lt;/groupId&gt;\r\n  &lt;artifactId&gt;WTG_tgbot&lt;/artifactId&gt;\r\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n  &lt;build&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;configuration&gt;\r\n          &lt;source&gt;8&lt;/source&gt;\r\n          &lt;target&gt;8&lt;/target&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\r\n      &lt;version&gt;5.2.3.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n      &lt;version&gt;2.2.4.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n   &lt;!-- https://mvnrepository.com/artifact/org.springframework.data/spring-data-commons --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-data-commons&lt;/artifactId&gt;\r\n      &lt;version&gt;2.2.4.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework.data/spring-data-mongodb --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-data-mongodb&lt;/artifactId&gt;\r\n      &lt;version&gt;2.2.4.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework.data/spring-data-jdbc --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-data-jdbc&lt;/artifactId&gt;\r\n      &lt;version&gt;1.1.4.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/org.neo4j/neo4j-ogm --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.neo4j&lt;/groupId&gt;\r\n      &lt;artifactId&gt;neo4j-ogm&lt;/artifactId&gt;\r\n      &lt;version&gt;3.2.8&lt;/version&gt;\r\n      &lt;type&gt;pom&lt;/type&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.telegram&lt;/groupId&gt;\r\n      &lt;artifactId&gt;telegrambots-spring-boot-starter&lt;/artifactId&gt;\r\n      &lt;version&gt;4.6&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n      &lt;version&gt;2.2.4.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\r\n      &lt;version&gt;2.2.4.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\r\n      &lt;version&gt;2.2.4.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n      &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n      &lt;version&gt;1.4.200&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/commons-validator/commons-validator --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;commons-validator&lt;/groupId&gt;\r\n      &lt;artifactId&gt;commons-validator&lt;/artifactId&gt;\r\n      &lt;version&gt;1.6&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;oro&lt;/groupId&gt;\r\n      &lt;artifactId&gt;oro&lt;/artifactId&gt;\r\n      &lt;version&gt;2.0.8&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;com.sun.mail&lt;/groupId&gt;\r\n        &lt;artifactId&gt;javax.mail&lt;/artifactId&gt;\r\n        &lt;version&gt;1.6.2&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n ```","link":"https://stackoverflow.com/questions/60214385/lots-of-dependences-went-to-point-could-not-find-class-org-neo4j-ogm-session-s","title":"Lots of dependences went to point: Could not find class [org.neo4j.ogm.session.SessionFactory] and it cant be added to pom.xml cause cant be found"},{"tags":["python","neo4j","jupyter-notebook","jupyter"],"answers":[{"tags":[],"owner":{"reputation":11,"user_id":12933759,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AAuE7mBrzCDrTpDFdhUOgECQtutNaQ4IWkj3it0sEoJImg=k-s128","display_name":"Luis Corral","link":"https://stackoverflow.com/users/12933759/luis-corral"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1582218539,"creation_date":1582218539,"answer_id":60325237,"question_id":60214110,"share_link":"https://stackoverflow.com/a/60325237","body_markdown":"neo4j library has the function to do this.\r\n\r\n```python\r\nfrom neo4j import GraphDatabase\r\ngraphdb=GraphDatabase.driver(uri=&quot;$uri&quot;,auth=(&quot;$user&quot;,&quot;$password&quot;))\r\nsession=graphdb.session()\r\nsession.run(&quot;Your query goes here&quot;)\r\ngraphdb.close()\r\n```\r\n  \r\nThis only will run the command, is up to you what you&#39;ll do with the info you get.  \r\n  \r\nMore info about this topic here:  \r\nhttps://neo4j.com/developer/python/  \r\nhttps://neo4j.com/docs/api/python-driver/current/transactions.html","link":"https://stackoverflow.com/questions/60214110/run-neo4j-queries-stored-in-excel-workbook-in-python-jupyter/60325237#60325237","title":"Run Neo4j queries stored in excel workbook in python (Jupyter)"}],"owner":{"reputation":19,"user_id":10133456,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/83d8a1438565e9e910a1cd3f215b8414?s=128&d=identicon&r=PG&f=1","display_name":"Nu2prog","link":"https://stackoverflow.com/users/10133456/nu2prog"},"comment_count":0,"delete_vote_count":0,"close_vote_count":1,"is_answered":true,"view_count":23,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1582218539,"creation_date":1581617498,"question_id":60214110,"share_link":"https://stackoverflow.com/q/60214110","body_markdown":"I have an excel worksheet which contains Neo4j cypher queries and I would like to load the excel file into python to run the queries instead of running them manually.\r\n\r\nis there a special library that does this? any help will be appreciated","link":"https://stackoverflow.com/questions/60214110/run-neo4j-queries-stored-in-excel-workbook-in-python-jupyter","title":"Run Neo4j queries stored in excel workbook in python (Jupyter)"},{"tags":["c#",".net","database","neo4j"],"owner":{"reputation":1,"user_id":12893336,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AAuE7mBL-aeKHom1A_vTyP2A64rc-KRySLU9PKby6f0yeg=k-s128","display_name":"Lil Yung","link":"https://stackoverflow.com/users/12893336/lil-yung"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1581608837,"creation_date":1581608837,"question_id":60211696,"share_link":"https://stackoverflow.com/q/60211696","body_markdown":"i am working on my c# web server and i want to user neo4j as a database. I have models in c# code like User:\r\n```\r\npublic class User\r\n    {\r\n        public string Username { get; set; }\r\n        public string Email { get; set; }\r\n        public string Password { get; set; }\r\n        public long? Id { get; set; }\r\n        public long? Status { get; set; }\r\n        public bool? Active { get; set; }\r\n        public bool? Blocked { get; set; }\r\n        public string RefreshToken { get; set; }\r\n        public User() { }\r\n    }\r\n```\r\nI need some advice how to deserialize IRecord returned by session.Run function.\r\nI have this function: \r\n```\r\npublic List&lt;T&gt; Query&lt;T&gt;(string cypher, object data) where T: new() \r\n        {\r\n            using (ISession session = this.Driver.Session(AccessMode.Write))\r\n            {\r\n                try\r\n                {\r\n                    IStatementResult result = session.Run(cypher, data);\r\n                    List&lt;T&gt; res = new List&lt;T&gt;();\r\n                    var type = typeof(T);\r\n                    foreach (IRecord record in result)\r\n                    {\r\n\r\n                        T o = new T();\r\n                        for (int i = 0; i &lt; record.Keys.Count; i++)\r\n                        {\r\n                            try\r\n                            {\r\n                                var prop = type.GetProperty(record.Keys[i]);\r\n                                if (prop != null) prop.SetValue(o, record.Values[record.Keys[i]]);\r\n                            }\r\n                            catch { }\r\n                        }\r\n                        res.Add(o);\r\n                    }\r\n                    return res;\r\n                }\r\n                catch(Exception e)\r\n                {\r\n                    Debug.WriteLine(&quot;Error occured: #1: &quot;+e.Message);\r\n                    return null;\r\n                }\r\n            }\r\n        }\r\n```\r\nbut i am not sure if it&#39;s performance is good","link":"https://stackoverflow.com/questions/60211696/neo4j-c-driver","title":"Neo4j c# driver"},{"tags":["neo4j"],"owner":{"user_type":"does_not_exist","display_name":"user11106530"},"comment_count":0,"delete_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1581586483,"creation_date":1581586483,"question_id":60204551,"share_link":"https://stackoverflow.com/q/60204551","body_markdown":"I&#39;m new to databases and networks.\r\nI have created a graph on Neo4j using Neo4j Desktop and default settings using Cypher queries from Neo4j browser.\r\n\r\nNow i have uploaded the `data/database` files to a GCP server.\r\n\r\nAll i want to know is step-by-step solution of how do i access the graph on a different pc with neo4j installed using neo4j **`connect to remote graph`** option?\r\n\r\nPs. I don&#39;t have any idea about cloud and networking. Please help.","link":"https://stackoverflow.com/questions/60204551/how-to-connect-to-remote-graph-in-neo4j","title":"How to connect to remote graph in neo4j?"},{"tags":["c#","neo4j","cypher","neo4jclient"],"comments":[{"owner":{"reputation":5181,"user_id":884101,"user_type":"registered","accept_rate":25,"profile_image":"https://www.gravatar.com/avatar/67f7c5940eff152578a015bacbffa89f?s=128&d=identicon&r=PG","display_name":"Chetan Ranpariya","link":"https://stackoverflow.com/users/884101/chetan-ranpariya"},"edited":false,"score":0,"creation_date":1581580640,"post_id":60202892,"comment_id":106484679,"link":"https://stackoverflow.com/questions/60202892/return-result-as-anonymous-object-issue#comment106484679_60202892"},{"owner":{"reputation":3134,"user_id":8949476,"user_type":"registered","accept_rate":60,"profile_image":"https://www.gravatar.com/avatar/54d34b1abb6c973aa0be45f5e953b405?s=128&d=identicon&r=PG&f=1","display_name":"Aousaf rashid","link":"https://stackoverflow.com/users/8949476/aousaf-rashid"},"edited":false,"score":0,"creation_date":1581581827,"post_id":60202892,"comment_id":106485217,"link":"https://stackoverflow.com/questions/60202892/return-result-as-anonymous-object-issue#comment106485217_60202892"},{"owner":{"reputation":11,"user_id":5448526,"user_type":"registered","profile_image":"https://i.stack.imgur.com/aO57Q.jpg?s=128&g=1","display_name":"A.Milushev","link":"https://stackoverflow.com/users/5448526/a-milushev"},"edited":false,"score":0,"creation_date":1581582139,"post_id":60202892,"comment_id":106485371,"link":"https://stackoverflow.com/questions/60202892/return-result-as-anonymous-object-issue#comment106485371_60202892"},{"owner":{"reputation":527,"user_id":2251733,"user_type":"registered","accept_rate":50,"profile_image":"https://i.stack.imgur.com/hAYm2.jpg?s=128&g=1","display_name":"Nilay","link":"https://stackoverflow.com/users/2251733/nilay"},"edited":false,"score":0,"creation_date":1581582572,"post_id":60202892,"comment_id":106485613,"link":"https://stackoverflow.com/questions/60202892/return-result-as-anonymous-object-issue#comment106485613_60202892"},{"owner":{"reputation":11,"user_id":5448526,"user_type":"registered","profile_image":"https://i.stack.imgur.com/aO57Q.jpg?s=128&g=1","display_name":"A.Milushev","link":"https://stackoverflow.com/users/5448526/a-milushev"},"edited":false,"score":0,"creation_date":1581691376,"post_id":60202892,"comment_id":106532288,"link":"https://stackoverflow.com/questions/60202892/return-result-as-anonymous-object-issue#comment106532288_60202892"}],"owner":{"reputation":11,"user_id":5448526,"user_type":"registered","profile_image":"https://i.stack.imgur.com/aO57Q.jpg?s=128&g=1","display_name":"A.Milushev","link":"https://stackoverflow.com/users/5448526/a-milushev"},"last_editor":{"reputation":11,"user_id":5448526,"user_type":"registered","profile_image":"https://i.stack.imgur.com/aO57Q.jpg?s=128&g=1","display_name":"A.Milushev","link":"https://stackoverflow.com/users/5448526/a-milushev"},"comment_count":5,"delete_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1581581960,"creation_date":1581580448,"last_edit_date":1581581960,"question_id":60202892,"share_link":"https://stackoverflow.com/q/60202892","body_markdown":"I have ran into the following issue: when I execute query that return result in anonymous object :\r\n\r\n```\r\nvar query = this.GraphClient.Cypher\r\n.Match($&quot;(e:{SystemNodeLabelEnum.Product.ToString()} {{MyId: &quot;{myId}&quot;}})&quot;)\r\n.Return(e =&gt; new { SystemNode = e.As&lt;SystemNode&gt;() })\r\n.OrderBy(&quot;e.NodeId&quot;)\r\n.Skip(offset)\r\n.Limit(limit);\r\n```\r\n\r\nthis query throw exception:\r\n```\r\nException:\r\nException has been thrown by the target of an invocation.\r\nInner exception:\r\nConversion of ZonedDateTime to INode is not supported.\r\n   at Neo4j.Driver.V1.TemporalValue.System.IConvertible.ToType(Type conversionType, IFormatProvider provider)\r\n   at System.Convert.ChangeType(Object value, Type conversionType, IFormatProvider provider) in /_/src/System.Private.CoreLib/shared/System/Convert.cs:line 377\r\n   at System.Convert.ChangeType(Object value, Type conversionType) in /_/src/System.Private.CoreLib/shared/System/Convert.cs:line 315\r\n   at Neo4j.Driver.V1.ValueExtensions.As[T](Object value)\r\n   at Neo4jClient.StatementResultHelper.Parse[T](IRecord record, String identifier, IGraphClient graphClient)\r\n```\r\n\r\nWhen i have changed the return type to be the concrete object (not anonymous ) as following:\r\n\r\n```\r\npublic class SystemNodeContainer\r\n{\r\n   public SystemNode Node { get; set; }\r\n}\r\n```\r\n\r\nthe same query execute properly and return the correct result.\r\n\r\n```\r\nvar query = this.GraphClient.Cypher\r\n.Match($&quot;(e:{SystemNodeLabelEnum.Product.ToString()} {{MyId: &quot;{myId}&quot;}})&quot;)\r\n.Return(e =&gt; new SystemNodeContainer { SystemNode = e.As&lt;SystemNode&gt;() })\r\n.OrderBy(&quot;e.NodeId&quot;)\r\n.Skip(offset)\r\n.Limit(limit);\r\n```\r\n\r\nCould you please advise?","link":"https://stackoverflow.com/questions/60202892/return-result-as-anonymous-object-issue","title":"Return result as anonymous object issue"},{"tags":["graph","neo4j","cypher"],"answers":[{"comments":[{"owner":{"reputation":968,"user_id":1205982,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/140a48f1dff43b11c6b328290c7547cf?s=128&d=identicon&r=PG","display_name":"lost17","link":"https://stackoverflow.com/users/1205982/lost17"},"edited":false,"score":0,"creation_date":1582568013,"post_id":60203424,"comment_id":106814329,"link":"https://stackoverflow.com/questions/60200822/add-node-to-linked-list-after-given-node-in-cypher/60203424#comment106814329_60203424"}],"tags":[],"owner":{"reputation":23863,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1581582610,"creation_date":1581582610,"answer_id":60203424,"question_id":60200822,"share_link":"https://stackoverflow.com/a/60203424","body_markdown":"MERGE is not the right clause to use here, since as you saw it will create the pattern if it does not exist, giving you a blank node and a relationship to it from `prevRound`. OPTIONAL MATCH is the correct clause to use for that line (though you do need a WITH clause between it and the preceding MERGE)...but a better approach would actually be to rearrange your query a little (see the last paragraph).\r\n\r\nYou should also split up the last MERGE, since a longer pattern like this will likely not do what you expect it to do under certain circumstances. Read our knowledge base article on [understanding how MERGE works](https://neo4j.com/developer/kb/understanding-how-merge-works/) for some of the finer details that might otherwise trip you up.\r\n\r\nWe can actually accomplish what you want fairly simply by rearranging parts of your query.\r\n\r\n    MERGE (round:Round {uuid: $round.uuid})\r\n    MERGE (prevRound:Round {uuid: $prevRound.uuid})\r\n    WITH round, prevRound\r\n    OPTIONAL MATCH (prevRound)-[oldRel:CONTINUES]-&gt;(nextRound)\r\n    DELETE oldRel\r\n    MERGE (prevRound)-[:CONTINUES]-&gt;(round)\r\n    WITH round, nextRound, oldRel\r\n    WHERE nextRound IS NOT NULL\r\n    MERGE (round)-[:CONTINUES]-&gt;(nextRound)\r\n\r\nWe guard the MERGE between round and nextRound by the preceding WHERE clause, which filters out any rows where nextRound doesn&#39;t exist.\r\n\r\nA perhaps simpler way to do this, though slightly less efficient, is to deal with the nodes you know exist first, round and prevRound, then deal with the pattern that may or may not exist, the MATCH to the old node, though you will need to do a bit of filtering, since the MATCH will also pick of the relationship you just created to round:\r\n\r\n    MERGE (round:Round {uuid: $round.uuid})\r\n    MERGE (prevRound:Round {uuid: $prevRound.uuid})\r\n    MERGE (prevRound)-[:CONTINUES]-&gt;(round)\r\n    WITH round, prevRound\r\n    MATCH (prevRound)-[oldRel:CONTINUES]-&gt;(nextRound)\r\n    WHERE nextRound &lt;&gt; round\r\n    DELETE oldRel\r\n    MERGE (round)-[:CONTINUES]-&gt;(nextRound)\r\n\r\nYou might also consider if there are any places where you know such a relationship does not exist, and if so, use CREATE instead of MERGE. I have a feeling the last MERGE here probably could be a CREATE instead.","link":"https://stackoverflow.com/questions/60200822/add-node-to-linked-list-after-given-node-in-cypher/60203424#60203424","title":"Add node to linked list after given node in cypher"}],"owner":{"reputation":968,"user_id":1205982,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/140a48f1dff43b11c6b328290c7547cf?s=128&d=identicon&r=PG","display_name":"lost17","link":"https://stackoverflow.com/users/1205982/lost17"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60203424,"answer_count":1,"score":0,"last_activity_date":1581582610,"creation_date":1581570416,"question_id":60200822,"share_link":"https://stackoverflow.com/q/60200822","body_markdown":"I have the following graph:\r\n\r\n    (Boxer)-[:STARTS]-&gt;(Round)-[:CONTINUES]-&gt;(Round)-[:CONTINUES]-&gt;(Round)-[:CONTINUES]-&gt;(Round)\r\n\r\nI want to insert a new Round AFTER a specified Round called prevRound. Right now I am doing this:\r\n\r\n    MERGE (round:Round {uuid: $round.uuid})\r\n    MERGE (prevRound:Round {uuid: $prevRound.uuid})\r\n    MERGE (prevRound)-[oldRel:CONTINUES]-&gt;(nextRound)\r\n    MERGE (prevRound)-[:CONTINUES]-&gt;(round)-[:CONTINUES]-&gt;(nextRound)\r\n    DELETE oldRel\r\n\r\nThis works but it will actually create an empty node when I try to insert a node at the end of the list. I know it&#39;s because of:\r\n\r\n    MERGE (prevRound)-[oldRel:CONTINUES]-&gt;(nextRound)\r\n\r\nIndeed, this will create a nextRound node when it does not exists.\r\n\r\nHow can I prevent that?\r\nI tried with optional match but it did not work at well.\r\n\r\n","link":"https://stackoverflow.com/questions/60200822/add-node-to-linked-list-after-given-node-in-cypher","title":"Add node to linked list after given node in cypher"},{"tags":["neo4j"],"answers":[{"tags":[],"owner":{"reputation":5630,"user_id":2266,"user_type":"registered","accept_rate":90,"profile_image":"https://www.gravatar.com/avatar/aa64f5e61bb8cbcc9d10372256580364?s=128&d=identicon&r=PG","display_name":"Chris Skardon","link":"https://stackoverflow.com/users/2266/chris-skardon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1581599044,"creation_date":1581599044,"answer_id":60208545,"question_id":60200232,"share_link":"https://stackoverflow.com/a/60208545","body_markdown":"You don&#39;t appear to have a URI defined, you need to put that in - which will be something like:\r\n`neo4j://localhost:7687`\r\n\r\nthen you need to provide the user/pass you have setup - if it&#39;s the first time you&#39;ve attempted to login - use `neo4j` as the user and password, and you should get in.","link":"https://stackoverflow.com/questions/60200232/neo4j-login-issue/60208545#60208545","title":"Neo4j Login issue"}],"owner":{"reputation":3,"user_id":12264407,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/3e7a472b6d3578f2f2043e1ebc522c72?s=128&d=identicon&r=PG&f=1","display_name":"Ramith Thenuwara","link":"https://stackoverflow.com/users/12264407/ramith-thenuwara"},"last_editor":{"reputation":5630,"user_id":2266,"user_type":"registered","accept_rate":90,"profile_image":"https://www.gravatar.com/avatar/aa64f5e61bb8cbcc9d10372256580364?s=128&d=identicon&r=PG","display_name":"Chris Skardon","link":"https://stackoverflow.com/users/2266/chris-skardon"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60208545,"answer_count":1,"score":0,"last_activity_date":1581599044,"creation_date":1581566084,"last_edit_date":1581598954,"question_id":60200232,"share_link":"https://stackoverflow.com/q/60200232","body_markdown":"[Observe this Image about the Neo4j login issue][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/eoY3E.png\r\n\r\n**This appears when tried to login to Neo4j browser, This dosen&#39;t appear in the begining after few hours it appeared*","link":"https://stackoverflow.com/questions/60200232/neo4j-login-issue","title":"Neo4j Login issue"},{"tags":["neo4j"],"answers":[{"comments":[{"owner":{"reputation":613,"user_id":7491982,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/c510ddd12aaa347166c6cabaeacedf5f?s=128&d=identicon&r=PG&f=1","display_name":"helen","link":"https://stackoverflow.com/users/7491982/helen"},"edited":false,"score":0,"creation_date":1581541532,"post_id":60196815,"comment_id":106473877,"link":"https://stackoverflow.com/questions/60196604/dedicating-the-same-color-to-the-nodes-that-have-the-same-label/60196815#comment106473877_60196815"},{"owner":{"reputation":521,"user_id":4316853,"user_type":"registered","profile_image":"https://i.stack.imgur.com/LCnYL.jpg?s=128&g=1","display_name":"NonameCurious","link":"https://stackoverflow.com/users/4316853/nonamecurious"},"reply_to_user":{"reputation":613,"user_id":7491982,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/c510ddd12aaa347166c6cabaeacedf5f?s=128&d=identicon&r=PG&f=1","display_name":"helen","link":"https://stackoverflow.com/users/7491982/helen"},"edited":false,"score":0,"creation_date":1581541826,"post_id":60196815,"comment_id":106474003,"link":"https://stackoverflow.com/questions/60196604/dedicating-the-same-color-to-the-nodes-that-have-the-same-label/60196815#comment106474003_60196815"}],"tags":[],"owner":{"reputation":521,"user_id":4316853,"user_type":"registered","profile_image":"https://i.stack.imgur.com/LCnYL.jpg?s=128&g=1","display_name":"NonameCurious","link":"https://stackoverflow.com/users/4316853/nonamecurious"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581541448,"creation_date":1581541448,"answer_id":60196815,"question_id":60196604,"share_link":"https://stackoverflow.com/a/60196815","body_markdown":"First of all, as a good practice, user camel case for your node labels. Let&#39;s say you have Firstname and Lastname as your labels. When you query your nodes in Neo4j admin console, you see the labels at the top left:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nNow to color labels differently, click on the label and then choose the color you want at the bottom:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xJJ2z.png\r\n  [2]: https://i.stack.imgur.com/TnUY6.png","link":"https://stackoverflow.com/questions/60196604/dedicating-the-same-color-to-the-nodes-that-have-the-same-label/60196815#60196815","title":"dedicating the same color to the nodes that have the same label"}],"owner":{"reputation":613,"user_id":7491982,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/c510ddd12aaa347166c6cabaeacedf5f?s=128&d=identicon&r=PG&f=1","display_name":"helen","link":"https://stackoverflow.com/users/7491982/helen"},"last_editor":{"reputation":613,"user_id":7491982,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/c510ddd12aaa347166c6cabaeacedf5f?s=128&d=identicon&r=PG&f=1","display_name":"helen","link":"https://stackoverflow.com/users/7491982/helen"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1581541578,"creation_date":1581540411,"last_edit_date":1581541578,"question_id":60196604,"share_link":"https://stackoverflow.com/q/60196604","body_markdown":"I&#39;m new to neo4j. I have a .csv file with 2 columns (Fname and Lname). I want to write a query that takes each column and creates nodes based on their values. I mean I want to create nodes for Lname column and nodes for Fname column. Here is the query:\r\n\r\n    LOAD CSV WITH HEADERS FROM &#39;file:///names.csv&#39; AS row\r\n    WITH row.Fname AS first, row.Lname AS last\r\n    MERGE (p:la {last: last})\r\n    MERGE (o:fi {first: first})\r\n    ...\r\n\r\nMy problem is that all nodes have the same color and all of them are gray. How can I change the query in a way that the nodes of a specific label, have the same color? For example nodes &quot;p&quot; that have the &quot;la&quot; label, have blue colors and nodes &quot;o&quot; that have the &quot;fi&quot; label have the &quot;green&quot; color?\r\n\r\nIs it possible to achieve this through the query?","link":"https://stackoverflow.com/questions/60196604/dedicating-the-same-color-to-the-nodes-that-have-the-same-label","title":"dedicating the same color to the nodes that have the same label"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":521,"user_id":4316853,"user_type":"registered","profile_image":"https://i.stack.imgur.com/LCnYL.jpg?s=128&g=1","display_name":"NonameCurious","link":"https://stackoverflow.com/users/4316853/nonamecurious"},"edited":false,"score":0,"creation_date":1581540864,"post_id":60195919,"comment_id":106473595,"link":"https://stackoverflow.com/questions/60195919/neo4j-cypher-if-then-else#comment106473595_60195919"},{"owner":{"reputation":135,"user_id":5341632,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c004273daf4cad48c5abbbfe13fcab9c?s=128&d=identicon&r=PG&f=1","display_name":"Bruno C","link":"https://stackoverflow.com/users/5341632/bruno-c"},"reply_to_user":{"reputation":521,"user_id":4316853,"user_type":"registered","profile_image":"https://i.stack.imgur.com/LCnYL.jpg?s=128&g=1","display_name":"NonameCurious","link":"https://stackoverflow.com/users/4316853/nonamecurious"},"edited":false,"score":0,"creation_date":1581543994,"post_id":60195919,"comment_id":106474903,"link":"https://stackoverflow.com/questions/60195919/neo4j-cypher-if-then-else#comment106474903_60195919"}],"answers":[{"comments":[{"owner":{"reputation":135,"user_id":5341632,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c004273daf4cad48c5abbbfe13fcab9c?s=128&d=identicon&r=PG&f=1","display_name":"Bruno C","link":"https://stackoverflow.com/users/5341632/bruno-c"},"edited":false,"score":0,"creation_date":1581688367,"post_id":60198341,"comment_id":106530566,"link":"https://stackoverflow.com/questions/60195919/neo4j-cypher-if-then-else/60198341#comment106530566_60198341"}],"tags":[],"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1581549811,"creation_date":1581549811,"answer_id":60198341,"question_id":60195919,"share_link":"https://stackoverflow.com/a/60198341","body_markdown":"The APOC procedure [apoc.do.when](https://neo4j.com/docs/labs/apoc/current/cypher-execution/run-cypher-scripts/#_when_procedures) should be helpful. For example:\r\n\r\n    ...\r\n    MATCH (n:source_name)--(sourcetype)\r\n    CALL apoc.do.when(\r\n      targettype is NULL,\r\n      &quot;MATCH (m:NULL_TARGET_LABEL {name: target_name}) RETURN COLLECT(m) AS ms&quot;,\r\n      &#39;MATCH (m:NON_NULL_TARGET_LABEL {name:target_name})--(targettype) RETURN COLLECT(m) AS ms&#39;,\r\n      {target_name:target_name, targettype:targettype}) YIELD value\r\n    UNWIND value.ms AS m\r\n    MERGE (n)-[:TIGHT_IT_TO]-(m)\r\n    ...","link":"https://stackoverflow.com/questions/60195919/neo4j-cypher-if-then-else/60198341#60198341","title":"neo4j Cypher IF THEN ELSE"}],"owner":{"reputation":135,"user_id":5341632,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c004273daf4cad48c5abbbfe13fcab9c?s=128&d=identicon&r=PG&f=1","display_name":"Bruno C","link":"https://stackoverflow.com/users/5341632/bruno-c"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":60198341,"answer_count":1,"score":1,"last_activity_date":1581549811,"creation_date":1581537208,"question_id":60195919,"share_link":"https://stackoverflow.com/q/60195919","body_markdown":"I need to read a json file having this structure:\r\n```\r\n{\r\n\t&quot;source&quot;:&quot;source name&quot;,\r\n\t&quot;target&quot;:&quot;target name&quot;,\r\n\t&quot;targettype&quot;:&quot;targettype&quot;,\r\n}\r\n```\r\nThe nodes source and target are already loaded in my graph. \r\nAnd they have distinct labels.\r\nTarget names are not unique but each duplicate would be in relationship with a different targettype\r\n\r\nThere are then two distinct groups of target node, those that have a type and those that do not have a type; in the graph those nodes have distinct labels\r\nplease note that when a node has no type, the json value for targetype is null\r\n\r\nThe json file is meant to load the relationship between the source and the target using the name \r\n\r\nI am pretty lost on how to achieve it.\r\nAs I need a IF THEN ELSE\r\nI TRIED TO USE two FOREACH (ignoreme ) followed by the MATCH but this is not allowed\r\n.....\r\n\r\nThe pseudo code would be\r\n```\r\nLOAD lines from json\r\nWITH blah blah blah\r\nUNWIND blah blah blah\r\nIF targettype is NULL THEN\r\n  MATCH (n:source_name)--(sourcetype)\r\n  MATCH (m:NULL_TARGET_LABEL target_name)\r\nELSE\r\n  MATCH (n: source_name)--(sourcetype)\r\n  MATCH (m:NON_NULL_TARGET_LABEL target_name)--(targettype)\r\nEND\r\nMERGE (n)-[:TIGHT_IT_TO]_(m)\r\nRETURN *\r\n```\r\n\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/60195919/neo4j-cypher-if-then-else","title":"neo4j Cypher IF THEN ELSE"},{"tags":["neo4j"],"answers":[{"tags":[],"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581533827,"last_edit_date":1581533827,"creation_date":1581531469,"answer_id":60194702,"question_id":60193467,"share_link":"https://stackoverflow.com/a/60194702","body_markdown":"While the enterprise edition of neo4j does let you create users with the read-only `reader` [role](https://neo4j.com/docs/operations-manual/current/authentication-authorization/built-in-roles/), that does not prevent you from creating other users with a different role that permits write access.\r\n\r\nSo, there is no problem with creating indexes even if there are some users who only have read-only access.\r\n\r\n","link":"https://stackoverflow.com/questions/60193467/create-indexes-and-deploy-as-read-only/60194702#60194702","title":"Create indexes AND deploy as read-only"}],"owner":{"reputation":101,"user_id":579249,"user_type":"registered","accept_rate":29,"profile_image":"https://www.gravatar.com/avatar/24f5fc70509db75524762e9afc80f572?s=128&d=identicon&r=PG","display_name":"dps27a","link":"https://stackoverflow.com/users/579249/dps27a"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1581533827,"creation_date":1581526658,"question_id":60193467,"share_link":"https://stackoverflow.com/q/60193467","body_markdown":"I want to expose my graph securely (read-only), but also want to create indexes on properties. AFAIK, indexes can only be created on a graph that allows write access...Am I missing something?\r\n\r\nHow do I deploy a read-only Neo4J graph, that has had indexes created on certain properties?\r\n\r\nThanks","link":"https://stackoverflow.com/questions/60193467/create-indexes-and-deploy-as-read-only","title":"Create indexes AND deploy as read-only"},{"tags":["neo4j","graph-databases"],"answers":[{"tags":[],"owner":{"reputation":23863,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1581537405,"creation_date":1581537405,"answer_id":60195967,"question_id":60192344,"share_link":"https://stackoverflow.com/a/60195967","body_markdown":"In Neo4j 4.0, if you have a license for enterprise edition, you can leverage [Neo4j Fabric](https://neo4j.com/docs/operations-manual/4.0/fabric/introduction/), which should allow you to do exactly this: connect to a proxy instance, which must be [configured](https://neo4j.com/docs/operations-manual/4.0/fabric/configuration/) to see other running db instances (which may be running on the same Neo4j dbms as the proxy instance, or which could instead be running on separate servers/clusters).\r\n\r\nThen you can [query across](https://neo4j.com/docs/operations-manual/4.0/fabric/queries/) the graphs, aggregating and working with the result set across them as needed.\r\n\r\n","link":"https://stackoverflow.com/questions/60192344/neo4j-querying-and-aggregation-across-multiple-instances/60195967#60195967","title":"Neo4j querying and aggregation across multiple instances"}],"owner":{"reputation":2020,"user_id":1059639,"user_type":"registered","accept_rate":58,"profile_image":"https://i.stack.imgur.com/rzPqE.jpg?s=128&g=1","display_name":"Mopparthy Ravindranath","link":"https://stackoverflow.com/users/1059639/mopparthy-ravindranath"},"last_editor":{"reputation":8766,"user_id":7879193,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-bVdcN0nQCio/AAAAAAAAAAI/AAAAAAAACfs/jPa4Dr_Nzbk/photo.jpg?sz=128","display_name":"Stanislav Kralin","link":"https://stackoverflow.com/users/7879193/stanislav-kralin"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60195967,"answer_count":1,"score":0,"last_activity_date":1581559526,"creation_date":1581523114,"last_edit_date":1581559526,"question_id":60192344,"share_link":"https://stackoverflow.com/q/60192344","body_markdown":"I am planning to use neo4j for an event management system.  The involved entities are events, places, persons, organizations, so and so forth.  But inorder to keep each org data separate I plan to create separate DB instance for each org.  Becoz of this separation of Database instances, the &#39;Place&#39; nodes are likely to get repeated in these mutliple db instances.\r\n\r\nSo, now, is it possible to aggregate for events based on ```Place``` nodes from all db instances?  Or is it that I have to build my own custom aggregation like map-reduce?\r\n\r\nThanks in advance for helping me out on this..","link":"https://stackoverflow.com/questions/60192344/neo4j-querying-and-aggregation-across-multiple-instances","title":"Neo4j querying and aggregation across multiple instances"},{"tags":["graph","neo4j","cypher"],"answers":[{"comments":[{"owner":{"reputation":55,"user_id":2004461,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/544341b5a65b5d7d0bd703f78ffb473d?s=128&d=identicon&r=PG","display_name":"Driky","link":"https://stackoverflow.com/users/2004461/driky"},"edited":false,"score":0,"creation_date":1581533597,"post_id":60192058,"comment_id":106470322,"link":"https://stackoverflow.com/questions/60190207/from-a-given-node-get-reachable-node-following-unidirectional-relationship-and-d/60192058#comment106470322_60192058"}],"tags":[],"owner":{"reputation":1210,"user_id":1734996,"user_type":"registered","accept_rate":85,"profile_image":"https://i.stack.imgur.com/MaqL4.png?s=128&g=1","display_name":"Graphileon","link":"https://stackoverflow.com/users/1734996/graphileon"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581522299,"creation_date":1581522299,"answer_id":60192058,"question_id":60190207,"share_link":"https://stackoverflow.com/a/60192058","body_markdown":"There is an apoc function to do that. The cypher below illustrates what is does.\r\n\r\n    MATCH treePath=(root:Thing)-[:CHILD*0..]-&gt;(leaf:Thing)\r\n    WHERE NOT (leaf)-[:CHILD]-&gt;()\r\n          AND NOT ()-[:CHILD]-&gt;(root)\r\n    WITH COLLECT(treePath) AS treePaths\r\n    CALL apoc.convert.toTree(treePaths) yield value AS tree\r\n    RETURN tree","link":"https://stackoverflow.com/questions/60190207/from-a-given-node-get-reachable-node-following-unidirectional-relationship-and-d/60192058#60192058","title":"From a given node get reachable node following unidirectional relationship and display that sub-graph as a tree"}],"owner":{"reputation":55,"user_id":2004461,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/544341b5a65b5d7d0bd703f78ffb473d?s=128&d=identicon&r=PG","display_name":"Driky","link":"https://stackoverflow.com/users/2004461/driky"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1581522299,"creation_date":1581516476,"question_id":60190207,"share_link":"https://stackoverflow.com/q/60190207","body_markdown":"here is my problem:\r\n\r\nI&#39;ve got a graph where I have `:Item` with one relationship `:CRAFTED_WITH` to one `:RECIPE` and those `:RECIPE`have one or more relationship `:COMPOSED_OF{quantity}` to ingredients that are `:Item`.\r\n\r\nAs you can imagine you can have several level of relationship to get from a high tier `:Item` to the most basic of components.\r\n\r\nI want to be able to find all nodes that are reachable from a specific node while following only one direction. That part was easy I used the `apoc` procedure `apoc.path.subgraphAll`.\r\n\r\nBut now my next step is to have the result display as a tree and not a graph. In a graph I will ended up with multiple `:Item` on the receiving end of `:COMPOSED_OF` relationship. I want `:Item` to be &quot;duplicated&quot; so they are linked by a single `:COMPOSED_OF` relationship.\r\n\r\nIs it even feasible only in `cypher` ? Or will I have to use another language to handle a graph to turn it into that &quot;tree&quot; structure ?","link":"https://stackoverflow.com/questions/60190207/from-a-given-node-get-reachable-node-following-unidirectional-relationship-and-d","title":"From a given node get reachable node following unidirectional relationship and display that sub-graph as a tree"},{"tags":["neo4j","cypher","distinct","aggregation"],"answers":[{"comments":[{"owner":{"reputation":1754,"user_id":3579212,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/ec9ece98309ba0ab416f17697f1aa344?s=128&d=identicon&r=PG&f=1","display_name":"adnanmuttaleb","link":"https://stackoverflow.com/users/3579212/adnanmuttaleb"},"edited":false,"score":0,"creation_date":1581576951,"post_id":60195959,"comment_id":106483175,"link":"https://stackoverflow.com/questions/60190038/why-distinct-is-needed-in-this-cypher-query/60195959#comment106483175_60195959"},{"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":1754,"user_id":3579212,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/ec9ece98309ba0ab416f17697f1aa344?s=128&d=identicon&r=PG&f=1","display_name":"adnanmuttaleb","link":"https://stackoverflow.com/users/3579212/adnanmuttaleb"},"edited":false,"score":0,"creation_date":1581581780,"post_id":60195959,"comment_id":106485200,"link":"https://stackoverflow.com/questions/60190038/why-distinct-is-needed-in-this-cypher-query/60195959#comment106485200_60195959"}],"tags":[],"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1581581671,"last_edit_date":1581581671,"creation_date":1581537363,"answer_id":60195959,"question_id":60190038,"share_link":"https://stackoverflow.com/a/60195959","body_markdown":"Assumptions:\r\n\r\n- Every `Movie` has a unique `title`. (This is required for the query to work as is.)\r\n- Every `Genre` has a unique `name`.\r\n- Every `Movie` has at most one `IN_GENRE` relationship to each distinct `Genre`.\r\n\r\nGiven the above assumptions, you are correct that the `DISTINCT` is not necessary. That is because the `RETURN` clause is using `rec.title` as one of the [aggregation grouping keys](https://neo4j.com/docs/cypher-manual/current/functions/aggregating/).","link":"https://stackoverflow.com/questions/60190038/why-distinct-is-needed-in-this-cypher-query/60195959#60195959","title":"why DISTINCT is needed in this Cypher query?"}],"owner":{"reputation":1754,"user_id":3579212,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/ec9ece98309ba0ab416f17697f1aa344?s=128&d=identicon&r=PG&f=1","display_name":"adnanmuttaleb","link":"https://stackoverflow.com/users/3579212/adnanmuttaleb"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1581581671,"creation_date":1581515928,"question_id":60190038,"share_link":"https://stackoverflow.com/q/60190038","body_markdown":"The below query is taken from neo4j movie review dataset sandbox:\r\n\r\n\r\n    MATCH (u:User {name: &quot;Some User&quot;})-[r:RATED]-&gt;(m:Movie)\r\n    WITH u, avg(r.rating) AS mean\r\n    \r\n    MATCH (u)-[r:RATED]-&gt;(m:Movie)-[:IN_GENRE]-&gt;(g:Genre)\r\n    WHERE r.rating &gt; mean\r\n    \r\n    WITH u, g, COUNT(*) AS score\r\n    \r\n    MATCH (g)&lt;-[:IN_GENRE]-(rec:Movie)\r\n    WHERE NOT EXISTS((u)-[:RATED]-&gt;(rec))\r\n    \r\n    RETURN rec.title AS recommendation, rec.year AS year, COLLECT(DISTINCT g.name) AS genres, SUM(score) AS sscore\r\n    ORDER BY sscore DESC LIMIT 10\r\n\r\n\r\nwhat I can not understand is: why the `DISTINCT` keyword is required in the query&#39;s return statement?. Because the expected results from the last `MATCH` statement is something like this:\r\n\r\n    g1,x\r\n    g1,y\r\n    ...\r\n    g2,z\r\n    g2,v\r\n    g2,m\r\n    ...\r\n    gn,m\r\n    gn,b\r\n    gn,x\r\n\r\nwhere `g1,g2,..gn` are the set of genres and `x,y,z,v,m,b...` are a set of movies (in addition there is a user and score column deleted for readability).\r\n\r\nSo according to my understanding what this query is returning: *For each movie return its genres and the sum of their scores.* \r\n\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/60190038/why-distinct-is-needed-in-this-cypher-query","title":"why DISTINCT is needed in this Cypher query?"},{"tags":["java","spring","spring-boot","neo4j","neo4j-ogm"],"answers":[{"tags":[],"owner":{"reputation":253,"user_id":3991291,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/4a93df6c9ca1acb740727f294ba48add?s=128&d=identicon&r=PG&f=1","display_name":"Emptyfruit","link":"https://stackoverflow.com/users/3991291/emptyfruit"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1581596049,"creation_date":1581596049,"answer_id":60207606,"question_id":60188099,"share_link":"https://stackoverflow.com/a/60207606","body_markdown":"Finally, got it. The real problem was not in fetching, but inside internal call for `equals()` and `hashcode()` somewhere during fetch. Since i use **lombok** with `@Data`, all properties paricipated in those methods, causing SOF.\r\n\r\nAdding `@EqualsAndHashCode(exclude={&quot;followers&quot;, &quot;followings&quot;})` to class&#39;s annotations fixed the issue and depth=1 works now.","link":"https://stackoverflow.com/questions/60188099/neo4j-spring-ogm-causes-stackoverflow-for-followers-followings-concept/60207606#60207606","title":"Neo4j Spring ogm causes stackoverflow for followers-followings concept"}],"owner":{"reputation":253,"user_id":3991291,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/4a93df6c9ca1acb740727f294ba48add?s=128&d=identicon&r=PG&f=1","display_name":"Emptyfruit","link":"https://stackoverflow.com/users/3991291/emptyfruit"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":60207606,"answer_count":1,"score":1,"last_activity_date":1581596049,"creation_date":1581509593,"question_id":60188099,"share_link":"https://stackoverflow.com/q/60188099","body_markdown":"Trying to implement simple social network concept: followers + followings. All are just Accounts related to each other. Using Neo4j and Spring boot.\r\n\r\n```\r\n&#39;org.springframework.boot&#39; version &#39;2.2.4.RELEASE&#39;\r\n&#39;org.springframework.boot:spring-boot-starter-data-neo4j&#39;\r\n```\r\n\r\n**Account.class**\r\n\r\n    @NodeEntity\r\n    public class Account {\r\n\r\n      @Id\r\n      private String pk;\r\n\r\n      @Relationship(type = &quot;FOLLOWS&quot;, direction = Relationship.INCOMING)\r\n      private Set&lt;Account&gt; followers;\r\n\r\n      @Relationship(type = &quot;FOLLOWS&quot;, direction = Relationship.OUTGOING)\r\n      private Set&lt;Account&gt; followings;\r\n    }\r\n\r\nUsing standart spring `CrudRepository` (or `Neo4JRepository`, no difference) i constantly get stackoverflows working with accounts. Simplest situation where `A` follows `B` and `B` follows `A` will cause a SOF for `findById()`. I understand that it has smth. to do with fetching depth, but it defaults to 1, which means that i should get `followers` and `followings` of account but theirs relations should be empty. The relations work correctly in terms of adding: i can connect accounts from any end by adding to appropriate `Set` and graph turns out exactly as i intend, but fetching is not working..\r\n\r\n**Main question:** What am i doing and understanding wrong, and what can be done to implement this kind of relations correctly?\r\n\r\nI tried using `session.load()` with depth 0, and no SOFs, of course, but that is not exactly what i need. Default depth  `1` should provide exactly what i need, but i guess i misunderstand the concept?\r\n\r\n**And extra**: is there a way to configure default depth for entire application? Without using `session` manually, thus reimplementing all basic operations..","link":"https://stackoverflow.com/questions/60188099/neo4j-spring-ogm-causes-stackoverflow-for-followers-followings-concept","title":"Neo4j Spring ogm causes stackoverflow for followers-followings concept"},{"tags":["neo4j"],"answers":[{"comments":[{"owner":{"reputation":613,"user_id":7491982,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/c510ddd12aaa347166c6cabaeacedf5f?s=128&d=identicon&r=PG&f=1","display_name":"helen","link":"https://stackoverflow.com/users/7491982/helen"},"edited":false,"score":0,"creation_date":1581539596,"post_id":60188803,"comment_id":106473088,"link":"https://stackoverflow.com/questions/60187636/several-relationships-from-a-node-to-another-node/60188803#comment106473088_60188803"},{"owner":{"reputation":9839,"user_id":4187346,"user_type":"registered","profile_image":"https://i.stack.imgur.com/uSe1J.png?s=128&g=1","display_name":"Dave Bennett","link":"https://stackoverflow.com/users/4187346/dave-bennett"},"reply_to_user":{"reputation":613,"user_id":7491982,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/c510ddd12aaa347166c6cabaeacedf5f?s=128&d=identicon&r=PG&f=1","display_name":"helen","link":"https://stackoverflow.com/users/7491982/helen"},"edited":false,"score":0,"creation_date":1581541618,"post_id":60188803,"comment_id":106473912,"link":"https://stackoverflow.com/questions/60187636/several-relationships-from-a-node-to-another-node/60188803#comment106473912_60188803"},{"owner":{"reputation":613,"user_id":7491982,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/c510ddd12aaa347166c6cabaeacedf5f?s=128&d=identicon&r=PG&f=1","display_name":"helen","link":"https://stackoverflow.com/users/7491982/helen"},"edited":false,"score":0,"creation_date":1581541772,"post_id":60188803,"comment_id":106473976,"link":"https://stackoverflow.com/questions/60187636/several-relationships-from-a-node-to-another-node/60188803#comment106473976_60188803"},{"owner":{"reputation":9839,"user_id":4187346,"user_type":"registered","profile_image":"https://i.stack.imgur.com/uSe1J.png?s=128&g=1","display_name":"Dave Bennett","link":"https://stackoverflow.com/users/4187346/dave-bennett"},"reply_to_user":{"reputation":613,"user_id":7491982,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/c510ddd12aaa347166c6cabaeacedf5f?s=128&d=identicon&r=PG&f=1","display_name":"helen","link":"https://stackoverflow.com/users/7491982/helen"},"edited":false,"score":0,"creation_date":1581541995,"post_id":60188803,"comment_id":106474086,"link":"https://stackoverflow.com/questions/60187636/several-relationships-from-a-node-to-another-node/60188803#comment106474086_60188803"}],"tags":[],"owner":{"reputation":9839,"user_id":4187346,"user_type":"registered","profile_image":"https://i.stack.imgur.com/uSe1J.png?s=128&g=1","display_name":"Dave Bennett","link":"https://stackoverflow.com/users/4187346/dave-bennett"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1581511923,"creation_date":1581511923,"answer_id":60188803,"question_id":60187636,"share_link":"https://stackoverflow.com/a/60188803","body_markdown":"The answer lies in your final `MERGE` clause.\r\n\r\n    MERGE (c)-[r:CONTAINS {first:first}]-&gt;(o)-[rel:CONTAINS {first: first}]-&gt;(p)\r\n\r\nNeo4j will take this entire pattern and ensure it is unique. Since each time it is invoked (due to the last name changing) the whole thing is created. If you would like to have a single relationship from the central to the first name nodes then you need to split it up into two separate parts. Using the following the first `MERGE` will only create the central-first relationship once.\r\n\r\n    MERGE (c)-[r:CONTAINS {first:first}]-&gt;(o)\r\n    MERGE (o)-[rel:CONTAINS {first: first}]-&gt;(p)","link":"https://stackoverflow.com/questions/60187636/several-relationships-from-a-node-to-another-node/60188803#60188803","title":"several relationships from a node to another node"}],"owner":{"reputation":613,"user_id":7491982,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/c510ddd12aaa347166c6cabaeacedf5f?s=128&d=identicon&r=PG&f=1","display_name":"helen","link":"https://stackoverflow.com/users/7491982/helen"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":60188803,"answer_count":1,"score":1,"last_activity_date":1581511923,"creation_date":1581508026,"question_id":60187636,"share_link":"https://stackoverflow.com/q/60187636","body_markdown":"I&#39;m new to neo4j. I have a .csv file with two columns separated by &quot;,&quot;. The first column contains first names and the 2nd column contains the last names:\r\n\r\n    Lname,Fname\r\n    Brown,Helen\r\n    Right,Eliza\r\n    Green,Helen\r\n    Pink,Kate\r\n    Yellow,Helen\r\n\r\nI want to create nodes for *Lname* column and nodes for *Fname* column. For the rows that have the same Fname, I want to connect Lname to the corresponding Fname. For example I want to have a &quot;Helen&quot; node that three nodes &quot;Brown&quot;, &quot;Green&quot; and &quot;Yellow&quot; connected to &quot;Helen&quot;. I also want to connect &quot;Fname&quot; nodes to a &quot;central node&quot;. I have written this code:\r\n\r\n    LOAD CSV WITH HEADERS FROM &#39;file:///names.csv&#39; AS row\r\n    WITH row.Fname AS first, row.Lname AS last\r\n    MERGE (p:la {last: last})\r\n    MERGE (o:fi {first: first})\r\n    MERGE (c:central {name: &quot;central node&quot;})\r\n    MERGE (c)-[r:CONTAINS {first:first}]-&gt;(o)-[rel:CONTAINS {first: first}]-&gt;(p)\r\n    RETURN count(o)\r\n\r\n\r\nwhen I run this code and display the output using this query:\r\n\r\n    MATCH (c:central)-[r:CONTAINS]-&gt;(o:fi)-[rel:CONTAINS]-&gt;(p:la)\r\n    RETURN c, r, o, rel, p\r\n\r\nI receive this graph as output:\r\n[![graph][1]][1]\r\n\r\nAs you see according to the number of last names, I have the same number of relationships to the first names, For example I have 3 relationships from &quot;central node&quot; to &quot;Helen&quot;, but I want only one relationship from &quot;central node&quot; to &quot;Helen&quot;. What&#39;s wrong here?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/IT9cV.png","link":"https://stackoverflow.com/questions/60187636/several-relationships-from-a-node-to-another-node","title":"several relationships from a node to another node"},{"tags":["python","neo4j","networkx","graph-theory","graph-algorithm"],"comments":[{"owner":{"reputation":4521,"user_id":2912349,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e334f9128613bb74632da336c63ef18f?s=128&d=identicon&r=PG&f=1","display_name":"Paul Brodersen","link":"https://stackoverflow.com/users/2912349/paul-brodersen"},"edited":false,"score":1,"creation_date":1581504137,"post_id":60184788,"comment_id":106453892,"link":"https://stackoverflow.com/questions/60184788/is-there-any-way-to-find-the-centre-of-a-graph-in-neo4j-or-networkx#comment106453892_60184788"},{"owner":{"reputation":1250,"user_id":1080145,"user_type":"registered","accept_rate":35,"profile_image":"https://www.gravatar.com/avatar/66cb150e1ba359b39db0e607c02cf3ca?s=128&d=identicon&r=PG","display_name":"Kalyan","link":"https://stackoverflow.com/users/1080145/kalyan"},"reply_to_user":{"reputation":4521,"user_id":2912349,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e334f9128613bb74632da336c63ef18f?s=128&d=identicon&r=PG&f=1","display_name":"Paul Brodersen","link":"https://stackoverflow.com/users/2912349/paul-brodersen"},"edited":false,"score":0,"creation_date":1581511165,"post_id":60184788,"comment_id":106457617,"link":"https://stackoverflow.com/questions/60184788/is-there-any-way-to-find-the-centre-of-a-graph-in-neo4j-or-networkx#comment106457617_60184788"},{"owner":{"reputation":4521,"user_id":2912349,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e334f9128613bb74632da336c63ef18f?s=128&d=identicon&r=PG&f=1","display_name":"Paul Brodersen","link":"https://stackoverflow.com/users/2912349/paul-brodersen"},"edited":false,"score":0,"creation_date":1581532778,"post_id":60184788,"comment_id":106469954,"link":"https://stackoverflow.com/questions/60184788/is-there-any-way-to-find-the-centre-of-a-graph-in-neo4j-or-networkx#comment106469954_60184788"}],"answers":[{"tags":[],"owner":{"reputation":10970,"user_id":12366110,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7594b4fc006384ccde73d37538e2682b?s=128&d=identicon&r=PG","display_name":"CDJB","link":"https://stackoverflow.com/users/12366110/cdjb"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1581594640,"creation_date":1581594640,"answer_id":60207163,"question_id":60184788,"share_link":"https://stackoverflow.com/a/60207163","body_markdown":"This can be done in NetworkX using [`networkx.algorithms.distance_measure.center()`][1], which returns a list of central nodes in the graph. Below is an example which plots central nodes in red.\r\n\r\n**Example Code:**\r\n\r\n    import networkx as nx\r\n    from networkx.algorithms.distance_measures import center\r\n    \r\n    # Set up graph\r\n    G = nx.barbell_graph(5, 5)\r\n    \r\n    # Get position using spring layout\r\n    pos = nx.spring_layout(G)\r\n    \r\n    # Get center node(s)\r\n    c = center(G)\r\n    \r\n    # Draw non-central nodes &amp; all edges\r\n    nx.draw_networkx_nodes(G, pos, nodelist=set(G.nodes)-set(c))\r\n    nx.draw_networkx_edges(G, pos)\r\n    \r\n    # Draw central nodes in red\r\n    nx.draw_networkx_nodes(G, pos, nodelist=c, node_color=&#39;r&#39;)\r\n    \r\n    # Draw labels\r\n    nx.draw_networkx_labels(G, pos)\r\n\r\n**Output:**\r\n\r\n    G = nx.barbell_graph(5, 5)\r\n\r\n[![enter image description here][2]][2]\r\n\r\n    G = nx.complete_graph(6)\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://networkx.github.io/documentation/stable/reference/algorithms/generated/networkx.algorithms.distance_measures.center.html\r\n  [2]: https://i.stack.imgur.com/LVFtO.png\r\n  [3]: https://i.stack.imgur.com/uEooL.png","link":"https://stackoverflow.com/questions/60184788/is-there-any-way-to-find-the-centre-of-a-graph-in-neo4j-or-networkx/60207163#60207163","title":"Is there any way to find the centre of a graph in Neo4j or NetworkX?"}],"owner":{"reputation":1250,"user_id":1080145,"user_type":"registered","accept_rate":35,"profile_image":"https://www.gravatar.com/avatar/66cb150e1ba359b39db0e607c02cf3ca?s=128&d=identicon&r=PG","display_name":"Kalyan","link":"https://stackoverflow.com/users/1080145/kalyan"},"last_editor":{"reputation":10970,"user_id":12366110,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7594b4fc006384ccde73d37538e2682b?s=128&d=identicon&r=PG","display_name":"CDJB","link":"https://stackoverflow.com/users/12366110/cdjb"},"comment_count":3,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1581622552,"creation_date":1581498898,"last_edit_date":1581622552,"question_id":60184788,"share_link":"https://stackoverflow.com/q/60184788","body_markdown":"I am new to graph theory. Currently I am working with Neo4j, and I need to find centre nodes in a subgraph for analysis. Is there any way to find central nodes in either Neo4j or NetworkX? ","link":"https://stackoverflow.com/questions/60184788/is-there-any-way-to-find-the-centre-of-a-graph-in-neo4j-or-networkx","title":"Is there any way to find the centre of a graph in Neo4j or NetworkX?"},{"tags":["python","neo4j","transactions","py2neo"],"answers":[{"comments":[{"owner":{"reputation":315,"user_id":3050230,"user_type":"registered","accept_rate":61,"profile_image":"https://graph.facebook.com/193200241/picture?type=large","display_name":"Dave C","link":"https://stackoverflow.com/users/3050230/dave-c"},"edited":false,"score":0,"creation_date":1581546545,"post_id":60197773,"comment_id":106475812,"link":"https://stackoverflow.com/questions/60182883/py2neo-script-stops-90s-after-successfully-committing-transactions/60197773#comment106475812_60197773"},{"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":315,"user_id":3050230,"user_type":"registered","accept_rate":61,"profile_image":"https://graph.facebook.com/193200241/picture?type=large","display_name":"Dave C","link":"https://stackoverflow.com/users/3050230/dave-c"},"edited":false,"score":1,"creation_date":1581547160,"post_id":60197773,"comment_id":106476025,"link":"https://stackoverflow.com/questions/60182883/py2neo-script-stops-90s-after-successfully-committing-transactions/60197773#comment106476025_60197773"}],"tags":[],"owner":{"reputation":48687,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581546174,"creation_date":1581546174,"answer_id":60197773,"question_id":60182883,"share_link":"https://stackoverflow.com/a/60197773","body_markdown":"You only call `tx.commit()` when the `j % 1000 == 0` test succeeds. You need to make sure you call `tx.commit()` if necessary after  you exit the `j` for-loop, else the last batch of operations will be dropped.\r\n\r\n*By the way, you are currently calling `tx.commit()` the first time through the loop (since `0 % 1000 == 0`). You probably want to avoid that.*","link":"https://stackoverflow.com/questions/60182883/py2neo-script-stops-90s-after-successfully-committing-transactions/60197773#60197773","title":"Py2neo script stops ~90s after successfully committing transactions"}],"owner":{"reputation":315,"user_id":3050230,"user_type":"registered","accept_rate":61,"profile_image":"https://graph.facebook.com/193200241/picture?type=large","display_name":"Dave C","link":"https://stackoverflow.com/users/3050230/dave-c"},"last_editor":{"reputation":315,"user_id":3050230,"user_type":"registered","accept_rate":61,"profile_image":"https://graph.facebook.com/193200241/picture?type=large","display_name":"Dave C","link":"https://stackoverflow.com/users/3050230/dave-c"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1581546174,"creation_date":1581491312,"last_edit_date":1581543953,"question_id":60182883,"share_link":"https://stackoverflow.com/q/60182883","body_markdown":"After changing the code in [my previous question][1] to build cypher transactions instead of creating nodes and relationships in Py2neo, it seems to work successfully, but transactions stop after about 90 seconds, with no error message.  The script continues to run, but the iterations stop and no further transactions are made, and looking at the logs it appears all interaction with the database stops. Can anyone help me understand why this might be?  The following code is being executed from Jupyter.\r\n\r\n    import pandas as pd\r\n    import csv\r\n    import math\r\n    import allel\r\n    import zarr\r\n    from py2neo import Graph, Node, Relationship, NodeMatcher\r\n    \r\n    zarr_path = &#39;/media/user/Seagate Backup Plus Drive/uk_twin_cohort/exome/chroms.zarr&#39;\r\n    callset = zarr.open_group(zarr_path, mode=&#39;r&#39;)\r\n    \r\n    graph = Graph(user=&quot;neo4j&quot;, password=&quot;password&quot;)\r\n    \r\n    chrom_list = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,&#39;X&#39;]\r\n    matcher = NodeMatcher(graph)\r\n    \r\n    for chrom in chrom_list:\r\n        chrom_label = &quot;Chromosome_&quot; + str(chrom)\r\n        samples = callset[chrom][&#39;samples&#39;]\r\n        variants = allel.VariantChunkedTable(callset[chrom][&#39;variants&#39;], names=[&#39;AC&#39;,&#39;AF_AFR&#39;, &#39;AF_AMR&#39;, &#39;AF_ASN&#39;, &#39;AF_EUR&#39;, &#39;AF_MAX&#39;, &#39;CGT&#39;, &#39;CLR&#39;, &#39;CSQ&#39;, &#39;DP&#39;, &#39;DP4&#39;, &#39;ESP_MAF&#39;, &#39;FILTER_LowQual&#39;, &#39;FILTER_MinHWE&#39;, &#39;FILTER_MinVQSLOD&#39;, &#39;FILTER_PASS&#39;, &#39;HWE&#39;, &#39;ICF&#39;, &#39;ID&#39;, &#39;IS&#39;, &#39;PC2&#39;, &#39;PCHI2&#39;, &#39;POS&#39;, &#39;PR&#39;, &#39;QCHI2&#39;, &#39;QUAL&#39;, &#39;REF&#39;, &#39;ALT&#39;, &#39;INDEL&#39;, &#39;SHAPEIT&#39;, &#39;SNP_ID&#39;, &#39;TYPE&#39;, &#39;UGT&#39;, &#39;VQSLOD&#39;, &#39;dbSNPmismatch&#39;, &#39;is_snp&#39;, &#39;numalt&#39;], index=&#39;POS&#39;)\r\n        pos = variants[&#39;POS&#39;][:]\r\n        pos = pos.tolist()\r\n        ref = variants[&#39;REF&#39;][:]\r\n        alt = variants[&#39;ALT&#39;][:]\r\n        dpz = callset[chrom][&#39;calldata/DP&#39;]\r\n        dp = dpz[:, 0]\r\n        psz = callset[chrom][&#39;calldata/PS&#39;]\r\n        plz = callset[chrom][&#39;calldata/PL&#39;]\r\n        gpz = callset[chrom][&#39;calldata/GP&#39;]\r\n        calldata = callset[chrom][&#39;calldata&#39;]\r\n        gt = allel.GenotypeDaskArray(calldata[&#39;GT&#39;])\r\n        hap = gt.to_haplotypes()\r\n        hap = gt.to_haplotypes()\r\n        hap1 = hap[:, ::2]\r\n        hap2 = hap[:, 1::2]\r\n        list_h1 = hap1[:, 0].compute()\r\n        list_h1 = list_h1.tolist()\r\n        list_h2 = hap2[:, 0].compute()\r\n        for i in range(len(samples)):\r\n            subject = samples[i]\r\n            dp = dpz[:, i]\r\n            ps = psz[:, i]\r\n            pl = plz[:, i]\r\n            gp = gpz[:, i]\r\n            list_h1 = hap1[:, i].compute()\r\n            list_h2 = hap2[:, i].compute()\r\n            bp1 = []\r\n            bp2 = []\r\n            hpt = []\r\n            n1 = []\r\n            n2 = []\r\n            g = Graph()\r\n            print(subject)\r\n            print(&quot;Subject &quot; + str(i) + &quot; of &quot; + str(len(samples)))\r\n            s = matcher.match(&quot;Subject&quot;, subject_id= subject).first()\r\n            print(s)\r\n            if s is None:\r\n                continue\r\n            j = 0\r\n            nodes = []\r\n            for j in range(len(pos)):\r\n                h1 = int(list_h1[j])\r\n                h2 = int(list_h2[j])\r\n                k = int(pos[j])\r\n                l = str(ref[j])\r\n                m = str(alt[j][h1-1])\r\n                o = str(alt[j][h2-1])\r\n                if h1 == 0 and h2 == 0:\r\n                    a = matcher.match(chrom_label, pos=k, bp=l).first()\r\n                    nodes.append(a)\r\n                    nodes.append(a)\r\n    \r\n                elif h1 == 0 and h2 &gt; 0:\r\n                    a = matcher.match(chrom_label, pos=k, bp=l).first()\r\n                    nodes.append(a)\r\n                    a = matcher.match(chrom_label, pos=k, bp=o).first()\r\n                    nodes.append(a)\r\n    \r\n                elif h1 &gt; 0 and h2 == 0:\r\n                    a = matcher.match(chrom_label, pos=k, bp=m).first()\r\n                    nodes.append(a)\r\n                    a = matcher.match(chrom_label, pos=k, bp=l).first()\r\n                    nodes.append(a)\r\n    \r\n                elif h1 == h2 and h1 &gt; 0:\r\n                    a = matcher.match(chrom_label, pos=k, bp=m).first()\r\n                    nodes.append(a)\r\n                    nodes.append(a)\r\n    \r\n                else:\r\n                    a = matcher.match(chrom_label, pos=k, bp=m).first()\r\n                    nodes.append(a)\r\n                    a = matcher.match(chrom_label, pos=k, bp=o).first()\r\n                    nodes.append(a)\r\n                if j % 10000 == 0:\r\n                    print(str(j) + &quot; rows complete.&quot;)\r\n            print(subject + &quot; matching complete.&quot;)\r\n            print(len(nodes))\r\n            j=0\r\n            tx = g.begin()\r\n            for j in range(len(pos)):\r\n                read_depth = int(dp[j])\r\n                ps1 = int(ps[j])\r\n                PL0 = int(pl[j][0])\r\n                PL1 = int(pl[j][1])\r\n                PL2 = int(pl[j][2])\r\n                genotype = str(h1) + &#39;|&#39; + str(h2) \r\n                GP0 = float(gp[j][0])\r\n                GP1 = float(gp[j][1])\r\n                GP2 = float(gp[j][2])\r\n                h1 = int(list_h1[j])\r\n                h2 = int(list_h2[j])\r\n                k = int(pos[j])\r\n                l = str(ref[j])\r\n                m = str(alt[j][h1-1])\r\n                o = str(alt[j][h2-1])\r\n    \r\n                if h1 == 0 and h2 == 0:\r\n                    x = (2*j)\r\n                    a = nodes[x]\r\n                    tx.run(&quot;MATCH (s) WHERE id(s) = {S} MATCH (a) WHERE id(a) = {A} MERGE (s)-[r:HOMOZYGOUS {HTA:{H1}, HTB:{H2}, GT:{GT}, dp:{DP}, phase_set:{PS1}, PL0:{PL0}, PL1:{PL1}, PL2:{PL2}, GP0:{GP0}, GP1:{GP1}, GP2:{GP2}}]-&gt;(a)&quot;, {&quot;S&quot;:s.identity, &quot;A&quot;:a.identity, &quot;H1&quot;:h1, &quot;H2&quot;:h2, &quot;GT&quot;:genotype, &quot;DP&quot;:read_depth, &quot;PS1&quot;:ps1, &quot;PL0&quot;:PL0, &quot;PL1&quot;:PL1, &quot;PL2&quot;:PL2, &quot;GP0&quot;:GP0, &quot;GP1&quot;:GP1, &quot;GP2&quot;:GP2 })\r\n                elif h1 == 0 and h2 &gt; 0:\r\n                    x = (2*j)\r\n                    a = nodes[x]\r\n                    tx.run(&quot;MATCH (s) WHERE id(s) = {S} MATCH (a) WHERE id(a) = {A} MERGE (s)-[r:HETEROZYGOUS {HTA:{H1}, HTB:{H2}, GT:{GT}, dp:{DP}, phase_set:{PS1}, PL0:{PL0}, PL1:{PL1}, PL2:{PL2}, GP0:{GP0}, GP1:{GP1}, GP2:{GP2}}]-&gt;(a)&quot;, {&quot;S&quot;:s.identity, &quot;A&quot;:a.identity, &quot;H1&quot;:h1, &quot;H2&quot;:h2, &quot;GT&quot;:genotype, &quot;DP&quot;:read_depth, &quot;PS1&quot;:ps1, &quot;PL0&quot;:PL0, &quot;PL1&quot;:PL1, &quot;PL2&quot;:PL2, &quot;GP0&quot;:GP0, &quot;GP1&quot;:GP1, &quot;GP2&quot;:GP2 })\r\n                    y = (2*j)+1\r\n                    b = nodes[y]\r\n                    tx.run(&quot;MATCH (s) WHERE id(s) = {S} MATCH (a) WHERE id(a) = {B} MERGE (s)-[r:HETEROZYGOUS {HTA:{H1}, HTB:{H2}, GT:{GT}, dp:{DP}, phase_set:{PS1}, PL0:{PL0}, PL1:{PL1}, PL2:{PL2}, GP0:{GP0}, GP1:{GP1}, GP2:{GP2}}]-&gt;(a)&quot;, {&quot;S&quot;:s.identity, &quot;B&quot;:b.identity, &quot;H1&quot;:h1, &quot;H2&quot;:h2, &quot;GT&quot;:genotype, &quot;DP&quot;:read_depth, &quot;PS1&quot;:ps1, &quot;PL0&quot;:PL0, &quot;PL1&quot;:PL1, &quot;PL2&quot;:PL2, &quot;GP0&quot;:GP0, &quot;GP1&quot;:GP1, &quot;GP2&quot;:GP2 })\r\n                elif h1 &gt; 0 and h2 == 0:\r\n                    x = (2*j)\r\n                    a = nodes[j]\r\n                    tx.run(&quot;MATCH (s) WHERE id(s) = {S} MATCH (a) WHERE id(a) = {A} MERGE (s)-[r:HETEROZYGOUS {HTA:{H1}, HTB:{H2}, GT:{GT}, dp:{DP}, phase_set:{PS1}, PL0:{PL0}, PL1:{PL1}, PL2:{PL2}, GP0:{GP0}, GP1:{GP1}, GP2:{GP2}}]-&gt;(a)&quot;, {&quot;S&quot;:s.identity, &quot;A&quot;:a.identity, &quot;H1&quot;:h1, &quot;H2&quot;:h2, &quot;GT&quot;:genotype, &quot;DP&quot;:read_depth, &quot;PS1&quot;:ps1, &quot;PL0&quot;:PL0, &quot;PL1&quot;:PL1, &quot;PL2&quot;:PL2, &quot;GP0&quot;:GP0, &quot;GP1&quot;:GP1, &quot;GP2&quot;:GP2 })\r\n                    y = (2*j)+1\r\n                    b = nodes[y]\r\n                    tx.run(&quot;MATCH (s) WHERE id(s) = {S} MATCH (a) WHERE id(a) = {B} MERGE (s)-[r:HETEROZYGOUS {HTA:{H1}, HTB:{H2}, GT:{GT}, dp:{DP}, phase_set:{PS1}, PL0:{PL0}, PL1:{PL1}, PL2:{PL2}, GP0:{GP0}, GP1:{GP1}, GP2:{GP2}}]-&gt;(a)&quot;, {&quot;S&quot;:s.identity, &quot;B&quot;:b.identity, &quot;H1&quot;:h1, &quot;H2&quot;:h2, &quot;GT&quot;:genotype, &quot;DP&quot;:read_depth, &quot;PS1&quot;:ps1, &quot;PL0&quot;:PL0, &quot;PL1&quot;:PL1, &quot;PL2&quot;:PL2, &quot;GP0&quot;:GP0, &quot;GP1&quot;:GP1, &quot;GP2&quot;:GP2 })\r\n                elif h1 == h2 and h1 &gt; 0:\r\n                    x = (2*j)\r\n                    a = nodes[j]\r\n                    tx.run(&quot;MATCH (s) WHERE id(s) = {S} MATCH (a) WHERE id(a) = {A} MERGE (s)-[r:HOMOZYGOUS {HTA:{H1}, HTB:{H2}, GT:{GT}, dp:{DP}, phase_set:{PS1}, PL0:{PL0}, PL1:{PL1}, PL2:{PL2}, GP0:{GP0}, GP1:{GP1}, GP2:{GP2}}]-&gt;(a)&quot;, {&quot;S&quot;:s.identity, &quot;A&quot;:a.identity, &quot;H1&quot;:h1, &quot;H2&quot;:h2, &quot;GT&quot;:genotype, &quot;DP&quot;:read_depth, &quot;PS1&quot;:ps1, &quot;PL0&quot;:PL0, &quot;PL1&quot;:PL1, &quot;PL2&quot;:PL2, &quot;GP0&quot;:GP0, &quot;GP1&quot;:GP1, &quot;GP2&quot;:GP2 })\r\n                else:\r\n                    x = (2*j)\r\n                    a = nodes[j]\r\n                    tx.run(&quot;MATCH (s) WHERE id(s) = {S} MATCH (a) WHERE id(a) = {A} MERGE (s)-[r:HETEROZYGOUS {HTA:{H1}, HTB:{H2}, GT:{GT}, dp:{DP}, phase_set:{PS1}, PL0:{PL0}, PL1:{PL1}, PL2:{PL2}, GP0:{GP0}, GP1:{GP1}, GP2:{GP2}}]-&gt;(a)&quot;, {&quot;S&quot;:s.identity, &quot;A&quot;:a.identity, &quot;H1&quot;:h1, &quot;H2&quot;:h2, &quot;GT&quot;:genotype, &quot;DP&quot;:read_depth, &quot;PS1&quot;:ps1, &quot;PL0&quot;:PL0, &quot;PL1&quot;:PL1, &quot;PL2&quot;:PL2, &quot;GP0&quot;:GP0, &quot;GP1&quot;:GP1, &quot;GP2&quot;:GP2 })\r\n                    y = (2*j)+1\r\n                    b = nodes[y]\r\n                    tx.run(&quot;MATCH (s) WHERE id(s) = {S} MATCH (a) WHERE id(a) = {B} MERGE (s)-[r:HETEROZYGOUS {HTA:{H1}, HTB:{H2}, GT:{GT}, dp:{DP}, phase_set:{PS1}, PL0:{PL0}, PL1:{PL1}, PL2:{PL2}, GP0:{GP0}, GP1:{GP1}, GP2:{GP2}}]-&gt;(a)&quot;, {&quot;S&quot;:s.identity, &quot;B&quot;:b.identity, &quot;H1&quot;:h1, &quot;H2&quot;:h2, &quot;GT&quot;:genotype, &quot;DP&quot;:read_depth, &quot;PS1&quot;:ps1, &quot;PL0&quot;:PL0, &quot;PL1&quot;:PL1, &quot;PL2&quot;:PL2, &quot;GP0&quot;:GP0, &quot;GP1&quot;:GP1, &quot;GP2&quot;:GP2 })\r\n                if j % 1000 == 0:\r\n                    print(str(j) + &quot; rows added to database.&quot;)\r\n                    tx.commit()\r\n                    tx = g.begin()\r\n                    \r\n        print(chrom_label + &quot; completed.&quot;)\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/60152233/py2neo-issue-with-batch-transactions-attributeerror-node-object-has-no-attr","link":"https://stackoverflow.com/questions/60182883/py2neo-script-stops-90s-after-successfully-committing-transactions","title":"Py2neo script stops ~90s after successfully committing transactions"}],"has_more":true,"quota_max":300,"quota_remaining":299}